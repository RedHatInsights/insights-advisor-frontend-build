(self.webpackChunkadvisor_frontend=self.webpackChunkadvisor_frontend||[]).push([[3993],{8292:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(94015),r=s.n(a),n=s(23645),i=s.n(n)()(r());i.push([e.id,".advisor .systemsPdfOverride{text-align:left !important;border-radius:0 !important}\n","",{version:3,sources:["webpack://./src/PresentationalComponents/Export/_Export.scss"],names:[],mappings:"AAAA,6BACoB,0BAA0B,CAAC,0BAA0B",sourcesContent:[".advisor{\n.systemsPdfOverride{text-align:left !important;border-radius:0 !important}\n\n}"],sourceRoot:""}]);const o=i},71467:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(94015),r=s.n(a),n=s(23645),i=s.n(n)()(r());i.push([e.id,".advisor .pf-c-table__sort-indicator{margin-left:var(--pf-global--spacer--xs)}.advisor .pf-c-table th,.advisor td{padding-right:0px !important}.advisor .pf-c-table tr>:last-child{padding-left:var(--pf-global--spacer--xs)}.advisor .pf-c-table .pf-c-table__sort{min-width:initial}.advisor table.ins-c-entity-table.pf-c-table .ins-composed-col *{font-size:var(--pf-global--FontSize--md)}\n","",{version:3,sources:["webpack://./src/PresentationalComponents/SystemsTable/SystemsTable.scss"],names:[],mappings:"AAAA,qCAC4B,wCAAwC,CADpE,oCACuF,4BAA4B,CADnH,oCAC+I,yCAAyC,CADxL,uCACuN,iBAAiB,CADxO,iEACiS,wCAAwC",sourcesContent:[".advisor{\n.pf-c-table__sort-indicator{margin-left:var(--pf-global--spacer--xs)}.pf-c-table th,td{padding-right:0px !important}.pf-c-table tr>:last-child{padding-left:var(--pf-global--spacer--xs)}.pf-c-table .pf-c-table__sort{min-width:initial}table.ins-c-entity-table.pf-c-table .ins-composed-col *{font-size:var(--pf-global--FontSize--md)}\n\n}"],sourceRoot:""}]);const o=i},96166:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Q});var a=s(96156),r=s(28481),n=(s(88777),s(64169)),i=s(38532),o=s(20999),l=s(97522),c=s.n(l),f=s(26042),u=s(59900),m=s(33739),p=s(82141),d=s(45697),y=s.n(d),g=s(85061),v=s(92137),b=s(87757),h=s.n(b),E=(s(86496),s(58141)),_=s(89736),O=s(51634),S=s(39080),w=s(87119),Z=s(75442),A=s(23992),x=s(71712),C=s(32412),T=s(18623);function P(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function j(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?P(Object(s),!0).forEach((function(t){(0,a.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):P(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var k=_.mM.create({bold:{fontWeight:A.default.value},link:{color:x.ZP.value},text:{marginTop:C.ZP.value},nameColumn:{width:"220px"},header:{fontSize:9,color:Z.ZP.value,paddingLeft:S.ZP.value,paddingBottom:O.ZP.value,paddingTop:w.ZP.value}}),M=function(e){var t=e.page,s=e.systems,a=e.intl,n=[{value:a.formatMessage(T.Z.name),style:k.nameColumn},{value:a.formatMessage(T.Z.recommendations),style:{width:"100px",textAlign:"center"}},{value:a.formatMessage(T.Z.critical),style:{width:"70px",textAlign:"center"}},{value:a.formatMessage(T.Z.important),style:{width:"70px",textAlign:"center"}},{value:a.formatMessage(T.Z.moderate),style:{width:"60px",textAlign:"center"}},{value:a.formatMessage(T.Z.low),style:{width:"90px",textAlign:"center"}},{value:a.formatMessage(T.Z.lastSeen),style:{marginLeft:"20px"}}],i=["hits","critical_hits","important_hits","moderate_hits","low_hits"],o=(0,g.Z)(s.map((function(e){var t=new Date(e.last_seen).toUTCString().split(" "),s=(0,r.Z)(t,5),a=s[1],n=s[2],o=s[3],l=s[4],f="".concat(a," ").concat(n," ").concat(o,", ").concat(l.split(":").slice(0,2).join(":")," UTC");return[c().createElement(_.xv,{key:e.system_uuid,style:k.nameColumn},c().createElement(_.rU,{style:k.link,src:"https://cloud.redhat.com/insights/advisor/systems/".concat(e.system_uuid,"/")},e.display_name))].concat((0,g.Z)(i.map((function(t){return a=(s={style:{width:"10px"},value:e[t]}).value,r=s.style,c().createElement(_.xv,{style:r},a);var s,a,r}))),[c().createElement(_.xv,{key:e.last_seen,style:{width:"100px"}},"".concat(f))])})));return c().createElement(c().Fragment,{key:t},c().createElement(E.sg,null,c().createElement(E.iA,{withHeader:!0,rows:[n.map((function(e){return s=(t=e).value,a=t.style,c().createElement(_.xv,{style:j(j(j({},a),k.header),k.bold)},s);var t,s,a}))].concat((0,g.Z)(o))})))};M.propTypes={systems:y().object,page:y().number,intl:y().any};var D=function(e){var t=e.systemsTotal,s=e.systems,a=e.filters,r=e.tags,n=e.intl;return delete a.offset,delete a.limit,c().createElement(c().Fragment,{key:"".concat(n.formatMessage(T.Z.insightsHeader),": ").concat(n.formatMessage(T.Z.systems))},c().createElement(_.xv,{key:"sys-count",style:k.text},n.formatMessage(T.Z.sysTableCount,{systems:c().createElement(_.xv,{key:"sys-count-count",style:k.bold},n.formatMessage(T.Z.execReportHeaderSystems,{systems:t}))})),c().createElement(_.xv,{key:"sys-filters",style:k.text},n.formatMessage(T.Z.filtersApplied)),c().createElement(_.xv,{key:"sys-filters-values",style:k.bold},Object.entries(a).map((function(e){return c().createElement(_.xv,{key:e},"".concat(e[0],": ").concat(e[1],"     "))}))),c().createElement(_.xv,{key:"sys-tags",style:k.text},n.formatMessage(T.Z.tagsApplied)),c().createElement(_.xv,{key:"sys-tags-values",style:k.bold},r?decodeURIComponent(r):n.formatMessage(T.Z.noTags)),c().createElement(E.$0,{key:"systems",title:"Systems"},M({systems:s,intl:n})))};D.propTypes={systems:y().object,systemsTotal:y().number,filters:y().object,tags:y().array,intl:y().any};var I=s(37802),R=s(86896);function F(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function N(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?F(Object(s),!0).forEach((function(t){(0,a.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):F(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var L=function(e){var t=e.filters,s=e.selectedTags,a=e.systemsCount,n=(0,R.Z)(),i=(0,l.useState)(!1),f=(0,r.Z)(i,2),u=f[0],m=f[1],p=function(){var e=(0,v.Z)(h().mark((function e(){var i,l,c,f,u,p;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),i=s.length&&{tags:s},e.t0=Promise,e.next=5,I.Z.get(o.SYSTEMS_FETCH_URL,{},N(N(N({},t),i),{},{limit:a}));case 5:return e.t1=e.sent.data,e.t2=[e.t1],e.next=9,e.t0.all.call(e.t0,e.t2);case 9:return l=e.sent,c=(0,r.Z)(l,1),f=c[0],u=D({systemsTotal:f.meta.count,systems:f.data.slice(0,18),filters:t,tags:s,intl:n}),p=f.data.slice(18,f.data.length).reduce((function(e,t,s){var a=Math.floor(s/31);return!e[a]&&(e[a]=[]),e[a].push(t),e}),[]),m(!1),e.abrupt("return",[u].concat((0,g.Z)(p.map((function(e,t){return M({page:t,systems:e,intl:n})})))));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,l.useMemo)((function(){return c().createElement(E.o6,{groupName:n.formatMessage(T.Z.redHatInsights),allPagesHaveTitle:!1,label:u?n.formatMessage(T.Z.loading):n.formatMessage(T.Z.exportPdf),asyncFunction:p,buttonProps:N({variant:"",component:"button",className:"pf-c-dropdown__menu-item systemsPdfOverride"},u?{isDisabled:!0}:null),reportName:"".concat(n.formatMessage(T.Z.insightsHeader),":"),type:n.formatMessage(T.Z.systems),fileName:"Advisor_systems--".concat((new Date).toUTCString().replace(/ /g,"-"),".pdf"),size:[841.89,595.28]})}),[u])};L.propTypes={filters:y().object,selectedTags:y().string,systemsCount:y().number};const B=L;var Y=s(30781),H=s(43476),G=s(40050),U=s(24405),z=s(67336),V=s(36873),W=s(70856),q=s(43707);function J(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function K(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?J(Object(s),!0).forEach((function(t){(0,a.Z)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):J(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var $=function(e){var t,s,n,d=e.systemsFetchStatus,y=e.fetchSystems,g=e.systems,v=e.filters,b=e.setFilters,h=e.selectedTags,E=e.workloads,_=e.SID,O=(0,R.Z)(),S=(0,q.T)("advisor",o.PERMS.export).hasAccess,w=(0,l.useRef)(null),Z=g.meta?g.meta.count:0,A=(0,l.useState)(v.display_name||""),x=(0,r.Z)(A,2),C=x[0],P=x[1],j=(0,G.Z)(C,o.DEBOUNCE_DELAY),k=(0,l.useState)(!0),M=(0,r.Z)(k,2),D=M[0],I=M[1],F={0:"display_name",1:"hits",2:"critical_hits",3:"important_hits",4:"moderate_hits",5:"low_hits",6:"last_seen"},N=(0,l.useCallback)((function(){var e=h.length&&{tags:h};E&&(e=K(K({},e),(0,f.s0)(E,_))),y(K(K({},(0,f.qW)(v)),e))}),[y,v,h,E,_]),L=function(e){var t=K(K({},v),{},{offset:0});"text"===e&&P(""),delete t[e],"hits"===e&&void 0===t.hits&&(t.hits=["yes"]),b(t)},Y=[{label:O.formatMessage(T.Z.name),filterValues:{key:"text-filter",onChange:function(e,t){return P(t)},value:C}},{label:o.SYSTEM_FILTER_CATEGORIES.hits.title,type:o.SYSTEM_FILTER_CATEGORIES.hits.type,id:o.SYSTEM_FILTER_CATEGORIES.hits.urlParam,value:"checkbox-".concat(o.SYSTEM_FILTER_CATEGORIES.hits.urlParam),filterValues:{key:"".concat(o.SYSTEM_FILTER_CATEGORIES.hits.urlParam,"-filter"),onChange:function(e,t){return function(e,t){"hits"===e&&t.length>1&&t.includes("yes")&&t.shift(),t.length>0?b(K(K({},v),{},{offset:0},(0,a.Z)({},e,t))):L(e)}(o.SYSTEM_FILTER_CATEGORIES.hits.urlParam,t)},value:v.hits,items:o.SYSTEM_FILTER_CATEGORIES.hits.values}}],H={filters:(t=K({},v),t.hits&&t.hits.includes("yes")&&delete t.hits,delete t.sort,delete t.offset,delete t.limit,(0,f.yK)(t,o.SYSTEM_FILTER_CATEGORIES)),onDelete:function(e,t,s){s?(P(""),b({sort:v.sort,limit:v.limit,offset:v.offset,hits:["yes"]})):t.map((function(e){var t=(0,a.Z)({},e.urlParam,Array.isArray(v[e.urlParam])?v[e.urlParam].filter((function(t){return String(t)!==String(e.chips[0].value)})):"");t[e.urlParam].length>0?b(K(K({},v),t)):L(e.urlParam)}))}};return(0,l.useEffect)((function(){void 0===v.display_name?P(""):P(v.display_name)}),[v.display_name]),(0,l.useEffect)((function(){if(!D&&"pending"!==d){var e=K({},v);delete e.display_name,b(K(K(K({},e),C.length?{display_name:C}:{}),{},{offset:0}))}}),[j]),(0,l.useEffect)((function(){if(window.location.search){var e=(0,f.yG)();delete e.tags,void 0!==e.sort&&(e.sort=e.sort[0]),void 0!==e.display_name&&(e.display_name=e.display_name[0]),void 0===e.hits&&(e.hits=["all"]),void 0===e.offset?e.offset=0:e.offset=Number(e.offset[0]),void 0===e.limit?e.limit=10:e.limit=Number(e.limit[0]),b(K(K({},v),e))}else void 0!==v.limit&&void 0!==v.offset&&void 0!==v.hits||b(K(K({},v),{},{offset:0,limit:10,hits:["all"]}));I(!1)}),[]),(0,l.useEffect)((function(){(0,f.Y4)(v,h,E)}),[v,h,E]),(0,l.useEffect)((function(){!D&&"pending"!==d&&null!==h&&N()}),[N,D,v,h]),"failed"!==d?c().createElement(m.Z,{ref:w,items:("pending"!==d&&g&&g.data||[]).map((function(e){return K(K({},e),{},{id:e.system_uuid})})),isFullView:!0,sortBy:(s=Number(Object.entries(F).find((function(e){return e[1]===v.sort||"-".concat(e[1])===v.sort}))[0]),n="-"===v.sort[0]?"desc":"asc",{index:s,key:6!==s?F[s]:"updated",direction:n}),onSort:function(e){var t=e.index,s=e.direction,a="".concat("asc"===s?"":"-").concat(F[t]);b(K(K({},v),{},{sort:a,offset:0}))},hasCheckbox:!1,page:v.offset/v.limit+1,total:Z,isLoaded:"pending"!==d,perPage:Number(v.limit),onRefresh:function(e){if("fulfilled"===d){var t=v.offset,s=v.limit;e.page*e.per_page-e.per_page===t&&s===e.per_page||b(K(K({},v),{},{limit:e.per_page,offset:e.page*e.per_page-e.per_page}))}},filterConfig:{items:Y},activeFiltersConfig:H,exportConfig:{onSelect:function(e,t){return(0,U.Z)("systems",t,(0,f.Y4)(v,h))},extraItems:[c().createElement("li",{key:"download-pd",role:"menuitem"},c().createElement(B,{filters:K({},(0,f.qW)(v)),selectedTags:h,systemsCount:g&&g.meta&&g.meta.count}))],isDisabled:!S,tooltipText:S?O.formatMessage(T.Z.exportData):O.formatMessage(T.Z.permsAction)},fallback:p.Z,onLoad:function(e){var t=e.mergeWithEntities,s=e.INVENTORY_ACTION_TYPES,a=[{title:O.formatMessage(T.Z.name),transforms:[i.sortable,i.cellWidth(80)],key:"display_name"},{title:O.formatMessage(T.Z.numberRuleHits),transforms:[i.sortable,i.wrappable],key:"hits"},{title:O.formatMessage(T.Z.critical),transforms:[i.sortable,i.wrappable],key:"critical_hits"},{title:O.formatMessage(T.Z.important),transforms:[i.sortable,i.wrappable],key:"important_hits"},{title:O.formatMessage(T.Z.moderate),transforms:[i.sortable,i.wrappable],key:"moderate_hits"},{title:O.formatMessage(T.Z.low),transforms:[i.sortable,i.wrappable],key:"low_hits"},{title:O.formatMessage(T.Z.lastSeen),transforms:[i.sortable,i.wrappable],key:"updated"}];(0,z.JH)().register(K({},t((0,W.Vy)([].concat(a),s))))}}):"failed"===d&&c().createElement(u.Z,{message:O.formatMessage(T.Z.systemTableFetchError)})};$.propTypes={fetchSystems:y().func,systemsFetchStatus:y().string,systems:y().object,addNotification:y().func,filters:y().object,setFilters:y().func,selectedTags:y().array,workloads:y().object,SID:y().object};const Q=(0,V.Z)((0,H.connect)((function(e){var t=e.AdvisorStore;return{systems:t.systems,systemsFetchStatus:t.systemsFetchStatus,filters:t.filtersSystems,selectedTags:t.selectedTags,workloads:t.workloads,SID:t.SID}}),(function(e){return{fetchSystems:function(t){return e(n.lc(t))},addNotification:function(t){return e((0,Y.addNotification)(t))},setFilters:function(t){return e(n.aw(t))}}}))($))},86496:(e,t,s)=>{"use strict";var a=s(93379),r=s.n(a),n=s(8292),i=r()(n.default,{insert:"head",singleton:!1});if(!n.default.locals||e.hot.invalidate){var o=n.default.locals;e.hot.accept(8292,(t=>{n=s(8292),function(e,t,s){if(!e&&t||e&&!t)return!1;var a;for(a in e)if(e[a]!==t[a])return!1;for(a in t)if(!e[a])return!1;return!0}(o,n.default.locals)?(o=n.default.locals,i(n.default)):e.hot.invalidate()}))}e.hot.dispose((function(){i()})),n.default.locals},88777:(e,t,s)=>{"use strict";var a=s(93379),r=s.n(a),n=s(71467),i=r()(n.default,{insert:"head",singleton:!1});if(!n.default.locals||e.hot.invalidate){var o=n.default.locals;e.hot.accept(71467,(t=>{n=s(71467),function(e,t,s){if(!e&&t||e&&!t)return!1;var a;for(a in e)if(e[a]!==t[a])return!1;for(a in t)if(!e[a])return!1;return!0}(o,n.default.locals)?(o=n.default.locals,i(n.default)):e.hot.invalidate()}))}e.hot.dispose((function(){i()})),n.default.locals}}]);
//# sourceMappingURL=SystemsTable.7cd34f7577b66813350d.js.map