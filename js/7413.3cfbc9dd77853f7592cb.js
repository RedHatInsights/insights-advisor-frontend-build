(self.webpackChunkadvisor=self.webpackChunkadvisor||[]).push([[7413],{16712:(e,t,a)=>{"use strict";a.d(t,{Fs:()=>n,Q2:()=>l,ZP:()=>o});var r=a(40400);const n={name:"AnsibeTowerIcon",height:390,width:390,svgPath:"M402.6,214.7c0,103.9-84.2,188.1-188.1,188.1c-103.9,0-188.1-84.2-188.1-188.1  c0-103.9,84.2-188.1,188.1-188.1C318.4,26.6,402.6,110.8,402.6,214.7z M304.1,289.3l-74.9-180.2c-2.1-5.2-6.4-7.9-11.6-7.9c-5.2,0-9.8,2.8-11.9,7.9l-82.2,197.7h28.1l32.5-81.5  l97.1,78.4c3.9,3.2,6.7,4.6,10.4,4.6c7.3,0,13.7-5.5,13.7-13.4C305.4,293.6,305,291.5,304.1,289.3z M217.7,141.5l48.7,120.2  l-73.5-57.9L217.7,141.5z",yOffset:20,xOffset:20},l=(0,r.IU)(n),o=l},65550:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var r=a(85893),n=a(93264),l=a(35356),o=a(94184),i=a.n(o),s=function(){return s=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},s.apply(this,arguments)};function c(e){return"".concat(e,e>1||e<1?" Results":" Result")}const u=function(e){var t,a=e.isFooter,o=void 0!==a&&a,u=e.results,f=e.className,d=e.selected,m=e.children,p=e.ouiaId,b=e.ouiaSafe,y=void 0===b||b,g=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a}(e,["isFooter","results","className","selected","children","ouiaId","ouiaSafe"]),v=i()("ins-c-table__toolbar",((t={})["ins-m-footer"]=o,t),f),h="RHI/TableToolbar",k=(0,l.useOUIAId)(h,p,y);return(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)(l.Toolbar,s({className:v,"data-ouia-component-type":h,"data-ouia-component-id":k,"data-ouia-safe":y},g,{children:m})),(u&&u>=0||d&&d>=0)&&(0,r.jsxs)("div",s({className:"ins-c-table__toolbar-results"},{children:[u&&u>=0&&(0,r.jsxs)("span",s({className:"ins-c-table__toolbar-results-count"},{children:[" ",c(u)," "]})),d&&d>=0&&(0,r.jsxs)("span",s({className:"ins-c-table__toolbar-results-selected"},{children:[" ",d," Selected "]}))]}))]})}},58921:(e,t,a)=>{"use strict";a.d(t,{Z:()=>b});var r=a(4942),n=a(15861),l=a(87757),o=a.n(l),i=a(53446),s=a(35240),c=a(59303),u=a(71094),f=a(97109);function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){(0,r.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p=function(e){var t={date:(new Date).toISOString().replace(/[T:]/g,"-").split(".")[0]+"-utc"};return"Insights-Advisor_".concat(e,"--").concat(t.date)};const b=function(){var e=(0,n.Z)(o().mark((function e(t,a,r,n,l,d,b,y){var g,v,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g=(null==n?void 0:n.length)&&{tags:n},l&&(g=m(m({},g),(0,f.s0)(l,d))),b((0,i.addNotification)(c.LH.pending)),e.next=6,(0,u.dX)("".concat(c._n,"/export/").concat(t,".").concat("json"===a?"json":"csv"),{},m(m(m({},r),g),y&&{display_name:y})).then((function(e){return b((0,i.addNotification)(c.LH.success)),e})).catch((function(){return b((0,i.addNotification)(c.LH.error))}));case 6:v=e.sent.data,h="json"===a?JSON.stringify(v):v,(0,s.Sv)(h,p(t),a),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),"".concat(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a,r,n,l,o,i,s){return e.apply(this,arguments)}}()},44788:(e,t,a)=>{"use strict";a.d(t,{Z:()=>W});var r=a(4942),n=a(15861),l=a(70885),o=a(87757),i=a.n(o),s=a(93264),c=a.n(s),u=a(59303),f=a(47173),d=a(93149),m=a(83115),p=a(59775),b=a(80236),y=a(71094),g=a(45697),v=a.n(g),h=a(92607),k=a(71355),Z=a(30893),E=a(28216),O=a(86896),_=a(77647);function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){(0,r.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var x=function(e){var t=e.handleModalToggle,a=e.isModalOpen,r=e.host,o=e.hosts,g=e.rule,v=e.afterFn,P=(0,O.Z)(),x=(0,E.useDispatch)(),W=function(e){return x((0,k.addNotification)(e))},w=(0,s.useState)(""),M=(0,l.Z)(w,2),S=M[0],D=M[1],C=(0,s.useState)(void 0!==r||o.length>0),T=(0,l.Z)(C,2),A=T[0],I=T[1],F=(0,_.om)(),N=(0,l.Z)(F,1)[0],R=function(){var e=(0,n.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={systems:o,justification:S},e.prev=1,e.next=4,(0,y.SO)("".concat(u._n,"/rule/").concat(g.rule_id,"/ack_hosts/"),{},t);case 4:!A&&W({variant:"success",dismissable:!0,timeout:!0,title:P.formatMessage(Z.Z.recSuccessfullyDisabled)}),v&&v(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),W({variant:"danger",dismissable:!0,title:P.formatMessage(Z.Z.error),description:"".concat(e.t0)});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=(0,n.Z)(i().mark((function e(){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("enabled"!==g.rule_status||o.length){e.next=15;break}return a=A?{type:"HOST",options:{rule:g.rule_id,system_uuid:r.id,justification:S}}:{type:"RULE",options:j({rule_id:g.rule_id},S&&{justification:S})},e.prev=2,e.next=5,N(a).unwrap();case 5:W({variant:"success",timeout:!0,dismissable:!0,title:P.formatMessage(Z.Z.recSuccessfullyDisabled)}),D(""),v&&v(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),W({variant:"danger",dismissable:!0,title:P.formatMessage(Z.Z.error),description:"".concat(e.t0)});case 13:e.next=16;break;case 15:R();case 16:t(!1);case 17:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();return c().createElement(b.u,{variant:"small",title:P.formatMessage(Z.Z.disableRule),isOpen:a,onClose:function(){t(!1),D("")},actions:[c().createElement(f.zx,{key:"confirm",variant:"primary",onClick:function(){return V()},ouiaId:"confirm"},P.formatMessage(Z.Z.save)),c().createElement(f.zx,{key:"cancel",variant:"link",onClick:function(){t(!1),D("")},ouiaId:"cancel"},P.formatMessage(Z.Z.cancel))]},P.formatMessage(Z.Z.disableRuleBody),c().createElement(m.l,null,c().createElement(p.c,{fieldId:"blank-form"}),(void 0!==r||o.length>0)&&c().createElement(p.c,{fieldId:"disable-rule-one-system"},c().createElement(d.X,{isChecked:A,onChange:function(){I(!A)},label:o.length?P.formatMessage(Z.Z.disableRuleForSystems):P.formatMessage(Z.Z.disableRuleSingleSystem),id:"disable-rule-one-system",name:"disable-rule-one-system"})),c().createElement(p.c,{label:P.formatMessage(Z.Z.justificationNote),fieldId:"disable-rule-justification"},c().createElement(h.oi,{type:"text",id:"disable-rule-justification","aria-describedby":"disable-rule-justification",value:S,onChange:function(e){return D(e)},onKeyDown:function(e){return"Enter"===e.key&&(e.preventDefault(),V())}}))))};x.propTypes={isModalOpen:v().bool,host:v().object,handleModalToggle:v().func,rule:v().object,afterFn:v().func,hosts:v().array},x.defaultProps={isModalOpen:!1,handleModalToggle:function(){},system:void 0,rule:{},afterFn:function(){},host:void 0,hosts:[]};const W=x},95358:(e,t,a)=>{"use strict";a.d(t,{Z:()=>x});var r=a(15861),n=a(70885),l=a(87757),o=a.n(l),i=a(93264),s=a.n(i),c=a(3351),u=a(22860),f=a(6934),d=a(59303),m=a(47173),p=a(62410),b=a(71094),y=a(24561),g=a(80236),v=a(81039),h=a(45697),k=a.n(h),Z=a(30893),E=a(71355),O=a(28216),_=a(77647),P=a(86896),j=function(e){var t=e.handleModalToggle,a=e.isModalOpen,l=e.rule,h=e.afterFn,k=(0,P.Z)(),j=(0,O.useDispatch)(),x=[k.formatMessage(Z.Z.systemName),k.formatMessage(Z.Z.justificationNote),k.formatMessage(Z.Z.dateDisabled),""],W=(0,i.useState)([]),w=(0,n.Z)(W,2),M=w[0],S=w[1],D=(0,i.useState)(!1),C=(0,n.Z)(D,2),T=C[0],A=C[1],I=(0,_.u7)({rule_id:l.rule_id,limit:l.hosts_acked_count}),F=I.data,N=void 0===F?[]:F,R=I.isFetching,V=I.isLoading,L=I.refetch,z=function(){var e=(0,r.Z)(o().mark((function e(a){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,b.Sp)("".concat(d._n,"/hostack/").concat(a.id,"/"));case 3:L(),A(!0),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),t(!1),r={variant:"danger",dismissable:!0,title:k.formatMessage(Z.Z.error),description:"".concat(e.t0)},j((0,E.addNotification)(r));case 11:case"end":return e.stop()}var r}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){var e=null==N?void 0:N.map((function(e){return{cells:[e.display_name||e.system_uuid,e.justification||k.formatMessage(Z.Z.none),{title:s().createElement(p.Z,{date:new Date(e.updated_at),type:"onlyDate"})},{title:s().createElement(m.zx,{key:e.system_uuid,isInline:!0,variant:"link",onClick:function(){return z(e)}},s().createElement(v.ZP,{size:"sm"})," ".concat(k.formatMessage(Z.Z.enable)))}]}}));V||0!==N.length||(h(),t(!1)),S(e)}),[N]),s().createElement(g.u,{width:"75%",title:k.formatMessage(Z.Z.hostAckModalTitle),isOpen:a,onClose:function(){T&&h(),t(!1)}},R?s().createElement(c.i,{"aria-label":"host-ack-table",rows:[{cells:[{props:{colSpan:3},title:s().createElement(y.aV,null)}]}],cells:x},s().createElement(f.x,null),s().createElement(u.R,null)):s().createElement(c.i,{"aria-label":"host-ack-table",rows:M,cells:x},s().createElement(f.x,null),s().createElement(u.R,null)))};j.propTypes={isModalOpen:k().bool,handleModalToggle:k().func,rule:k().object,afterFn:k().func},j.defaultProps={isModalOpen:!1,handleModalToggle:function(){},rule:{},afterFn:function(){}};const x=j},82661:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>pe});var r=a(42982),n=a(4942),l=a(70885),o=a(59303),i=a(62012),s=a(44733),c=a(93264),u=a.n(c),f=a(3351),d=a(22860),m=a(6934),p=a(75863),b=a(1082),y=a(46818),g=a(7732),v=a(65550),h=a(97109),k=a(28216),Z=a(44788),E=a(2443),O=a(46891),_=a(7887),P=a(95358),j=a(40609),x=a(58921),W=a(30893),w=a(28672),M=a(75546),S=a(86896),D=a(43707),C=a(45697),T=a.n(C),A=a(15861),I=a(87757),F=a.n(I),N=a(47173),R=a(68778),V=a(44012),L=a(34702),z=function(e){var t=e.filters,a=e.toggleRulesDisabled,r=ie()[t.rule_status]||ie().default;return u().createElement(L.Z,{icon:R.ZP,iconClass:"ansibleCheck",title:r.title,text:r.body},"enabled"===t.rule_status&&u().createElement(N.zx,{variant:"link",style:{paddingTop:24},onClick:function(){return a("all")}},u().createElement(V.Z,{id:"rulestable.norulehits.adddisabledbutton"})))};z.propTypes={filters:T().object,toggleRulesDisabled:T().func};const H=z;var B=a(71094),G=a(71355),U=a(92397),K=a(49739),q=a(83826),J=a(68340),X=a(75824),Y=a(90693),Q=a(16712),$=a(34433),ee=a(62410),te=a(69979),ae=a(87516),re=a(52837),ne=a(28186);function le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?le(Object(a),!0).forEach((function(t){(0,n.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):le(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ie=function(){var e=u().createElement(V.Z,{id:"rulestable.norulehits.title"});return{enabled:{title:e,body:u().createElement(u().Fragment,null,u().createElement(J.x,null,u().createElement(V.Z,{id:"rulestable.norulehits.enabledrulesbody"})),u().createElement(J.x,null,u().createElement(V.Z,{id:"rulestable.norulehits.enabledrulesbodysecondline"})))},disabled:{title:e,body:u().createElement(u().Fragment,null,u().createElement(J.x,null,u().createElement(V.Z,{id:"rulestable.norules.disabledrulesbody"})),u().createElement(J.x,null,u().createElement(V.Z,{id:"rulestable.norules.disabledrulesbodysecondline"})))},rhdisabled:{title:e,body:u().createElement(J.x,null,u().createElement(V.Z,{id:"rulestable.norules.redhatdisabledrulesbody"}))},default:{title:e,body:u().createElement(J.x,null,u().createElement(V.Z,{id:"noRecommendations"}))}}},se=function(){var e=(0,A.Z)(F().mark((function e(t,a,r,n,l,i,s){var c,u;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=a[t].rule,u=function(e){return i((0,G.addNotification)(e))},e.prev=2,"enabled"!==c.rule_status){e.next=8;break}r(c),n(!0),e.next=18;break;case 8:return e.prev=8,e.next=11,(0,B.Sp)("".concat(o._n,"/ack/").concat(c.rule_id,"/"));case 11:u({variant:"success",timeout:!0,dismissable:!0,title:s.formatMessage(W.Z.recSuccessfullyEnabled)}),l(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),u({variant:"danger",dismissable:!0,title:s.formatMessage(W.Z.error),description:"".concat(e.t0)});case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(2),u({variant:"danger",dismissable:!0,title:"enabled"===c.rule_status?s.formatMessage(W.Z.rulesTableHideReportsErrorDisabled):s.formatMessage(W.Z.rulesTableHideReportsErrorEnabled),description:"".concat(e.t1)});case 23:case"end":return e.stop()}}),e,null,[[2,20],[8,15]])})));return function(t,a,r,n,l,o,i){return e.apply(this,arguments)}}(),ce=function(e,t,a,r){var n=oe(oe({},t),{},{offset:0});"text"===e&&r(""),delete n[e],a(n)},ue=function(e,t,a,r,l,i){var s=function(a,r){r.length>0?t(oe(oe({},e),{},{offset:0},(0,n.Z)({},a,r))):ce(a)};return[{label:i.formatMessage(W.Z.name).toLowerCase(),filterValues:{key:"text-filter",onChange:function(e,t){return r(t)},value:a,placeholder:i.formatMessage(W.Z.filterBy)}},{label:o.W2.total_risk.title,type:o.W2.total_risk.type,id:o.W2.total_risk.urlParam,value:"checkbox-".concat(o.W2.total_risk.urlParam),filterValues:{key:"".concat(o.W2.total_risk.urlParam,"-filter"),onChange:function(e,t){return s(o.W2.total_risk.urlParam,t)},value:e.total_risk,items:o.W2.total_risk.values}},{label:o.W2.res_risk.title,type:o.W2.res_risk.type,id:o.W2.res_risk.urlParam,value:"checkbox-".concat(o.W2.res_risk.urlParam),filterValues:{key:"".concat(o.W2.res_risk.urlParam,"-filter"),onChange:function(e,t){return s(o.W2.res_risk.urlParam,t)},value:e.res_risk,items:o.W2.res_risk.values}},{label:o.W2.impact.title,type:o.W2.impact.type,id:o.W2.impact.urlParam,value:"checkbox-".concat(o.W2.impact.urlParam),filterValues:{key:"".concat(o.W2.impact.urlParam,"-filter"),onChange:function(e,t){return s(o.W2.impact.urlParam,t)},value:e.impact,items:o.W2.impact.values}},{label:o.W2.likelihood.title,type:o.W2.likelihood.type,id:o.W2.likelihood.urlParam,value:"checkbox-".concat(o.W2.likelihood.urlParam),filterValues:{key:"".concat(o.W2.likelihood.urlParam,"-filter"),onChange:function(e,t){return s(o.W2.likelihood.urlParam,t)},value:e.likelihood,items:o.W2.likelihood.values}},{label:o.W2.category.title,type:o.W2.category.type,id:o.W2.category.urlParam,value:"checkbox-".concat(o.W2.category.urlParam),filterValues:{key:"".concat(o.W2.category.urlParam,"-filter"),onChange:function(e,t){return s(o.W2.category.urlParam,t)},value:e.category,items:o.W2.category.values}},{label:o.W2.incident.title,type:o.W2.incident.type,id:o.W2.incident.urlParam,value:"checkbox-".concat(o.W2.incident.urlParam),filterValues:{key:"".concat(o.W2.incident.urlParam,"-filter"),onChange:function(e,t){return s(o.W2.incident.urlParam,t)},value:e.incident,items:o.W2.incident.values}},{label:o.W2.has_playbook.title,type:o.W2.has_playbook.type,id:o.W2.has_playbook.urlParam,value:"checkbox-".concat(o.W2.has_playbook.urlParam),filterValues:{key:"".concat(o.W2.has_playbook.urlParam,"-filter"),onChange:function(e,t){return s(o.W2.has_playbook.urlParam,t)},value:e.has_playbook,items:o.W2.has_playbook.values}},{label:o.W2.reboot.title,type:o.W2.reboot.type,id:o.W2.reboot.urlParam,value:"checkbox-".concat(o.W2.reboot.urlParam),filterValues:{key:"".concat(o.W2.reboot.urlParam,"-filter"),onChange:function(e,t){return s(o.W2.reboot.urlParam,t)},value:e.reboot,items:o.W2.reboot.values}},{label:o.W2.rule_status.title,type:o.W2.rule_status.type,id:o.W2.rule_status.urlParam,value:"radio-".concat(o.W2.rule_status.urlParam),filterValues:{key:"".concat(o.W2.rule_status.urlParam,"-filter"),onChange:function(e,t){return l(t)},value:"".concat(e.rule_status),items:o.W2.rule_status.values}},{label:o.W2.impacting.title,type:o.W2.impacting.type,id:o.W2.impacting.urlParam,value:"checkbox-".concat(o.W2.impacting.urlParam),filterValues:{key:"".concat(o.W2.impacting.urlParam,"-filter"),onChange:function(e,t){return s(o.W2.impacting.urlParam,t)},value:e.impacting,items:o.W2.impacting.values}}]};function fe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function de(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(a),!0).forEach((function(t){(0,n.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var me=function(e){var t,a,C=e.isTabActive,T=(0,S.Z)(),A=(0,k.useDispatch)(),I=(0,i.useLocation)().search,F=(0,D.TE)("advisor",o.Gd.export).hasAccess,R=(0,D.TE)("advisor",o.Gd.disableRec).hasAccess,V=(0,c.useState)([{title:T.formatMessage(W.Z.name),transforms:[g.p,(0,b.d)(40)]},{title:T.formatMessage(W.Z.modified),transforms:[g.p,y.E0]},{title:T.formatMessage(W.Z.category),transforms:[g.p,y.E0]},{title:T.formatMessage(W.Z.totalRisk),transforms:[g.p,y.E0]},{title:T.formatMessage(W.Z.systems),transforms:[g.p,y.E0]},{title:T.formatMessage(W.Z.remediation),transforms:[g.p,y.E0]}]),L=(0,l.Z)(V,1)[0],z=(0,k.useSelector)((function(e){return e.filters.selectedTags})),B=(0,k.useSelector)((function(e){return e.filters.workloads})),G=(0,k.useSelector)((function(e){return e.filters.SID})),J=(0,k.useSelector)((function(e){return e.filters.recState})),le=(0,c.useState)([]),ie=(0,l.Z)(le,2),fe=ie[0],me=ie[1],pe=(0,c.useState)({}),be=(0,l.Z)(pe,2),ye=be[0],ge=be[1],ve=(0,c.useState)(!0),he=(0,l.Z)(ve,2),ke=he[0],Ze=he[1],Ee=(0,c.useState)((null==J?void 0:J.text)||""),Oe=(0,l.Z)(Ee,2),_e=Oe[0],Pe=Oe[1],je=(0,c.useState)(!1),xe=(0,l.Z)(je,2),We=xe[0],we=xe[1],Me=(0,c.useState)({}),Se=(0,l.Z)(Me,2),De=Se[0],Ce=Se[1],Te=(0,c.useState)(!1),Ae=(0,l.Z)(Te,2),Ie=Ae[0],Fe=Ae[1],Ne=(0,c.useState)({}),Re=(0,l.Z)(Ne,2),Ve=Re[0],Le=Re[1],ze=(0,c.useState)(!1),He=(0,l.Z)(ze,2),Be=He[0],Ge=He[1],Ue=function(e){return A((0,w.hb)(e))},Ke={};(null==z?void 0:z.length)&&(Ke=de(de({},Ke),{tags:z.join(",")})),B&&(Ke=de(de({},Ke),(0,h.s0)(B,G)));var qe=(0,M.Bs)(de(de({},(0,h.qW)(J)),Ke)),Je=qe.data,Xe=void 0===Je?[]:Je,Ye=qe.isFetching,Qe=qe.isLoading,$e=qe.isError,et=qe.refetch,tt=(0,j.Z)(_e,o.$x),at=(null==Xe||null===(t=Xe.meta)||void 0===t?void 0:t.count)||0,rt={1:"description",2:"publish_date",3:"category",4:"total_risk",5:"impacted_count",6:"playbook_count"};(0,c.useEffect)((function(){ke||null===z||(0,h.Y4)(J,z)}),[J,z,B,G]);var nt=function(e){var t=e*J.limit-J.limit;Ue(de(de({},J),{},{offset:t}))},lt=function(e){Ue(de(de({},J),{},{rule_status:e,offset:0},"enabled"!==e&&{impacting:["false"]}))};(0,c.useEffect)((function(){C&&I&&ke&&function(e,t,a,r){var n=Object.values(e),l=(0,h.yG)();delete l.tags,Array.isArray(l.sort)?null!=n&&n.includes(l.sort[0])&&null!=n&&n.includes("-".concat(l.sort[0]))||(l.sort="-total_risk"):null!=n&&n.includes(l.sort)||(l.sort="-total_risk"),void 0===l.text?t(""):t(l.text),void 0!==l.has_playbook&&!Array.isArray(l.has_playbook)&&(l.has_playbook=["".concat(l.has_playbook)]),void 0!==l.incident&&!Array.isArray(l.incident)&&(l.incident=["".concat(l.incident)]),void 0===l.offset?l.offset=0:l.offset=Number(l.offset[0]),void 0===l.limit?l.limit=20:l.limit=Number(l.limit[0]),void 0!==l.reboot&&!Array.isArray(l.reboot)&&(l.reboot=["".concat(l.reboot)]),void 0!==l.impacting&&!Array.isArray(l.impacting)&&(l.impacting=["".concat(l.impacting)]),a(oe(oe({},r),l))}(rt,Pe,Ue,J),Ze(!1)}),[]),(0,c.useEffect)((function(){var e,t=null===(e=Object.entries(rt))||void 0===e?void 0:e.find((function(e){return e[1]===J.sort||"-".concat(e[1])===J.sort}));if(void 0!==J.sort&&t){var a="-"===J.sort[0]?"desc":"asc";ge({index:Number(t[0]),direction:a})}}),[J.sort]),(0,c.useEffect)((function(){if(Xe.data)if(0===Xe.data.length)me(function(e,t){return[{cells:[{title:u().createElement(H,{filters:e,toggleRulesDisabled:t}),props:{colSpan:6}}]}]}(J,lt));else{var e=function(e,t,a,r,n){return e.data.flatMap((function(e,l){return[{isOpen:t,rule:e,cells:[{title:u().createElement("span",{key:l},u().createElement(U.Z,{key:l,to:"/recommendations/".concat(e.rule_id)}," ",e.description," "),u().createElement(ae.Z,{rule:e,isCompact:!0}))},{title:u().createElement(ee.Z,{key:l,date:e.publish_date,variant:"relative"})},{title:u().createElement(re.Z,{key:l,labelList:[e.category],isCompact:!0})},{title:u().createElement("div",{key:l},u().createElement(X.u,{key:l,position:X.D.bottom,content:u().createElement(u().Fragment,null,"The total risk of this remediation is",u().createElement("strong",null," ",o.Nq[e.total_risk]),", based on the combination of likelihood and impact to remediate.")},u().createElement(Y.Z,{value:e.total_risk,isCompact:!0})))},{title:"rhdisabled"===e.rule_status?u().createElement(X.u,{content:n.formatMessage(W.Z.byEnabling,{systems:e.impacted_systems_count})},u().createElement("span",null,n.formatMessage(W.Z.nA))):u().createElement("div",{key:l},"".concat(e.impacted_systems_count.toLocaleString()))},{title:u().createElement("div",{className:"ins-c-center-text ",key:l},e.playbook_count?u().createElement("span",null,u().createElement(Q.ZP,{size:"sm"})," ",n.formatMessage(W.Z.playbook)):n.formatMessage(W.Z.manual))}]},{parent:2*l,fullWidth:!0,cells:[{title:u().createElement("section",{className:"pf-c-page__main-section pf-m-light"},u().createElement(K.K,{hasGutter:!0},e.hosts_acked_count?u().createElement(q.v,null,u().createElement($.ZP,{size:"sm"})," ",e.hosts_acked_count&&!e.impacted_systems_count?n.formatMessage(W.Z.ruleIsDisabledForAllSystems):n.formatMessage(W.Z.ruleIsDisabledForSystemsBody,{systems:e.hosts_acked_count})," "," ",u().createElement(N.zx,{isInline:!0,variant:"link",ouiaId:"viewSystem",onClick:function(){a(e),r(!0)}},n.formatMessage(W.Z.viewSystems))):u().createElement(u().Fragment,null),u().createElement(te.Ii,{messages:(0,ne.k5)(n,te.TO,(0,ne.jL)(n,e)),product:te.D1.rhel,rule:e,resolutionRisk:(0,h.EW)(e),resolutionRiskDesc:o.wY[(0,h.EW)(e)],isDetailsPage:!1,showViewAffected:!0,ViewAffectedLink:u().createElement(U.Z,{to:"/recommendations/".concat(e.rule_id)},0===e.impacted_systems_count?"":n.formatMessage(W.Z.viewAffectedSystems,{systems:e.impacted_systems_count})),knowledgebaseUrl:e.node_id?"https://access.redhat.com/node/".concat(e.node_id):""})))}]}]}))}(Xe,Be,Le,Fe,T);me(e)}}),[Xe]),(0,c.useEffect)((function(){if(!ke&&!Qe){var e=de({},J),t=_e.length?{text:_e}:{};delete e.text,Ue(de(de(de({},e),t),{},{offset:0}))}}),[tt]);var ot,it={deleteTitle:T.formatMessage(W.Z.resetFilters),filters:(ot=de({},J),delete ot.topic,delete ot.sort,delete ot.offset,delete ot.limit,(0,h.yK)(ot,o.W2)),showDeleteButton:!0,onDelete:function(e,t,a){a?(Pe(""),Ue(de(de({},J.topic&&{topic:J.topic}),{},{impacting:["true"],rule_status:"enabled",limit:J.limit,offset:J.offset,pathway:J.pathway}))):t.map((function(e){var t=(0,n.Z)({},e.urlParam,Array.isArray(J[e.urlParam])?J[e.urlParam].filter((function(t){return String(t)!==String(e.chips[0].value)})):"");t[e.urlParam].length>0?Ue(de(de({},J),t)):ce(e.urlParam,J,Ue,Pe)}))}};return u().createElement(u().Fragment,null,Ie&&u().createElement(P.Z,{handleModalToggle:function(e){return Fe(e)},isModalOpen:Ie,afterFn:et,rule:Ve}),We&&u().createElement(Z.Z,{handleModalToggle:we,isModalOpen:We,rule:De,afterFn:et}),u().createElement(_.Z,{expandAll:{isAllExpanded:Be,onClick:function(e,t){var a=(0,r.Z)(fe);Ge(t),a.map((function(e,r){Object.prototype.hasOwnProperty.call(e,"isOpen")&&(a[r]=de(de({},e),{},{isOpen:t}))})),me(a)}},pagination:{itemCount:at,page:J.offset/J.limit+1,perPage:Number(J.limit),onSetPage:function(e,t){nt(t)},onPerPageSelect:function(e,t){Ue(de(de({},J),{},{limit:t,offset:0}))},isCompact:!0},exportConfig:(a={label:T.formatMessage(W.Z.exportCsv)},(0,n.Z)(a,"label",T.formatMessage(W.Z.exportJson)),(0,n.Z)(a,"onSelect",(function(e,t){return(0,x.Z)("hits",t,J,z,B,G,A)})),(0,n.Z)(a,"isDisabled",!F),(0,n.Z)(a,"tooltipText",F?T.formatMessage(W.Z.exportData):T.formatMessage(W.Z.permsAction)),a),filterConfig:{items:ue(J,Ue,_e,Pe,lt,T)},activeFiltersConfig:it}),Ye?u().createElement(O.Z,null):$e?u().createElement(f.i,null,u().createElement(E.Z,null)):u().createElement(f.i,{"aria-label":"rule-table",variant:p.B.compact,actionResolver:function(e,t){var a=t.rowIndex,r=fe[a].rule?fe[a].rule:null;return a%2==0&&r?r&&"enabled"===r.rule_status?[{title:T.formatMessage(W.Z.disableRule),onClick:function(e,t){return se(t,fe,Ce,we,et,A,T)}}]:[{title:T.formatMessage(W.Z.enableRule),onClick:function(e,t){return se(t,fe,Ce,we,et,A,T)}}]:null},onCollapse:function(e,t,a){var n=(0,r.Z)(fe);n[t]=de(de({},n[t]),{},{isOpen:a}),me(n)},sortBy:ye,onSort:function(e,t,a){var r="".concat("asc"===a?"":"-").concat(rt[t]);ge({index:t,direction:a}),Ue(de(de({},J),{},{sort:r,offset:0}))},cells:L,rows:fe,areActionsDisabled:function(){return!R},isStickyHeader:!0,expandId:"expand-button"},u().createElement(m.x,null),u().createElement(d.R,{className:"pf-m-width-100"})),u().createElement(v.Z,{isFooter:!0},u().createElement(s.t,{ouiaId:"page",itemCount:at,page:J.offset/J.limit+1,perPage:Number(J.limit),onSetPage:function(e,t){nt(t)},onPerPageSelect:function(e,t){Ue(de(de({},J),{},{limit:t,offset:0}))},widgetId:"pagination-options-menu-bottom",variant:s.a.bottom})))};me.propTypes={isTabActive:T().bool};const pe=me},40609:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var r=a(70885),n=a(93264);const l=function(e,t){var a=(0,n.useState)(e),l=(0,r.Z)(a,2),o=l[0],i=l[1];return(0,n.useEffect)((function(){var a=setTimeout((function(){i(e)}),t);return function(){clearTimeout(a)}}),[t,e]),o}},70347:()=>{},28992:()=>{},30187:()=>{},90479:()=>{},78752:()=>{},21626:()=>{},25238:()=>{},93398:()=>{},46928:()=>{},91993:()=>{},54994:()=>{},44690:()=>{},37494:()=>{},67761:()=>{},53519:()=>{},11177:()=>{},22868:()=>{},14777:()=>{},99830:()=>{},70209:()=>{},87414:()=>{}}]);
//# sourceMappingURL=../sourcemaps/7413.6707edf2814c4309021e8febe6a8d969.js.map