(self.webpackChunkadvisor_frontend=self.webpackChunkadvisor_frontend||[]).push([[3767],{66584:(e,t,a)=>{"use strict";a.d(t,{Z:()=>y});var r=a(63732),l=a(15914),n=a(42293),i=a(26407),o=a(99332),s=a(69507),c=a(45697),u=a.n(c),m=a(93264),f=a.n(m),d=a(30893),p=a(86896),b=function(e){var t,a=e.labelList,c=(0,p.Z)(),u=(t=a.map((function(e){return e.id})),Object.entries(t.reduce((function(e,t){return e[t]=(e[t]||0)+1,e}),{})).sort((function(e,t){return t[1]-e[1]}))),m=function(e,t){return f().createElement(n.Label,{icon:e,variant:"outline",color:"blue"},t)};return f().createElement(i.e,{numLabels:1},u.map((function(e){return function(e){return 1===e?m(f().createElement(r.ZP,null),c.formatMessage(d.Z.availability)):2===e?m(f().createElement(o.ZP,null),c.formatMessage(d.Z.security)):3===e?m(f().createElement(l.ZP,null),c.formatMessage(d.Z.stability)):4===e?m(f().createElement(s.ZP,null),c.formatMessage(d.Z.performance)):void 0}(Number(e[0]))})))};b.propTypes={labelList:u().array};const y=b},82661:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ee});var r=a(15861),l=a(42982),n=a(4942),i=a(70885),o=a(87757),s=a.n(o),c=a(59303),u=a(75662),m=a(13877),f=a(93264),d=a.n(f),p=a(88292),b=a(27577),y=a(76004),g=a(97109),v=a(28216),k=a(61829),h=a(84785),Z=a(6202),W=a(66584),E=a(62410),_=a(71094),P=a(44788),x=a(76341),M=a(6497),S=a(46891),C=a(14748),O=a(7887),T=a(87533),w=a(87516),A=a(95358),D=a(71355),j=a(40609),R=a(58921),F=a(30893),V=a(28186),I=a(28672),L=a(75546),N=a(86896),B=a(43707),G=a(84669),H=a(45697),q=a.n(H),z=a(70251),Y=a(44012),J=a(34702),K=function(e){var t=e.filters,a=e.toggleRulesDisabled,r=Q()[t.rule_status]||Q().default;return d().createElement(J.Z,{icon:z.CheckCircleIcon,iconClass:"ansibleCheck",title:r.title,text:r.body},"enabled"===t.rule_status&&d().createElement(G.Button,{variant:"link",style:{paddingTop:24},onClick:function(){return a("all")}},d().createElement(Y.Z,{id:"rulestable.norulehits.adddisabledbutton"})))};K.propTypes={filters:q().object,toggleRulesDisabled:q().func};const $=K;var Q=function(){var e=d().createElement(Y.Z,{id:"rulestable.norulehits.title"});return{enabled:{title:e,body:d().createElement(d().Fragment,null,d().createElement(G.Text,null,d().createElement(Y.Z,{id:"rulestable.norulehits.enabledrulesbody"})),d().createElement(G.Text,null,d().createElement(Y.Z,{id:"rulestable.norulehits.enabledrulesbodysecondline"})))},disabled:{title:e,body:d().createElement(d().Fragment,null,d().createElement(G.Text,null,d().createElement(Y.Z,{id:"rulestable.norules.disabledrulesbody"})),d().createElement(G.Text,null,d().createElement(Y.Z,{id:"rulestable.norules.disabledrulesbodysecondline"})))},rhdisabled:{title:e,body:d().createElement(G.Text,null,d().createElement(Y.Z,{id:"rulestable.norules.redhatdisabledrulesbody"}))},default:{title:e,body:d().createElement(G.Text,null,d().createElement(Y.Z,{id:"noRecommendations"}))}}};function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function X(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(Object(a),!0).forEach((function(t){(0,n.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const ee=function(){var e,t,a=(0,N.Z)(),o=(0,v.useDispatch)(),G=(0,u.useLocation)().search,H=(0,B.T)("advisor",c.Gd.export).hasAccess,q=(0,B.T)("advisor",c.Gd.disableRec).hasAccess,z=(0,f.useState)([{title:a.formatMessage(F.Z.name),transforms:[b.sortable,(0,b.cellWidth)(40)]},{title:a.formatMessage(F.Z.modified),transforms:[b.sortable,(0,b.cellWidth)(10)]},{title:a.formatMessage(F.Z.category),transforms:[b.sortable,(0,b.cellWidth)(10)]},{title:a.formatMessage(F.Z.totalRisk),transforms:[b.sortable,(0,b.cellWidth)(15)]},{title:a.formatMessage(F.Z.riskofchange),transforms:[b.sortable,(0,b.cellWidth)(15)]},{title:a.formatMessage(F.Z.systems),transforms:[b.sortable,(0,b.cellWidth)(15)]},{title:a.formatMessage(F.Z.remediation),transforms:[b.sortable,(0,b.cellWidth)(15),b.fitContent]}]),Y=(0,i.Z)(z,1)[0],J=(0,v.useSelector)((function(e){return e.filters.selectedTags})),K=(0,v.useSelector)((function(e){return e.filters.workloads})),Q=(0,v.useSelector)((function(e){return e.filters.SID})),U=(0,v.useSelector)((function(e){return e.filters.recState})),ee=(0,f.useState)([]),te=(0,i.Z)(ee,2),ae=te[0],re=te[1],le=(0,f.useState)({}),ne=(0,i.Z)(le,2),ie=ne[0],oe=ne[1],se=(0,f.useState)(!0),ce=(0,i.Z)(se,2),ue=ce[0],me=ce[1],fe=(0,f.useState)((null==U?void 0:U.text)||""),de=(0,i.Z)(fe,2),pe=de[0],be=de[1],ye=(0,f.useState)(!1),ge=(0,i.Z)(ye,2),ve=ge[0],ke=ge[1],he=(0,f.useState)({}),Ze=(0,i.Z)(he,2),We=Ze[0],Ee=Ze[1],_e=(0,f.useState)(!1),Pe=(0,i.Z)(_e,2),xe=Pe[0],Me=Pe[1],Se=(0,f.useState)({}),Ce=(0,i.Z)(Se,2),Oe=Ce[0],Te=Ce[1],we=(0,f.useState)(!1),Ae=(0,i.Z)(we,2),De=Ae[0],je=Ae[1],Re=function(e){return o((0,D.wN)(e))},Fe=function(e){return o((0,I.hb)(e))},Ve={};(null==J?void 0:J.length)&&(Ve=X(X({},Ve),{tags:J.join(",")})),K&&(Ve=X(X({},Ve),(0,g.s0)(K,Q)));var Ie=(0,L.Bs)(X(X({},(0,g.qW)(U)),Ve)),Le=Ie.data,Ne=void 0===Le?[]:Le,Be=Ie.isFetching,Ge=Ie.isLoading,He=Ie.isError,qe=Ie.refetch,ze=(0,j.Z)(pe,c.$x),Ye=(null==Ne||null===(e=Ne.meta)||void 0===e?void 0:e.count)||0,Je={1:"description",2:"publish_date",3:"category",4:"total_risk",5:"resolution_risk",6:"impacted_count",7:"playbook_count"},Ke=function(e){var t=e.resolution_set.find((function(e){return e.system_type===c.CO.rhel||c.CO.ocp}));return t?t.resolution_risk.risk:void 0};(0,f.useEffect)((function(){ue||null===J||(0,g.Y4)(U,J)}),[U,J,K,Q]);var $e=function(e){var t=e*U.limit-U.limit;Fe(X(X({},U),{},{offset:t}))},Qe=function(e){Fe(X(X({},U),{},{rule_status:e,offset:0},"enabled"!==e&&{impacting:["false"]}))},Ue=function(){var e=(0,r.Z)(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ae[t].rule,e.prev=1,"enabled"!==r.rule_status){e.next=7;break}Ee(r),ke(!0),e.next=17;break;case 7:return e.prev=7,e.next=10,(0,_.Sp)("".concat(c._n,"/ack/").concat(r.rule_id,"/"));case 10:Re({variant:"success",timeout:!0,dismissable:!0,title:a.formatMessage(F.Z.recSuccessfullyEnabled)}),qe(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),Re({variant:"danger",dismissable:!0,title:a.formatMessage(F.Z.error),description:"".concat(e.t0)});case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(1),Re({variant:"danger",dismissable:!0,title:"enabled"===r.rule_status?a.formatMessage(F.Z.rulesTableHideReportsErrorDisabled):a.formatMessage(F.Z.rulesTableHideReportsErrorEnabled),description:"".concat(e.t1)});case 22:case"end":return e.stop()}}),e,null,[[1,19],[7,14]])})));return function(t){return e.apply(this,arguments)}}();(0,f.useEffect)((function(){if(G&&ue){var e=(0,g.yG)();delete e.tags,void 0===e.text?be(""):be(e.text),e.sort=void 0===e.sort?"-total_risk":e.sort[0],void 0!==e.has_playbook&&!Array.isArray(e.has_playbook)&&(e.has_playbook=["".concat(e.has_playbook)]),void 0!==e.incident&&!Array.isArray(e.incident)&&(e.incident=["".concat(e.incident)]),void 0===e.offset?e.offset=0:e.offset=Number(e.offset[0]),void 0===e.limit?e.limit=20:e.limit=Number(e.limit[0]),void 0!==e.reboot&&!Array.isArray(e.reboot)&&(e.reboot=["".concat(e.reboot)]),void 0!==e.impacting&&!Array.isArray(e.impacting)&&(e.impacting=["".concat(e.impacting)]),Fe(X(X({},U),e))}me(!1)}),[]),(0,f.useEffect)((function(){var e,t=null===(e=Object.entries(Je))||void 0===e?void 0:e.find((function(e){return e[1]===U.sort||"-".concat(e[1])===U.sort}));if(void 0!==U.sort&&t){var a="-"===U.sort[0]?"desc":"asc";oe({index:Number(t[0]),direction:a})}}),[U.sort]),(0,f.useEffect)((function(){if(Ne.data)if(0===Ne.data.length)re(function(e,t){return[{cells:[{title:d().createElement($,{filters:e,toggleRulesDisabled:t}),props:{colSpan:6}}]}]}(U,Qe));else{var e=Ne.data.flatMap((function(e,t){return[{isOpen:De,rule:e,cells:[{title:d().createElement("span",{key:t},d().createElement(u.Link,{key:t,to:"/recommendations/".concat(e.rule_id)}," ",e.description," "),d().createElement(w.Z,{rule:e}))},{title:d().createElement(E.Z,{key:t,date:e.publish_date,variant:"relative"})},{title:d().createElement(W.Z,{key:t,labelList:[e.category]})},{title:d().createElement("div",{key:t},d().createElement(y.Tooltip,{key:t,position:y.TooltipPosition.bottom,content:a.formatMessage(F.Z.rulesDetailsTotalriskBody,{risk:c.Nq[e.total_risk]||a.formatMessage(F.Z.undefined),strong:function(e){return(0,V.f)(e)}})},d().createElement(M.Z,{value:e.total_risk})))},{title:d().createElement("div",{key:t},d().createElement(M.Z,{text:c.MS[Ke(e)],value:Ke(e),hideIcon:!0}),d().createElement("div",null))},{title:"rhdisabled"===e.rule_status?d().createElement(y.Tooltip,{content:a.formatMessage(F.Z.byEnabling,{systems:e.impacted_systems_count})},d().createElement("span",null,a.formatMessage(F.Z.nA))):d().createElement("div",{key:t},"".concat(e.impacted_systems_count.toLocaleString()))},{title:d().createElement("div",{className:"ins-c-center-text ",key:t},e.playbook_count?d().createElement("span",null,d().createElement(k.ZP,{size:"sm"})," ",a.formatMessage(F.Z.playbook)):a.formatMessage(F.Z.manual))}]},{parent:2*t,fullWidth:!0,cells:[{title:d().createElement(C.Z,{className:"pf-m-light"},d().createElement(p.Stack,{hasGutter:!0},e.hosts_acked_count?d().createElement(p.StackItem,null,d().createElement(h.ZP,{size:"sm"})," ",e.hosts_acked_count&&!e.impacted_systems_count?a.formatMessage(F.Z.ruleIsDisabledForAllSystems):a.formatMessage(F.Z.ruleIsDisabledForSystemsBody,{systems:e.hosts_acked_count})," "," ",d().createElement(Z.Button,{isInline:!0,variant:"link",ouiaId:"viewSystem",onClick:function(){Te(e),Me(!0)}},a.formatMessage(F.Z.viewSystems))):d().createElement(d().Fragment,null),d().createElement(T.Z,{rule:e,resolutionRisk:Ke(e),riskOfChangeDesc:c.wY[Ke(e)]})))}]}]}));re(e)}}),[Ne]),(0,f.useEffect)((function(){if(!ue&&!Ge){var e=X({},U),t=pe.length?{text:pe}:{};delete e.text,Fe(X(X(X({},e),t),{},{offset:0}))}}),[ze]);var Xe,et=function(e){var t=X(X({},U),{},{offset:0});"text"===e&&be(""),delete t[e],Fe(t)},tt=function(e,t){t.length>0?Fe(X(X({},U),{},{offset:0},(0,n.Z)({},e,t))):et(e)},at=[{label:a.formatMessage(F.Z.name).toLowerCase(),filterValues:{key:"text-filter",onChange:function(e,t){return be(t)},value:pe,placeholder:a.formatMessage(F.Z.filterBy)}},{label:c.W2.total_risk.title,type:c.W2.total_risk.type,id:c.W2.total_risk.urlParam,value:"checkbox-".concat(c.W2.total_risk.urlParam),filterValues:{key:"".concat(c.W2.total_risk.urlParam,"-filter"),onChange:function(e,t){return tt(c.W2.total_risk.urlParam,t)},value:U.total_risk,items:c.W2.total_risk.values}},{label:c.W2.res_risk.title,type:c.W2.res_risk.type,id:c.W2.res_risk.urlParam,value:"checkbox-".concat(c.W2.res_risk.urlParam),filterValues:{key:"".concat(c.W2.res_risk.urlParam,"-filter"),onChange:function(e,t){return tt(c.W2.res_risk.urlParam,t)},value:U.res_risk,items:c.W2.res_risk.values}},{label:c.W2.impact.title,type:c.W2.impact.type,id:c.W2.impact.urlParam,value:"checkbox-".concat(c.W2.impact.urlParam),filterValues:{key:"".concat(c.W2.impact.urlParam,"-filter"),onChange:function(e,t){return tt(c.W2.impact.urlParam,t)},value:U.impact,items:c.W2.impact.values}},{label:c.W2.likelihood.title,type:c.W2.likelihood.type,id:c.W2.likelihood.urlParam,value:"checkbox-".concat(c.W2.likelihood.urlParam),filterValues:{key:"".concat(c.W2.likelihood.urlParam,"-filter"),onChange:function(e,t){return tt(c.W2.likelihood.urlParam,t)},value:U.likelihood,items:c.W2.likelihood.values}},{label:c.W2.category.title,type:c.W2.category.type,id:c.W2.category.urlParam,value:"checkbox-".concat(c.W2.category.urlParam),filterValues:{key:"".concat(c.W2.category.urlParam,"-filter"),onChange:function(e,t){return tt(c.W2.category.urlParam,t)},value:U.category,items:c.W2.category.values}},{label:c.W2.incident.title,type:c.W2.incident.type,id:c.W2.incident.urlParam,value:"checkbox-".concat(c.W2.incident.urlParam),filterValues:{key:"".concat(c.W2.incident.urlParam,"-filter"),onChange:function(e,t){return tt(c.W2.incident.urlParam,t)},value:U.incident,items:c.W2.incident.values}},{label:c.W2.has_playbook.title,type:c.W2.has_playbook.type,id:c.W2.has_playbook.urlParam,value:"checkbox-".concat(c.W2.has_playbook.urlParam),filterValues:{key:"".concat(c.W2.has_playbook.urlParam,"-filter"),onChange:function(e,t){return tt(c.W2.has_playbook.urlParam,t)},value:U.has_playbook,items:c.W2.has_playbook.values}},{label:c.W2.reboot.title,type:c.W2.reboot.type,id:c.W2.reboot.urlParam,value:"checkbox-".concat(c.W2.reboot.urlParam),filterValues:{key:"".concat(c.W2.reboot.urlParam,"-filter"),onChange:function(e,t){return tt(c.W2.reboot.urlParam,t)},value:U.reboot,items:c.W2.reboot.values}},{label:c.W2.rule_status.title,type:c.W2.rule_status.type,id:c.W2.rule_status.urlParam,value:"radio-".concat(c.W2.rule_status.urlParam),filterValues:{key:"".concat(c.W2.rule_status.urlParam,"-filter"),onChange:function(e,t){return Qe(t)},value:"".concat(U.rule_status),items:c.W2.rule_status.values}},{label:c.W2.impacting.title,type:c.W2.impacting.type,id:c.W2.impacting.urlParam,value:"checkbox-".concat(c.W2.impacting.urlParam),filterValues:{key:"".concat(c.W2.impacting.urlParam,"-filter"),onChange:function(e,t){return tt(c.W2.impacting.urlParam,t)},value:U.impacting,items:c.W2.impacting.values}}],rt={deleteTitle:a.formatMessage(F.Z.resetFilters),filters:(Xe=X({},U),delete Xe.topic,delete Xe.sort,delete Xe.offset,delete Xe.limit,(0,g.yK)(Xe,c.W2)),onDelete:function(e,t,a){a?(be(""),Fe(X(X({},U.topic&&{topic:U.topic}),{},{impacting:["true"],rule_status:"enabled",limit:U.limit,offset:U.offset}))):t.map((function(e){var t=(0,n.Z)({},e.urlParam,Array.isArray(U[e.urlParam])?U[e.urlParam].filter((function(t){return String(t)!==String(e.chips[0].value)})):"");t[e.urlParam].length>0?Fe(X(X({},U),t)):et(e.urlParam)}))}};return d().createElement(d().Fragment,null,xe&&d().createElement(A.Z,{handleModalToggle:function(e){return Me(e)},isModalOpen:xe,afterFn:function(){qe()},rule:Oe}),ve&&d().createElement(P.Z,{handleModalToggle:ke,isModalOpen:ve,rule:We,afterFn:qe}),d().createElement(O.Z,{expandAll:{isAllExpanded:De,onClick:function(e,t){var a=(0,l.Z)(ae);je(t),a.map((function(e,r){Object.prototype.hasOwnProperty.call(e,"isOpen")&&(a[r]=X(X({},e),{},{isOpen:t}))})),re(a)}},pagination:{itemCount:Ye,page:U.offset/U.limit+1,perPage:Number(U.limit),onSetPage:function(e,t){$e(t)},onPerPageSelect:function(e,t){Fe(X(X({},U),{},{limit:t,offset:0}))},isCompact:!0},exportConfig:(t={label:a.formatMessage(F.Z.exportCsv)},(0,n.Z)(t,"label",a.formatMessage(F.Z.exportJson)),(0,n.Z)(t,"onSelect",(function(e,t){return(0,R.Z)("hits",t,U,J,K,Q,null,o)})),(0,n.Z)(t,"isDisabled",!H||!U.impacting||Array.isArray(U.impacting)&&!U.impacting.every((function(e){return"true"===e}))),(0,n.Z)(t,"tooltipText",H?a.formatMessage(F.Z.exportData):a.formatMessage(F.Z.permsAction)),t),filterConfig:{items:at},activeFiltersConfig:rt}),Be?d().createElement(S.Z,null):He?d().createElement(x.Z,{message:a.formatMessage(F.Z.rulesTableFetchRulesError)}):d().createElement(b.Table,{"aria-label":"rule-table",variant:b.TableVariant.compact,actionResolver:function(e,t){var r=t.rowIndex,l=ae[r].rule?ae[r].rule:null;return r%2==0&&l?l&&"enabled"===l.rule_status?[{title:a.formatMessage(F.Z.disableRule),onClick:function(e,t){return Ue(t)}}]:[{title:a.formatMessage(F.Z.enableRule),onClick:function(e,t){return Ue(t)}}]:null},onCollapse:function(e,t,a){var r=(0,l.Z)(ae);r[t]=X(X({},r[t]),{},{isOpen:a}),re(r)},sortBy:ie,onSort:function(e,t,a){var r="".concat("asc"===a?"":"-").concat(Je[t]);oe({index:t,direction:a}),Fe(X(X({},U),{},{sort:r,offset:0}))},cells:Y,rows:ae,areActionsDisabled:function(){return!q},isStickyHeader:!0},d().createElement(b.TableHeader,null),d().createElement(b.TableBody,null)),d().createElement(m.tl,{ouiaId:"page",itemCount:Ye,page:U.offset/U.limit+1,perPage:Number(U.limit),onSetPage:function(e,t){$e(t)},onPerPageSelect:function(e,t){Fe(X(X({},U),{},{limit:t,offset:0}))},widgetId:"pagination-options-menu-bottom",variant:m.aM.bottom}))}},40609:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(70885),l=a(93264);const n=function(e,t){var a=(0,l.useState)(e),n=(0,r.Z)(a,2),i=n[0],o=n[1];return(0,l.useEffect)((function(){var a=setTimeout((function(){o(e)}),t);return function(){clearTimeout(a)}}),[t,e]),i}},11452:()=>{}}]);
//# sourceMappingURL=../sourcemaps/3767.8b0c33d6203ea7e3ffc1b9a7c9bbef51.js.map