"use strict";(self.webpackChunkadvisor_frontend=self.webpackChunkadvisor_frontend||[]).push([[694],{80455:(e,t,a)=>{a.r(t),a.d(t,{default:()=>z});var n=a(93433),r=a(29439),l=a(93264),i=a.n(l),o=a(27577),s=a(15861),c=a(87757),m=a.n(c),d=a(71094),u=a(92506),f=a(59303),p=a(6202),g=a(32752),E=a(4853),b=a(23811),Z=a(78826),v=a(45697),h=a.n(v),M=a(9568),k=a(85806),x=a(12282),C=a(30893),S=a(71355),y=a(88931),T=a(86896),I=function(e){var t=e.handleModalToggleCallback,a=e.isModalOpen,n=e.topic,o=(0,T.Z)(),c=(0,y.useDispatch)(),v=function(e){return c((0,S.wN)(e))},h=(0,l.useState)(n.name||""),I=(0,r.Z)(h,2),N=I[0],w=I[1],A=(0,l.useState)(n.description||""),D=(0,r.Z)(A,2),O=D[0],B=D[1],L=(0,l.useState)(n.tag||""),F=(0,r.Z)(L,2),P=F[0],_=F[1],q=(0,l.useState)(n.enabled||!1),H=(0,r.Z)(q,2),R=H[0],j=H[1],z=(0,l.useState)(n.featured||!1),U=(0,r.Z)(z,2),Y=U[0],G=U[1],K=(0,l.useState)(n.slug||void 0),X=(0,r.Z)(K,2),J=X[0],Q=X[1],V=function(){var e=(0,s.Z)(m().mark((function e(a){var l,i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=a.type,e.prev=1,i={name:N,slug:J,tag:P,description:O,enabled:R,featured:Y},"DELETE"!==l){e.next=8;break}return e.next=6,(0,d.Sp)("".concat(f._n,"/topic/").concat(J));case 6:e.next=15;break;case 8:if(!n.slug){e.next=13;break}return e.next=11,(0,d.qb)("".concat(f._n,"/topic/").concat(J,"/"),i);case 11:e.next=15;break;case 13:return e.next=15,(0,d.SO)("".concat(f._n,"/topic/"),{},i);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),v({variant:"danger",dismissable:!0,title:o.formatMessage(C.Z.error),description:Object.entries(e.t0.response.data).map((function(e){var t=(0,r.Z)(e,2),a=t[0],n=t[1];return"".concat(a.toUpperCase(),":").concat(n," ")}))});case 20:return e.prev=20,t(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[1,17,20,23]])})));return function(t){return e.apply(this,arguments)}}(),W=function(e){n.slug?w(e):(w(e),Q(e.replace(/\s/g,"").toLowerCase()))},$=i().createElement(u.Split,{className:"split-override",hasGutter:!0},i().createElement(u.SplitItem,null,i().createElement(p.Button,{key:"confirm",variant:"primary",onClick:function(){return V({type:"POST/PUT"})},ouiaId:"confirm"},o.formatMessage(C.Z.save))),i().createElement(u.SplitItem,null,i().createElement(p.Button,{key:"cancel",variant:"secondary",onClick:function(){return t(!1)},ouiaId:"cancel"},o.formatMessage(C.Z.cancel))),i().createElement(u.SplitItem,{isFilled:!0}),i().createElement(u.SplitItem,null,i().createElement(p.Button,{key:"delete",ouiaId:"delete",variant:"danger",isDisabled:!n.slug,onClick:function(){return V({type:"DELETE"})}},o.formatMessage(C.Z.deleteTopic))));return i().createElement(Z.u_,{title:o.formatMessage(C.Z.topicAdminTitle),isOpen:a,onClose:function(){return t(!1)},footer:$,className:"modal-width-override"},i().createElement(E.l,null,i().createElement(b.c,{label:o.formatMessage(C.Z.name),fieldId:"topic-form-name",className:"text-input-override"},i().createElement(x.oi,{value:N,isRequired:!0,type:"text",id:"topic-form-name",name:"topic-form-name",onChange:function(e){return W(e)}})),i().createElement(b.c,{label:o.formatMessage(C.Z.topicAddEditDescription),fieldId:"topic-form-description",helperText:o.formatMessage(C.Z.topicAddEditDescriptionHelperText),className:"text-area-override"},i().createElement(k.Kx,{value:O,isRequired:!0,name:"topic-form-description",id:"topic-form-description",onChange:function(e){return B(e)}})),i().createElement(b.c,{isInline:!0,fieldId:"topic-form-labels"},i().createElement(b.c,{label:o.formatMessage(C.Z.tag),fieldId:"topic-form-tag",helperText:o.formatMessage(C.Z.topicAddEditTagHelperText),className:"text-input-override"},i().createElement(x.oi,{value:P.replace(/\s/g,"").toLowerCase(),isRequired:!0,type:"text",id:"topic-form-tag",name:"topic-form-tag",onChange:function(e){return _(e.replace(/\s/g,"").toLowerCase())}})),i().createElement(b.c,{label:o.formatMessage(C.Z.topicSlug),fieldId:"topic-form-name-2",helperText:"",className:"text-input-override"},i().createElement(x.oi,{value:J||N.replace(/\s/g,"").toLowerCase(),isDisabled:n.slug,type:"text",id:"topic-form-name-2",name:"topic-form-name-2",onChange:function(e){return W(e)}}))),i().createElement(b.c,{label:o.formatMessage(C.Z.status),fieldId:"topic-form-enabled"},i().createElement(M.Y,{isChecked:!R,id:"disabled",label:o.formatMessage(C.Z.topicAddEditDisabled),onChange:function(){return j(!R)},className:"radio-override"}),i().createElement(M.Y,{isChecked:R,id:"enabled",label:o.formatMessage(C.Z.topicAddEditEnabled),onChange:function(){return j(!R)},className:"radio-override"})),i().createElement(b.c,{label:o.formatMessage(C.Z.featured),fieldId:"topic-form-featured"},i().createElement(g.X,{isChecked:Y,label:o.formatMessage(C.Z.topicAddEditFeatureBox),id:"checkbox-featured",name:"checkbox-featured","aria-label":"update-featured",onChange:function(){return G(!Y)},className:"checkbox-override"}))))};I.propTypes={handleModalToggleCallback:h().func,isModalOpen:h().bool,topic:h().object,intl:h().any};const N=I;var w=a(80516),A=a(35451),D=a(4145),O=a(76341),B=a(46891),L=a(86350),F=a(34702),P=a(48716),_=a(66296),q=a(47668),H=a(32875),R=a(34348),j=a(77187);const z=function(){var e=(0,T.Z)(),t=(0,j.zv)(),a=t.data,s=void 0===a?[]:a,c=t.isLoading,m=t.isFetching,d=t.isError,u=t.refetch,f=(0,l.useState)([{title:e.formatMessage(C.Z.title),transforms:[o.sortable]},{title:e.formatMessage(C.Z.tag),transforms:[o.sortable]},{title:e.formatMessage(C.Z.topicSlug),transforms:[o.sortable]},{title:e.formatMessage(C.Z.status),transforms:[o.sortable]},{title:e.formatMessage(C.Z.featured),transforms:[o.sortable]},"",""]),g=(0,r.Z)(f,1)[0],E=(0,l.useState)([]),b=(0,r.Z)(E,2),Z=b[0],v=b[1],h=(0,l.useState)({}),M=(0,r.Z)(h,2),k=M[0],x=M[1],S=(0,l.useState)(!1),y=(0,r.Z)(S,2),I=y[0],z=y[1],U=(0,l.useState)({}),Y=(0,r.Z)(U,2),G=Y[0],K=Y[1],X=(0,l.useState)([]),J=(0,r.Z)(X,2),Q=J[0],V=J[1],W=(0,l.useCallback)((function(e,t,a){var r={0:"name",1:"tag",2:"slug",3:"enabled",4:"featured"}[t],l=(0,n.Z)(Q);x({index:t,direction:a}),V(l.sort((function(e,t){return"asc"===a?"enabled"===r||"featured"===r?e[r]>t[r]?-1:1:e[r]>t[r]?1:-1:"enabled"===r||"featured"===r?e[r]>t[r]?1:-1:e[r]>t[r]?-1:1})))}),[x,V,Q]),$=function(e){e?(K(e),z(!0)):z(!0)};return(0,l.useEffect)((function(){V(s)}),[s]),(0,l.useEffect)((function(){if(0===Q.length)v([{cells:[{title:i().createElement(F.Z,{icon:"none",title:"",text:""}),props:{colSpan:7}}]}]);else{var t=Q.flatMap((function(t,a){return[{isOpen:!1,rule:t,cells:[{title:i().createElement("span",{key:a}," ",t.name)},{title:i().createElement("span",{key:a}," ",t.tag)},{title:i().createElement("span",{key:a}," ",t.slug)},{title:i().createElement("span",null,t.enabled?i().createElement("span",null,i().createElement(A.default,{className:"success"})," ",e.formatMessage(C.Z.enabled)):i().createElement("span",null,i().createElement(w.ZP,{className:"ban"})," ",e.formatMessage(C.Z.disabled)))},{title:i().createElement("span",null,t.featured?i().createElement("span",null,i().createElement(q.ZP,null)," ",e.formatMessage(C.Z.featured)):i().createElement("span",null))},"",{title:i().createElement(p.Button,{ouiaId:"hide",variant:"link",onClick:function(){return $(t)}},i().createElement(D.ZP,null)," ",e.formatMessage(C.Z.topicAdminEdit))}]}]}));v(t)}}),[Q,e]),i().createElement(i().Fragment,null,I&&i().createElement(N,{isModalOpen:I,handleModalToggleCallback:function(e){z(e),u()},topic:G}),i().createElement(P.Z,null,i().createElement(R.Dx,{headingLevel:"h3",size:"2xl",className:"titlePaddingOverride"},e.formatMessage(C.Z.topicAdminTitle))),i().createElement(L.Z,null,i().createElement(i().Fragment,null,i().createElement(_.Z,{className:"toolbar-padding-override"},i().createElement(p.Button,{variant:"primary",ouiaId:"adminCreate",onClick:function(e){return $(e)}},e.formatMessage(C.Z.topicAdminCreate))),!c&&!m&&i().createElement(o.Table,{ouiaId:"adminTable","aria-label":"topics-admin-table",sortBy:k,onSort:W,cells:g,rows:Z,isStickyHeader:!0},i().createElement(o.TableHeader,null),i().createElement(o.TableBody,null)),m&&i().createElement(B.Z,null),d&&i().createElement(O.Z,{message:e.formatMessage(C.Z.systemTableFetchError)}),i().createElement(H.Z,null))))}}}]);
//# sourceMappingURL=../sourcemaps/TopicAdmin.572ba502d3b126b840bbeb8a04d9d101.js.map