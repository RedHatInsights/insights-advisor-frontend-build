(self.webpackChunkadvisor=self.webpackChunkadvisor||[]).push([[3815],{87516:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(75824),a=n(69174),o=n(45697),i=n.n(o),l=n(93264),c=n.n(l),s=n(30893),u=n(86896),d=function(e){var t,n=e.rule,o=e.isCompact,i=e.noMargin,l=(0,u.Z)();return c().createElement(c().Fragment,null,-1!==(null==n||null===(t=n.tags)||void 0===t?void 0:t.search("incident"))&&c().createElement(r.u,{content:l.formatMessage(s.Z.incidentTooltip),position:r.D.right},c().createElement(a._,{color:"red",className:i?null:"adv-c-label-incident",isCompact:o},l.formatMessage(s.Z.incident))),"disabled"===(null==n?void 0:n.rule_status)&&c().createElement(r.u,{content:l.formatMessage(s.Z.ruleIsDisabledTooltip),position:r.D.right},c().createElement(a._,{color:"gray",isCompact:o},l.formatMessage(s.Z.disabled))),"rhdisabled"===(null==n?void 0:n.rule_status)&&c().createElement(r.u,{content:l.formatMessage(s.Z.ruleIsDisabledTooltip),position:r.D.right},c().createElement(a._,{color:"gray",isCompact:o},l.formatMessage(s.Z.redhatDisabled))))};d.propTypes={rule:i().object,isCompact:i().bool,noMargin:i().bool},d.defaultProps={isCompact:!0};const p=d},47197:(e,t,n)=>{"use strict";n.d(t,{Z:()=>le});var r=n(87462),a=n(15861),o=n(4942),i=n(42982),l=n(70885),c=n(87757),s=n.n(c),u=n(59303),d=n(32203),p=n(62394),f=n(86896),m=n(93264),h=n.n(m),g=n(48585),v=n(3351),y=n(22860),b=n(6934),k=n(75863),E=n(28216),_=n(71094),Z=n(24561),O=n(7887),P=n(45697),w=n.n(P),C=n(98132),S=n(71355),j=n(97109),D=n(30893),x=n(87135),M=n(27361),W=n.n(M),T=n(46818),R=n(7732),A=n(75824),I=n(16712),N=n(90693),F=n(62410),V=n(87516),B=n(27330),L=n(74761),H=n(98614),G=n(72781),q=n(52643),z=n(47173),K=n(66435),X=n(49739),$=n(83826),J=n(34702),Q=function(){return h().createElement(q.b,null,h().createElement(J.Z,{title:"No matching recommendations found",text:"To continue, edit your filter settings and search again."}))},U=function(){return h().createElement(q.b,null,h().createElement(J.Z,{icon:H.ZP,iconClass:"ins-c-insights__check",title:"No recommendations",text:"No known recommendations affect this system"}))},Y=function(){return h().createElement(J.Z,{iconClass:"chartSpikeIconColor",icon:L.ZP,title:"Get started with Red Hat Insights",text:h().createElement(q.b,null,h().createElement(X.K,{hasGutter:!0},h().createElement($.v,null,"1. Install the client on the RHEL system.",h().createElement(K.M5,null,"yum install insights-client")),h().createElement($.v,null,"2. Register the system to Red Hat Insights.",h().createElement(K.M5,null,"insights-client --register"))))},h().createElement(z.zx,{component:"a",href:"https://access.redhat.com/products/red-hat-insights#getstarted",target:"_blank",variant:"primary"},"Getting started documentation"))},ee=function(e){var t=e.entity;return h().createElement(q.b,null,h().createElement(J.Z,{icon:G.ZP,title:"Error getting recommendations",text:t?"There was an error fetching recommendations for this entity. Refresh your page to try again.":"This entity can not be found or might no longer be registered to Red Hat Insights."}))};ee.propTypes={entity:w().object};var te=n(75662);function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ie=function(e){var t=e.entity,n=e.inventoryId,r=(0,f.Z)(),c=(0,m.useRef)({rowCount:0}),P=(0,E.useDispatch)(),w=function(e){return P((0,S.addNotification)(e))},M=(0,E.useSelector)((function(e){return e.routerData})),L=(0,m.useState)("pending"),H=(0,l.Z)(L,2),G=H[0],q=H[1],z=(0,m.useState)([]),K=(0,l.Z)(z,2),X=K[0],$=K[1],J=(0,m.useState)([]),ne=(0,l.Z)(J,2),ae=ne[0],ie=ne[1],le=(0,m.useState)([]),ce=(0,l.Z)(le,2),se=ce[0],ue=ce[1],de=(0,m.useState)({}),pe=(0,l.Z)(de,2),fe=pe[0],me=pe[1],he=(0,m.useState)({}),ge=(0,l.Z)(he,2),ve=ge[0],ye=ge[1],be=(0,m.useState)(""),ke=(0,l.Z)(be,2),Ee=ke[0],_e=ke[1],Ze=(0,m.useState)(!1),Oe=(0,l.Z)(Ze,2),Pe=Oe[0],we=Oe[1],Ce=(0,m.useState)(!1),Se=(0,l.Z)(Ce,2),je=Se[0],De=Se[1],xe=function(e){return e.filter((function(e){return e.selected}))},Me=xe(X).filter((function(e){var t;return null===(t=e.resolution)||void 0===t?void 0:t.has_playbook})),We=xe(X).length,Te=X.filter((function(e){var t;return null===(t=e.resolution)||void 0===t?void 0:t.has_playbook})).length,Re=function(e){return[{title:e.formatMessage(D.Z.topicAddEditDescription),transforms:[R.p]},{title:e.formatMessage(D.Z.modified),transforms:[R.p,T.E0]},{title:e.formatMessage(D.Z.firstImpacted),transforms:[R.p,T.E0]},{title:e.formatMessage(D.Z.totalRisk),transforms:[R.p,T.E0]},{title:e.formatMessage(D.Z.remediation),transforms:[R.p,T.E0]}]}(r),Ae=[h().createElement(C.Z,{key:"remediation-button",isDisabled:0===Me.length,dataProvider:function(){return Ge(Me)},onRemediationCreated:function(e){return function(e){Fe(!1);try{e.remediation&&w(e.getNotification())}catch(e){w({variant:"danger",dismissable:!0,title:r.formatMessage(D.Z.error),description:"".concat(e)})}}(e)}},r.formatMessage(D.Z.remediate))],Ie=function(e){var t=(0,i.Z)(e),n=M&&void 0!==M.params?e.findIndex((function(e){return e.rule.rule_id===M.params.id})):-1,r=t.splice(n,1);return-1!==n?[r[0]].concat((0,i.Z)(t)):e},Ne=function(e,t,n,r){var a,o=null===(a=(0,te.useLocation)().pathname)||void 0===a?void 0:a.split("/");return(0,m.useCallback)((function(a,i,l,c){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",d=arguments.length>5&&void 0!==arguments[5]&&arguments[5],p=arguments.length>6&&void 0!==arguments[6]&&arguments[6],f=a,m=window.location.href.indexOf("activeRule")>-1;if(m&&p){var g=o[2];f.sort((function(e,t){return e.rule.rule_id===g?-1:t.rule.rule_id===g?1:0}))}else p&&f.sort((function(e,t){return e.rule.total_risk>t.rule.total_risk?-1:t.rule.total_risk>e.rule.total_risk?1:0}));var v=f.flatMap((function(t,n){var r=t.rule,a=t.resolution,o=Object.keys(i).length?i.filter((function(e){return e.id===t.rule.node_id}))[0]:{},f=c.find((function(e){var t;return(null==e||null===(t=e.rule)||void 0===t?void 0:t.rule_id)===r.rule_id})),g=null==f?void 0:f.selected,v=(null==f?void 0:f.isOpen)||m&&p&&0===n,y=[{rule:r,resolution:a,isOpen:a?v:void 0,selected:g,disableSelection:!a||!a.has_playbook,cells:[{title:h().createElement("span",null,r.description," ",h().createElement(V.Z,{rule:r}))},{title:h().createElement("span",null,h().createElement(F.Z,{date:r.publish_date,type:"relative",tooltipProps:{position:A.D.bottom}}))},{title:h().createElement("div",{key:n},h().createElement(F.Z,{date:t.impacted_date,type:"relative",tooltipProps:{position:A.D.bottom}}))},{title:h().createElement("div",{key:n,style:{verticalAlign:"top"}},h().createElement(A.u,{key:n,position:A.D.bottom,content:h().createElement("span",null,"The ",h().createElement("strong",null,"likelihood")," that this will be a problem is ",u.FV[r.likelihood],". The"," ",h().createElement("strong",null,"impact")," of the problem would be Â ",u.dz[r.impact.impact]," if it occurred.")},h().createElement(N.Z,{value:r.total_risk,isCompact:!0})))},{title:h().createElement("div",{className:"ins-c-center-text",key:n},null===a?e.formatMessage(D.Z.notAvailable):null!=a&&a.has_playbook?h().createElement("span",null,h().createElement(I.ZP,{size:"sm"})," ",e.formatMessage(D.Z.playbook)):e.formatMessage(D.Z.manual))}]},a&&{parent:n,fullWidth:!0,cells:[{title:h().createElement(B.G,{key:"child-".concat(n),report:re(re({},t),{},{resolution:t.resolution.resolution}),kbaDetail:o,kbaLoading:d})}]}],b=0===s.length||r.description.toLowerCase().includes(s.toLowerCase()),k=0===Object.keys(l).length||Object.keys(l).map((function(e){var n,a=l[e],o={has_playbook:null===(n=t.resolution)||void 0===n?void 0:n.has_playbook,publish_date:r.publish_date,total_risk:r.total_risk,category:u.kT[r.category.name.toLowerCase()]};return a.find((function(t){return String(t)===String(o[e])}))})).every((function(e){return e}));return b&&k?y.filter((function(e){return null!==e})):[]}));if(v.forEach((function(e,t){return e.parent?e.parent=t-1:null})),t.current.rowCount=a.length,a.length<1||v.length<1){var y=0===v.length&&Q||(null==n?void 0:n.insights_id)&&U||Y;return[{heightAuto:!0,cells:[{props:{colSpan:5},title:h().createElement(y,null)}]}]}return"failed"===r?[{heightAuto:!0,cells:[{props:{colSpan:5},title:h().createElement(ee,{entity:n})}]}]:v}),[n,r])}(r,c,t,G),Fe=function(e){we(e),$(Ne(ae,se,ve,X.map((function(t,n){return n%2==0&&t.resolution.has_playbook?oe(oe({},t),{},{selected:e}):t})),Ee))},Ve={items:[{title:"Select none",onClick:function(){return Fe(!1)}},{title:"Select all",onClick:function(){return Fe(!0)}}],count:We,checked:We===c.current.rowCount?1:We>0||Te!==c.current.rowCount?null:0,onSelect:function(){return Fe(!Pe)}},Be={deleteTitle:r.formatMessage(D.Z.resetFilters),filters:function(e){var t=Object.entries(e),n=e&&t.length>0?t.map((function(e){var t=u.W2[e[0]],n=e[1].map((function(e){return{name:t.values.find((function(t){return t.value===String(e)})).label,value:e}}));return{category:(0,j.kC)(t.title),chips:n,urlParam:t.urlParam}})):[];return Ee.length>0&&n.push({category:"Description",chips:[{name:Ee,value:Ee}]}),n}(ve),onDelete:function(e,t,n){n?($(Ne(ae,se,{},X,"")),ye({}),_e("")):t.map((function(e){"Description"===e.category?($(Ne(ae,se,ve,X,"")),_e("")):He(e.urlParam,ve[e.urlParam].filter((function(t){return String(t)!==String(e.chips[0].value)})))}))}},Le=function(){var e=(0,a.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){return e.rule.node_id})).filter((function(e){return e})),e.prev=1,e.next=4,(0,_.dX)("https://access.redhat.com/hydra/rest/search/kcs?q=id:(".concat(n.join(" OR "),")&fq=documentKind:(Solution%20or%20Article)&fl=view_uri,id,publishedTitle&redhat_client=$ADVISOR"),{},{credentials:"include"});case 4:r=e.sent.data.response.docs,ue(r),$(Ne(t,r,ve,X,Ee,!1,!0)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0,"KBA fetch failed.");case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),He=function(e,t){var n=t.length>0?oe(oe({},ve),(0,o.Z)({},e,t)):function(e){var t=oe({},ve);return delete t[e],t}(e);$(Ne(ae,se,n,X,Ee)),ye(n)},Ge=function(e){return(0,m.useCallback)((function(t){var n=t.filter((function(e){var t;return null===(t=e.resolution)||void 0===t?void 0:t.has_playbook})).map((function(e){return{id:"advisor:".concat(e.rule.rule_id),description:e.rule.description}}));return!!n.length&&{issues:n,systems:[e]}}),[e])}(n),qe=function(e,t,n,r){return[{label:"description",filterValues:{key:"text-filter",onChange:function(e,t){return n(t)},value:t}},{label:u.W2.total_risk.title,type:u.W2.total_risk.type,id:u.W2.total_risk.urlParam,value:"checkbox-".concat(u.W2.total_risk.urlParam),filterValues:{key:"".concat(u.W2.total_risk.urlParam,"-filter"),onChange:function(e,t){return r(u.W2.total_risk.urlParam,t)},value:e.total_risk,items:u.W2.total_risk.values}},{label:u.W2.category.title,type:u.W2.category.type,id:u.W2.category.urlParam,value:"checkbox-".concat(u.W2.category.urlParam),filterValues:{key:"".concat(u.W2.category.urlParam,"-filter"),onChange:function(e,t){return r(u.W2.category.urlParam,t)},value:e.category,items:u.W2.category.values}},{label:u.W2.has_playbook.title,type:u.W2.has_playbook.type,id:u.W2.has_playbook.urlParam,value:"checkbox-".concat(u.W2.has_playbook.urlParam),filterValues:{key:"".concat(u.W2.has_playbook.urlParam,"-filter"),onChange:function(e,t){return r(u.W2.has_playbook.urlParam,t)},value:e.has_playbook,items:u.W2.has_playbook.values}}]}(ve,Ee,(function(e){var t=Ne(ae,se,ve,X,e);_e(e),$(t)}),He);return(0,m.useEffect)((function(){var e=function(){var e=(0,a.Z)(s().mark((function e(){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,_.dX)("".concat(u._n,"/system/").concat(n,"/reports/"),{credentials:"include"});case 3:t=e.sent,r=Ie(t.data),Le(r),$(Ne(r,{},ve,X,Ee,!0)),q("fulfilled"),ie(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),q("failed");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),"fulfilled"===G&&null===(null==t?void 0:t.insights_id)?h().createElement(x.Z,{titleText:r.formatMessage(D.Z.notConnectedTitle),bodyText:r.formatMessage(D.Z.notConnectedBody),buttonText:r.formatMessage(D.Z.notConnectedButton)}):h().createElement("div",{className:"ins-c-inventory-insights__overrides"},"pending"===G||null===(null==t?void 0:t.insights_id)?h().createElement(m.Fragment,null):h().createElement(O.Z,{expandAll:{isAllExpanded:je,onClick:function(e,t){De(t);var n=(0,i.Z)(X);n.map((function(e){Object.prototype.hasOwnProperty.call(e,"isOpen")&&(e.isOpen=t)})),$(n)}},actionsConfig:{actions:Ae},bulkSelect:Ve,filterConfig:{items:qe},pagination:h().createElement(m.Fragment,null," ","".concat(c.current.rowCount," ").concat(1===c.current.rowCount?"Recommendation":"Recommendations")," "),activeFiltersConfig:Be}),"pending"===G&&h().createElement(d.Z,null,h().createElement(p.e,null,h().createElement(Z.aV,null))),"fulfilled"===G&&h().createElement(m.Fragment,null,h().createElement(v.i,{id:"system-advisor-report-table","aria-label":"report-table",onSelect:!(1===X.length&&X[0].heightAuto)&&function(e,t,n){return $(Ne(ae,se,ve,X.map((function(e,r){return r===n?oe(oe({},e),{},{selected:t}):e})),Ee))},onCollapse:function(e,t,n){var r=(0,i.Z)(X);r[t]=oe(oe({},r[t]),{},{isOpen:n}),$(r)},rows:X,cells:Re,sortBy:fe,canSelectAll:!1,onSort:function(e,t,n){var r={2:"rule.description",3:"rule.publish_date",4:"impacted_date",5:"rule.total_risk",6:"resolution.has_playbook"},a=n===g.B.asc?1:-1,o=ae.concat().sort((function(e,n){var o=W()(e,r[t]),i=W()(n,r[t]);return 3!==t&&4!==t||(o=new Date(o),i=new Date(i)),o>i?a:i>o?-a:0}));ie(o),me({index:t,direction:n}),$(Ne(o,se,ve,X,Ee))},variant:k.B.compact,isStickyHeader:!0},h().createElement(b.x,null),h().createElement(y.R,null))))};ie.propTypes={entity:w().shape({insights_id:w().string,id:w().string}),inventoryId:w().string.isRequired};const le=function(e){var t=(0,r.Z)({},e),n=(0,E.useSelector)((function(e){return e.entityDetails.entity}));return h().createElement(ie,(0,r.Z)({},t,{entity:n}))}},45467:()=>{},11452:()=>{},34946:()=>{},80598:()=>{},32857:()=>{},37625:()=>{},28992:()=>{},30187:()=>{},90479:()=>{},21626:()=>{},21064:()=>{},82014:()=>{},91993:()=>{},54994:()=>{},44690:()=>{},37494:()=>{},67761:()=>{},49854:()=>{},53519:()=>{},22868:()=>{},14777:()=>{},99830:()=>{},70209:()=>{},87414:()=>{}}]);
//# sourceMappingURL=../sourcemaps/3815.80f44b8a31e98db23c6877adbdfd6e73.js.map