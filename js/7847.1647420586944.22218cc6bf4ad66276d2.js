(self.webpackChunkadvisor_frontend=self.webpackChunkadvisor_frontend||[]).push([[7847],{75331:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n(70885),a=n(93264),o=n.n(a),s=n(85991),i=n(49489),l=n(75662),c=n(45697),u=n.n(c),d=n(30893),f=n(75546),m=n(86896),p=function(e){var t,n=e.current,c=(0,m.Z)(),u=null===(t=(0,l.useLocation)().pathname)||void 0===t?void 0:t.split("/"),p=(0,a.useState)([]),v=(0,r.Z)(p,2),g=v[0],b=v[1],h=!("recommendations"===u[1]&&4===u.length)||"pathways"===u[2],y=(0,f.m1)({ruleId:u[2]},{skip:h}),_=y.data,k=y.isFetching;return(0,a.useEffect)((function(){var e;(e=[]).push({title:"".concat(c.formatMessage(d.Z.insightsHeader)," ").concat(u[1]),navigate:"/".concat(u[1])}),h||e.push({title:null==_?void 0:_.description,navigate:"/".concat(u[1],"/").concat(u[2])}),"pathways"===u[2]&&(e=[{title:"Advisor pathways",navigate:"/recommendations/pathways"}]),b(e)}),[_]),o().createElement(o().Fragment,null,!k&&g.length>0?o().createElement(s.a,{ouiaId:"detail"},g.map((function(e,t){return o().createElement(i.g,{key:t},o().createElement(l.Link,{to:e.navigate},e.title))})),o().createElement(i.g,{isActive:!0},n)):c.formatMessage(d.Z.loading))};p.propTypes={current:u().string};const v=p},52202:(e,t,n)=>{"use strict";n.d(t,{k:()=>b,b:()=>h});var r=n(66197),a=n(16545),o=n(82644),s=n(29558),i=n(91290),l=n(26076),c=n(93264),u=n.n(c),d=n(14498),f=n(30893),m=n(28186),p=(0,o.Sn)(),v=navigator.language.slice(0,2),g=(0,s.d)({onError:console.log,locale:v},p),b=function(e){return u().createElement("span",{className:"system-reboot-message"},u().createElement(l.ZP,{className:e?"reboot-required-icon":"no-reboot-required-icon"}),u().createElement(r.TextContent,{className:"system-reboot-message__content"},u().createElement(r.Text,{component:r.TextVariants.p},g.formatMessage(f.Z.systemReboot,{strong:function(e){return(0,m.f)(e)},status:e?g.formatMessage(f.Z.is):g.formatMessage(f.Z.isNot)}))))},h=function(e){return u().createElement(a.u,{key:e,position:a.D.right,content:u().createElement("div",null,e)},u().createElement("span",{"aria-label":"Action"},u().createElement(i.ZP,{color:d.global_info_color_100.value})))}},40771:(e,t,n)=>{"use strict";n.d(t,{Z:()=>C});var r=n(4942),a=n(15861),o=n(70885),s=n(87757),i=n.n(s),l=n(59303),c=n(93264),u=n.n(c),d=n(27577),f=n(97109),m=n(28216),p=n(44788),v=n(71094),g=n(33739),b=n(46891),h=n(45697),y=n.n(h),_=n(98132),k=n(30893),x=n(71355),w=n(46655),Z=n(41131),E=n(86896),P=n(58921);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=function(e){var t,n,s,h,y,O,T,C=e.tableProps,D=e.rule,M=e.afterDisableFn,I=e.pathway,j=e.selectedTags,F=e.workloads,N=e.SID,A=e.permsExport,U=e.exportTable,R=(0,m.useStore)(),V=(0,E.Z)(),L=(0,m.useDispatch)(),X=(0,c.useState)([]),Y=(0,o.Z)(X,2),J=Y[0],q=Y[1],W=(0,c.useState)({limit:20,offset:0,sort:"-last_seen",name:""}),B=(0,o.Z)(W,2),H=B[0],K=B[1],z=(0,m.useSelector)((function(e){return e.entities||{}})),G=function(e,t){return L({type:"SELECT_ENTITY",payload:{id:e,selected:t}})},Q=function(e){return L((0,x.wN)(e))},$=(0,c.useState)(!1),ee=(0,o.Z)($,2),te=ee[0],ne=ee[1],re=(0,c.useState)(),ae=(0,o.Z)(re,2),oe=ae[0],se=ae[1],ie=function(){var e=(0,a.Z)(i().mark((function e(){var t,n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I){e.next=17;break}return e.next=3,(0,v.dX)("".concat(l._n,"/pathway/").concat(encodeURI(I.slug),"/rules/"),{},{});case 3:if(e.t1=t=e.sent,e.t0=null===e.t1,e.t0){e.next=7;break}e.t0=void 0===t;case 7:if(!e.t0){e.next=11;break}e.t2=void 0,e.next=12;break;case 11:e.t2=t.data.data;case 12:return n=e.t2,r=n.map((function(e){return{id:"advisor:".concat(e.rule_id),description:e.description}})),e.abrupt("return",{issues:r,systems:J});case 17:return e.abrupt("return",{issues:[{id:"advisor:".concat(D.rule_id),description:D.description}],systems:J});case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le=function(e){ne(e)},ce=function(){se(!0),G(0,!0)},ue=function(){var e;return oe?se(!1):q(null==z||null===(e=z.rows)||void 0===e?void 0:e.filter((function(e){return!0===e.selected})).map((function(e){return e.id})))},de=function(e){var t=e.name,n=e.display_name,r=S(S(S({},e),t&&{name:t}),n&&{display_name:n});!I&&(0,f.Y4)(r,j)},fe=function(e){var t=S(S({},H),{},{offset:0});delete t[e],K(t)},me=[{label:l.Ut.rhel_version.title.toLowerCase(),type:l.Ut.rhel_version.type,id:l.Ut.rhel_version.urlParam,value:"checkbox-".concat(l.Ut.rhel_version.urlParam),filterValues:{key:"".concat(l.Ut.rhel_version.urlParam,"-filter"),onChange:function(e,t){!function(e,t){t.length>0?K(S(S({},H),{},{offset:0},(0,r.Z)({},e,t))):fe(e)}(l.Ut.rhel_version.urlParam,t)},value:H.rhel_version,items:l.Ut.rhel_version.values}}],pe={deleteTitle:V.formatMessage(k.Z.resetFilters),filters:(O=S({},H),delete O.sort,delete O.offset,delete O.limit,(0,f.yK)(O,l.Ut)),onDelete:function(e,t,n){n?K({sort:H.sort,limit:H.limit,offset:H.offset}):t.map((function(e){var t=(0,r.Z)({},e.urlParam,Array.isArray(H[e.urlParam])?H[e.urlParam].filter((function(t){return String(t)!==String(e.chips[0].value)})):"");t[e.urlParam].length>0?K(S(S({},H),t)):fe(e.urlParam)}))}};return(0,c.useEffect)((function(){var e;(null==z||null===(e=z.rows)||void 0===e?void 0:e.length)&&ue(z.rows)}),[null==z?void 0:z.rows]),u().createElement(u().Fragment,null,te&&u().createElement(p.Z,{handleModalToggle:le,isModalOpen:te,rule:D,afterFn:M,hosts:J}),u().createElement(g.Z,{hasCheckbox:!0,initialLoading:!0,autoRefresh:!0,hideFilters:{all:!0,name:!1},filterConfig:{items:me},activeFiltersConfig:pe,columns:function(e){return function(e){var t=e.filter((function(e){return"updated"===e.key})),n=e.filter((function(e){return"display_name"===e.key})),r=e.filter((function(e){return"system_profile"===e.key}));return n=S(S({},n[0]),{},{transforms:[d.sortable,d.wrappable],props:{isStatic:!0}}),t=S(S({},t[0]),{},{transforms:[d.sortable,d.wrappable],props:{width:20}}),[n,r=S(S({},r[0]),{},{transforms:[d.wrappable]}),t]}(e)},tableProps:S({variant:d.TableVariant.compact},C),customFilters:{advisorFilters:H,selectedTags:j,workloads:F,SID:N},getEntities:function(){var e=(0,a.Z)(i().mark((function e(t,n,r,a){var o,s,c,u,d,m,p,g,b,h,y,_,k,x,w,Z,E;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m=n.per_page,p=n.page,g=n.orderBy,b=n.orderDirection,h=n.advisorFilters,y=n.selectedTags,_=n.workloads,k=n.SID,x="".concat("ASC"===b?"":"-").concat("updated"===g?"last_seen":g),w=S(S(S(S(S({},h),{},{limit:m,offset:p*m-m,sort:x},n.filters.hostnameOrId&&!I&&{name:null==n||null===(o=n.filters)||void 0===o?void 0:o.hostnameOrId}),n.filters.hostnameOrId&&I&&{display_name:null==n||null===(s=n.filters)||void 0===s?void 0:s.hostnameOrId}),(null==y?void 0:y.length)&&{tags:y}),Array.isArray(h.rhel_version)&&{rhel_version:null===(c=h.rhel_version)||void 0===c?void 0:c.join(",")}),_&&(w=S(S({},w),(0,f.s0)(_,k))),de(w),!I){e.next=20;break}return e.next=8,(0,v.dX)("".concat(l.Vo),{},S(S({},w),{},{pathway:I.slug}));case 8:if(e.t2=u=e.sent,e.t1=null===e.t2,e.t1){e.next=12;break}e.t1=void 0===u;case 12:if(!e.t1){e.next=16;break}e.t3=void 0,e.next=17;break;case 16:e.t3=u.data;case 17:e.t0=e.t3,e.next=32;break;case 20:return e.next=22,(0,v.dX)("".concat(l.cJ).concat(encodeURI(D.rule_id),"/systems_detail/"),{},w);case 22:if(e.t5=d=e.sent,e.t4=null===e.t5,e.t4){e.next=26;break}e.t4=void 0===d;case 26:if(!e.t4){e.next=30;break}e.t6=void 0,e.next=31;break;case 30:e.t6=d.data;case 31:e.t0=e.t6;case 32:return Z=e.t0,e.next=35,a(Z.data.map((function(e){return e.system_uuid})),{page:p,per_page:m,hasItems:!0,fields:{system_profile:["operating_system"]}},r);case 35:return E=e.sent,e.abrupt("return",Promise.resolve({results:(0,f.E9)(Z.data,E.results),total:Z.meta.count}));case 37:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),dedicatedAction:u().createElement(_.Z,{key:"remediation-button",isDisabled:0===J.length||!I&&0===(null==D?void 0:D.playbook_count),dataProvider:ie,onRemediationCreated:function(e){return function(e){G(-1,!1);try{e.remediation&&Q(e.getNotification())}catch(e){Q({variant:"danger",dismissable:!0,title:V.formatMessage(k.Z.error),description:"".concat(e)})}}(e)}},V.formatMessage(k.Z.remediate)),actionsConfig:{actions:["",{label:V.formatMessage(k.Z.disableRuleForSystems),props:{isDisabled:0===J.length},onClick:function(){return le(!0)}}]},bulkSelect:{count:J.length,items:[{title:V.formatMessage(k.Z.selectNone),onClick:function(){G(-1,!1)}},S({},(null==z||null===(t=z.rows)||void 0===t?void 0:t.length)>H.limit?{title:V.formatMessage(k.Z.selectPage,{items:H.limit}),onClick:function(){G(0,!0)}}:{}),S({},(null==z||null===(n=z.rows)||void 0===n?void 0:n.length)>0?{title:V.formatMessage(k.Z.selectAll,{items:(null==z?void 0:z.total)||0}),onClick:(T=(0,a.Z)(i().mark((function e(){var t,n,r,a,o,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.error(I),!I){e.next=16;break}return e.next=4,(0,v.dX)("".concat(l.Vo),{},{pathway:I.slug,limit:I.impacted_systems_count});case 4:if(e.t2=t=e.sent,e.t1=null===e.t2,e.t1){e.next=8;break}e.t1=void 0===t;case 8:if(!e.t1){e.next=12;break}e.t3=void 0,e.next=13;break;case 12:e.t3=null===(n=t.data)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.map((function(e){return e.system_uuid}));case 13:e.t0=e.t3,e.next=28;break;case 16:return e.next=18,(0,v.dX)("".concat(l.cJ).concat(encodeURI(D.rule_id),"/systems/"),{},{name:H.name});case 18:if(e.t5=a=e.sent,e.t4=null===e.t5,e.t4){e.next=22;break}e.t4=void 0===a;case 22:if(!e.t4){e.next=26;break}e.t6=void 0,e.next=27;break;case 26:e.t6=null===(o=a.data)||void 0===o?void 0:o.host_ids;case 27:e.t0=e.t6;case 28:s=e.t0,console.error(s),q(s),ce();case 32:case"end":return e.stop()}}),e)}))),function(){return T.apply(this,arguments)})}:{})],checked:(J.length===(null==z||null===(s=z.rows)||void 0===s?void 0:s.length)||J.length===(null==z?void 0:z.total))&&(null==z?void 0:z.total)>0?1:J.length===H.limit?null:0,onSelect:function(){J.length>0?G(-1,!1):ce(),ue()}},fallback:b.Z,onLoad:function(e){var t=e.mergeWithEntities,n=e.INVENTORY_ACTION_TYPES,r=e.mergeWithDetail;R.replaceReducer((0,Z.U)(S(S({},t((0,w.V)([],n),{page:Number(H.offset/H.limit+1||1),perPage:Number(H.limit||20)})),r())))},exportConfig:A&&(y={label:V.formatMessage(k.Z.exportCsv)},(0,r.Z)(y,"label",V.formatMessage(k.Z.exportJson)),(0,r.Z)(y,"onSelect",(function(e,t){var n=z.rows.map((function(e){return{display_name:e.display_name,os:"".concat(e.system_profile.operating_system.name," ").concat(e.system_profile.operating_system.major,".").concat(e.system_profile.operating_system.minor),last_seen:e.last_seen}}));return(0,P.Z)(U,t,H,j,F,N,n,L)})),(0,r.Z)(y,"isDisabled",!A||0===(null==z||null===(h=z.rows)||void 0===h?void 0:h.length)),(0,r.Z)(y,"tooltipText",A?V.formatMessage(k.Z.exportData):V.formatMessage(k.Z.permsAction)),y)}))};T.propTypes={tableProps:y().any,rule:y().object,afterDisableFn:y().func,pathway:y().object,selectedTags:y().any,workloads:y().any,SID:y().any,permsExport:y().bool,exportTable:y().string};const C=T},58392:()=>{}}]);
//# sourceMappingURL=../sourcemaps/7847.a5c98836ff05cb90352998c59e1d9452.js.map