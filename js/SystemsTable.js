(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1058:function(e,t,a){"use strict";a.r(t);var n=a(166),s=a.n(n),r=a(542),c=a.n(r),o=a(584),l=a.n(o),i=a(2),u=a.n(i),m=a(371),f=a(279),b=a.n(f),y=a(1),p=a.n(y),O=a(536),d=a.n(O),j=a(88),g=a(81),E=a(355),S=a(319),h=a(320),w=a(304),v=a(330),P=a(331),T=a(46),k=a(356),F=a(354),M=a(89),_=a(33),N=a(537),C=a(541),D=a(571),H=a(550),x=a(636),A=a(10);function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var J=function(e){var t=e.systemsFetchStatus,a=e.fetchSystems,n=e.systems,s=e.intl,r=Object(i.useState)([{title:s.formatMessage(A.a.name),transforms:[v.a]},{title:s.formatMessage(A.a.numberRuleHits),transforms:[v.a,Object(P.a)(15)]},{title:s.formatMessage(A.a.lastSeen),transforms:[v.a]}]),o=c()(r,1)[0],f=Object(i.useState)([]),b=c()(f,2),y=b[0],p=b[1],O=Object(i.useState)({}),g=c()(O,2),M=g[0],_=g[1],N=Object(i.useState)("-last_seen"),B=c()(N,2),J=B[0],R=B[1],I=Object(i.useState)(10),L=c()(I,2),q=L[0],z=L[1],G=Object(i.useState)(0),K=c()(G,2),Q=K[0],U=K[1],V=n.meta?n.meta.count:0,W=Object(i.useState)(null),X=c()(W,2),Y=X[0],Z=X[1],$=Object(x.a)(Y,800),ee=Object(i.useCallback)((function(e,t,a){var n="".concat("asc"===a?"":"-").concat({0:"display_name",1:"hits",2:"last_seen"}[t]);_({index:t,direction:a}),R(n),U(0)}),[R,_,U]),te=function(e,t){U(t*q-q)},ae=function(e,t){z(t)},ne=Object(i.useCallback)((function(){U(0)}),[]);Object(i.useEffect)((function(){null!==Y&&a(Y.length&&{display_name:Y,sort:J})}),[$]),Object(i.useEffect)((function(){a({offset:Q,limit:q,sort:J})}),[a,q,Q,J]),Object(i.useEffect)((function(){y.length||ee(null,2,"desc")}),[ee,y.length]),Object(i.useEffect)((function(){if(n.data)if(n.meta.count){var e=n.data.map((function(e,t){return[{isOpen:!1,system:e,cells:[{title:u.a.createElement(j.Link,{key:t,to:"/systems/".concat(e.system_uuid)},e.display_name)},{title:u.a.createElement("div",{key:t}," ",e.hits)},{title:u.a.createElement("div",{key:t},d()(e.last_seen).fromNow())}]}]}));p(l()(e))}else p([{cells:[{title:u.a.createElement(H.a,{icon:"none",title:s.formatMessage(A.a.systemTableNoHitsTitle),text:s.formatMessage(A.a.systemTableNoHitsEnabledRulesBody)}),props:{colSpan:5}}]}])}),[ne,s,n]);var se;return u.a.createElement(u.a.Fragment,null,u.a.createElement(m.TableToolbar,{style:{justifyContent:"space-between"}},u.a.createElement(S.a,{gutter:"md"},u.a.createElement(h.a,null,u.a.createElement(w.a,null,u.a.createElement(m.SimpleTableFilter,{buttonTitle:null,onFilterChange:Z,placeholder:s.formatMessage(A.a.search)}))))),"fulfilled"===t&&u.a.createElement(T.b,{"aria-label":"rule-table",sortBy:M,onSort:ee,cells:o,rows:y},u.a.createElement(k.a,null),u.a.createElement(F.a,null)),"pending"===t&&u.a.createElement(C.a,null),"failed"===t&&u.a.createElement(D.a,{message:s.formatMessage(A.a.systemTableFetchError)}),u.a.createElement(m.TableToolbar,null,(se="bottom",u.a.createElement(E.a,{itemCount:V,perPage:q,page:Q/q+1,onSetPage:te,onPerPageSelect:ae,widgetId:"pagination-options-menu-".concat("bottom"===se?"bottom":"top"),variant:"bottom"===se&&E.b.bottom}))))};J.propTypes={fetchSystems:p.a.func,systemsFetchStatus:p.a.string,systems:p.a.object,addNotification:p.a.func,history:p.a.object,intl:p.a.any};t.default=Object(_.c)(b()(Object(g.connect)((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(a,!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({systems:e.AdvisorStore.systems,systemsFetchStatus:e.AdvisorStore.systemsFetchStatus},t)}),(function(e){return{fetchSystems:function(t){return e(N.f(t))},addNotification:function(t){return e(Object(M.addNotification)(t))}}}))(J)))}}]);