(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1058:function(e,t,n){"use strict";var r=n(225),a=n.n(r),s=n(0);t.a=function(e,t){var n=Object(s.useState)(e),r=a()(n,2),i=r[0],c=r[1];return Object(s.useEffect)((function(){var n=setTimeout((function(){c(e)}),t);return function(){clearTimeout(n)}}),[t,e]),i}},1628:function(e,t,n){"use strict";n.r(t);var r=n(146),a=n.n(r),s=n(226),i=n.n(s),c=n(106),o=n.n(c),f=n(225),u=n.n(f),l=n(750),p=n(147),m=n(255),d=n(256),y=n(107),b=n(0),g=n.n(b),O=n(92),j=n(818),h=n(833),v=n(783),w=n(1),_=n.n(w),S=n(52),P=n(1058),E=n(235),k=n(20),T=n(12),D=n(227),N=n.n(D),R=n(234);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=function(e){var t,n,r=e.systemsFetchStatus,s=e.fetchSystems,c=e.systems,o=e.intl,f=e.filters,l=e.setFilters,w=e.selectedTags,_=Object(b.useRef)(null),S=Object(b.useState)(),k=u()(S,2),D=k[0],N=k[1],F=Object(O.useStore)(),C=c.meta?c.meta.count:0,A=Object(b.useState)(f.display_name||""),x=u()(A,2),I=x[0],L=x[1],U=Object(P.a)(I,800),J=Object(b.useState)(!0),V=u()(J,2),Y=V[0],B=V[1],H={0:"display_name",1:"hits",2:"critical_hits",3:"important_hits",4:"moderate_hits",5:"low_hits",6:"last_seen"},W=Object(b.useCallback)((function(){var e=w.length&&{tags:w.join()};s(M(M({},f),e))}),[s,f,w]),q=[{label:o.formatMessage(T.a.name),filterValues:{key:"text-filter",onChange:function(e,t){return L(t)},value:I}}],z={filters:I.length>0&&[{category:"Description",chips:[{name:I}]}]||[],onDelete:function(){return L("")}};return Object(b.useEffect)((function(){i()(a.a.mark((function e(){var t,n,r,s,i,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.loadInventory({react:g.a,reactRouterDom:y,pfReactTable:p});case 2:t=e.sent,n=t.inventoryConnector,r=t.mergeWithEntities,s=t.INVENTORY_ACTION_TYPES,Object(E.getRegistry)().register(M({},r(Object(R.c)([{title:o.formatMessage(T.a.name),transforms:[m.a],key:"display_name"},{title:o.formatMessage(T.a.numberRuleHits),transforms:[m.a,d.a(15)],key:"hits"},{title:o.formatMessage(T.a.critical),key:"critical_hits"},{title:o.formatMessage(T.a.important),key:"important_hits"},{title:o.formatMessage(T.a.moderate),key:"moderate_hits"},{title:o.formatMessage(T.a.low),key:"low_hits"},{title:o.formatMessage(T.a.lastSeen),transforms:[m.a],key:"updated"}],s)))),i=n(F),c=i.InventoryTable,N((function(){return c}));case 9:case"end":return e.stop()}}),e)})))()}),[o,F]),Object(b.useEffect)((function(){void 0===f.display_name?L(""):L(f.display_name)}),[f.display_name]),Object(b.useEffect)((function(){var e=M({},f);delete e.display_name,l(M(M(M({},e),I.length?{display_name:I}:{}),{},{offset:0}))}),[U]),Object(b.useEffect)((function(){if(window.location.search){var e=Object(j.c)();delete e.tags,void 0!==e.sort&&(e.sort=e.sort[0]),void 0!==e.display_name&&(e.display_name=e.display_name[0]),void 0===e.offset?e.offset=0:e.offset=Number(e.offset[0]),void 0===e.limit?e.limit=10:e.limit=Number(e.limit[0]),l(M(M({},f),e))}else void 0!==f.limit&&void 0!==f.offest||l(M(M({},f),{},{offset:0,limit:10}));B(!1)}),[]),Object(b.useEffect)((function(){Object(j.d)(f,w)}),[f,w]),Object(b.useEffect)((function(){!Y&&"pending"!==r&&null!==w&&W()}),[W,Y,f,w]),D?"failed"!==r?g.a.createElement(D,{ref:_,items:("pending"!==r&&c&&c.data||[]).map((function(e){return M(M({},e),{},{id:e.system_uuid})})),sortBy:(t=Number(Object.entries(H).find((function(e){return e[1]===f.sort||"-".concat(e[1])===f.sort}))[0]),n="-"===f.sort[0]?"desc":"asc",{index:t,key:2!==t?H[t]:"updated",direction:n}),onSort:function(e){var t=e.index,n=e.direction,r="".concat("asc"===n?"":"-").concat(H[t]);l(M(M({},f),{},{sort:r,offset:0}))},hasCheckbox:!1,page:f.offset/f.limit+1,total:C,isLoaded:"pending"!==r,perPage:Number(f.limit),onRefresh:function(e){if("fulfilled"===r){var t=f.offset,n=f.limit;e.page*e.per_page-e.per_page===t&&n===e.per_page||l(M(M({},f),{},{limit:e.per_page,offset:e.page*e.per_page-e.per_page}))}},filterConfig:{items:q},activeFiltersConfig:z}):"failed"===r&&g.a.createElement(h.a,{message:o.formatMessage(T.a.systemTableFetchError)}):g.a.createElement(v.a,null)};C.propTypes={fetchSystems:_.a.func,systemsFetchStatus:_.a.string,systems:_.a.object,addNotification:_.a.func,intl:_.a.any,filters:_.a.object,setFilters:_.a.func,selectedTags:_.a.array};t.default=Object(k.c)(N()(Object(O.connect)((function(e){var t=e.AdvisorStore;return{systems:t.systems,systemsFetchStatus:t.systemsFetchStatus,filters:t.filtersSystems,selectedTags:t.selectedTags}}),(function(e){return{fetchSystems:function(t){return e(l.f(t))},addNotification:function(t){return e(Object(S.addNotification)(t))},setFilters:function(t){return e(l.l(t))}}}))(C)))},818:function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return m})),n.d(t,"a",(function(){return d}));var r=n(106),a=n.n(r),s=n(225),i=n.n(s),c=n(766),o=n.n(c);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(e,t){var n=new URL(window.location),r="?".concat(Object.keys(e).map((function(t){return"".concat(t,"=").concat(Array.isArray(e[t])?e[t].join():e[t])})).join("&")),a=new URLSearchParams(r);return null!==t&&t.length?a.set("tags",t.join()):a.delete("tags"),window.history.replaceState(null,null,"".concat(n.origin).concat(n.pathname,"?").concat(a.toString())),"?".concat(r)},p=function(e){return Object.assign.apply(Object,[{}].concat(o()(Object.entries(e).map((function(e){var t=i()(e,2),n=t[0],r=t[1];return Array.isArray(r)?("true"===r[0]||"false"===r[0])&&r.length>1?null:a()({},n,r.join()):a()({},n,r)})))))},m=function(){var e=new URLSearchParams(window.location.search);return Array.from(e).reduce((function(e,t){var n=i()(t,2),r=n[0],s=n[1];return u(u({},e),{},a()({},r,"true"===s||"false"===s?JSON.parse(s):s.split(",")))}),{})},d=function(e){return e[0].toUpperCase()+e.substring(1)}}}]);
//# sourceMappingURL=SystemsTable.js.map