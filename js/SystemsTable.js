(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1104:function(e,t,a){"use strict";var n=a(148),r=a.n(n),s=a(236),o=a.n(s),i=a(799),c=a(10),l=a(247),u=function(e){var t={date:(new Date).toISOString().replace(/[T:]/g,"-").split(".")[0]+"-utc"};return"Insights-Advisor_".concat(e,"--").concat(t.date)},f=function(){var e=o()(r.a.mark((function e(t,a,n){var s,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.get("".concat(c.BASE_URL,"/export/").concat(t,".").concat("json"===a?"json":"csv").concat(n));case 3:s=e.sent,o="json"===a?JSON.stringify(s.data):s.data,Object(l.downloadFile)(o,u(t),a),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),"".concat(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n){return e.apply(this,arguments)}}();t.a=f},1246:function(e,t,a){(t=a(5)(!1)).push([e.i,".systemsPdfOverride{text-align:left !important;border-radius:0 !important}\n",""]),e.exports=t},1649:function(e,t,a){var n=a(1246);"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},s=a(7)(n,r);n.locals&&(e.exports=n.locals),e.hot.accept(1246,(function(){var t=a(1246);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var a,n=0;for(a in e){if(!t||e[a]!==t[a])return!1;n++}for(a in t)n--;return 0===n}(n.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");s(t)})),e.hot.dispose((function(){s()}))},1650:function(e,t,a){"use strict";a.r(t);var n=a(148),r=a.n(n),s=a(236),o=a.n(s),i=a(106),c=a.n(i),l=a(235),u=a.n(l),f=a(802),m=a(269),p=a(270),y=a(149),d=a(107),g=a(10),b=a(0),h=a.n(b),v=a(91),O=a(860),j=a(867),E=a(823),S=a(1),_=a.n(S),w=a(237),T=a.n(w),P=(a(1649),a(754)),C=a(8),M=a(785),k=a.n(M),R=a(786),x=a.n(R),A=a(787),I=a.n(A),F=a(13),D=C.i.create({bold:{fontWeight:k.a.value},link:{color:x.a.value},text:{marginTop:I.a.value},endColumn:{width:"100px"},hitColumn:{width:"4px"}}),N=function(e){var t=e.page,a=e.systems,n=e.intl,r=[{value:n.formatMessage(F.a.name),style:D.endColumn},{value:n.formatMessage(F.a.recommendations),style:D.hitColumn},{value:n.formatMessage(F.a.critical),style:D.hitColumn},{value:n.formatMessage(F.a.important),style:D.hitColumn},{value:n.formatMessage(F.a.moderate),style:D.hitColumn},{value:n.formatMessage(F.a.low),style:D.hitColumn},{value:n.formatMessage(F.a.lastSeen),style:D.endColumn}],s=["hits","critical_hits","important_hits","moderate_hits","low_hits"],o=function(e){var t=e.value,a=e.style;return h.a.createElement(C.j,{style:a},t)},i=T()(a.map((function(e){var t=new Date(e.last_seen).toUTCString().split(" "),a=u()(t,5),n=a[1],r=a[2],i=a[3],c=a[4],l="".concat(n," ").concat(r," ").concat(i,", ").concat(c.split(":").slice(0,2).join(":")," UTC");return[h.a.createElement(C.j,{key:e.system_uuid,style:D.endColumn},h.a.createElement(C.e,{style:D.link,src:"https://cloud.redhat.com/insights/advisor/systems/".concat(e.system_uuid,"/")},e.display_name))].concat(T()(s.map((function(t){return o({style:D.hitColumn,value:e[t]})}))),[h.a.createElement(C.j,{key:e.last_seen,style:D.endColumn},"".concat(l))])})));return h.a.createElement(h.a.Fragment,{key:t},h.a.createElement(P.c,null,h.a.createElement(P.i,{withHeader:!0,rows:[r.map((function(e){return o(e)}))].concat(T()(i))})))};N.propTypes={systems:_.a.object,page:_.a.number,intl:_.a.any};var L=function(e){var t=e.systemsTotal,a=e.systems,n=e.filters,r=e.tags,s=e.intl;return h.a.createElement(h.a.Fragment,{key:"".concat(s.formatMessage(F.a.insightsHeader),": ").concat(s.formatMessage(F.a.systems))},h.a.createElement(C.j,{key:"sys-count",style:D.text},s.formatMessage(F.a.sysTableCount,{systems:h.a.createElement(C.j,{key:"sys-count-count",style:D.bold},s.formatMessage(F.a.execReportHeaderSystems,{systems:t}))})),h.a.createElement(C.j,{key:"sys-filters",style:D.text},s.formatMessage(F.a.filtersApplied)),h.a.createElement(C.j,{key:"sys-filters-values",style:D.bold},Object.entries(n).map((function(e){return h.a.createElement(C.j,{key:e},"".concat(e[0],": ").concat(e[1]," "))}))),h.a.createElement(C.j,{key:"sys-tags",style:D.text},s.formatMessage(F.a.tagsApplied)),h.a.createElement(C.j,{key:"sys-tags-values",style:D.bold},r?decodeURIComponent(r):s.formatMessage(F.a.noTags)),h.a.createElement(P.h,{key:"systems",title:"Systems"},N({systems:a,intl:s})))};L.propTypes={systems:_.a.object,systemsTotal:_.a.number,filters:_.a.object,tags:_.a.array,intl:_.a.any};var Y=a(799),U=a(255);function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var B=function(e){var t=e.filters,a=e.selectedTags,n=e.systemsCount,s=Object(U.a)(),i=Object(b.useState)(!1),c=u()(i,2),l=c[0],f=c[1],m=function(){var e=o()(r.a.mark((function e(){var o,i,c,l,m,p;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),o=a.length&&{tags:a},e.t0=Promise,e.next=5,Y.a.get(g.SYSTEMS_FETCH_URL,{},H(H(H({},t),o),{},{limit:n}));case 5:return e.t1=e.sent.data,e.t2=[e.t1],e.next=9,e.t0.all.call(e.t0,e.t2);case 9:return i=e.sent,c=u()(i,1),l=c[0],m=L({systemsTotal:l.meta.count,systems:l.data.slice(0,10),filters:t,tags:a,intl:s}),p=l.data.slice(10,l.data.length).reduce((function(e,t,a){var n=Math.floor(a/16);return!e[n]&&(e[n]=[]),e[n].push(t),e}),[]),f(!1),e.abrupt("return",[m].concat(T()(p.map((function(e,t){return N({page:t,systems:e,intl:s})})))));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.useMemo)((function(){return h.a.createElement(P.d,{label:l?s.formatMessage(F.a.loading):s.formatMessage(F.a.exportPdf),asyncFunction:m,buttonProps:H({variant:"",component:"button",className:"pf-c-dropdown__menu-item systemsPdfOverride"},l?{isDisabled:!0}:null),reportName:"".concat(s.formatMessage(F.a.insightsHeader),":"),type:s.formatMessage(F.a.systems),fileName:"Advisor_systems--".concat((new Date).toUTCString().replace(/ /g,"-"),".pdf"),size:[841.89,595.28]})}),[l])};B.propTypes={filters:_.a.object,selectedTags:_.a.string,systemsCount:_.a.number};var J=B,V=a(51),z=a(868),W=a(1104),q=a(246),K=a(21),Q=a(238),X=a.n(Q),Z=a(245);function $(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var te=function(e){var t,a,n,s=e.systemsFetchStatus,i=e.fetchSystems,l=e.systems,f=e.intl,S=e.filters,_=e.setFilters,w=e.selectedTags,T=Object(b.useRef)(null),P=Object(b.useState)(),C=u()(P,2),M=C[0],k=C[1],R=Object(v.useStore)(),x=l.meta?l.meta.count:0,A=Object(b.useState)(S.display_name||""),I=u()(A,2),D=I[0],N=I[1],L=Object(z.a)(D,g.DEBOUNCE_DELAY),Y=Object(b.useState)(!0),U=u()(Y,2),G=U[0],H=U[1],B={0:"display_name",1:"hits",2:"critical_hits",3:"important_hits",4:"moderate_hits",5:"low_hits",6:"last_seen"},V=Object(b.useCallback)((function(){var e=w.length&&{tags:w.join()};i(ee(ee({},Object(O.b)(S)),e))}),[i,S,w]),K=function(e){var t=ee(ee({},S),{},{offset:0});"text"===e&&N(""),delete t[e],"hits"===e&&void 0===t.hits&&(t.hits=["yes"]),_(t)},Q=[{label:f.formatMessage(F.a.name),filterValues:{key:"text-filter",onChange:function(e,t){return N(t)},value:D}},{label:g.SYSTEM_FILTER_CATEGORIES.hits.title,type:g.SYSTEM_FILTER_CATEGORIES.hits.type,id:g.SYSTEM_FILTER_CATEGORIES.hits.urlParam,value:"checkbox-".concat(g.SYSTEM_FILTER_CATEGORIES.hits.urlParam),filterValues:{key:"".concat(g.SYSTEM_FILTER_CATEGORIES.hits.urlParam,"-filter"),onChange:function(e,t){return function(e,t){"hits"===e&&t.length>1&&t.includes("yes")&&t.shift(),t.length>0?_(ee(ee({},S),{},{offset:0},c()({},e,t))):K(e)}(g.SYSTEM_FILTER_CATEGORIES.hits.urlParam,t)},value:S.hits,items:g.SYSTEM_FILTER_CATEGORIES.hits.values}}],X={filters:(t=ee({},S),t.hits&&t.hits.includes("yes")&&delete t.hits,delete t.sort,delete t.offset,delete t.limit,Object(O.d)(t,g.SYSTEM_FILTER_CATEGORIES)),onDelete:function(e,t,a){a?(N(""),_({sort:S.sort,limit:S.limit,offset:S.offset,hits:["yes"]})):t.map((function(e){var t=c()({},e.urlParam,Array.isArray(S[e.urlParam])?S[e.urlParam].filter((function(t){return String(t)!==String(e.chips[0].value)})):"");t[e.urlParam].length>0?_(ee(ee({},S),t)):K(e.urlParam)}))}};return Object(b.useEffect)((function(){o()(r.a.mark((function e(){var t,a,n,s,o,i,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[{title:f.formatMessage(F.a.name),transforms:[m.a,p.a(80)],key:"display_name"},{title:f.formatMessage(F.a.numberRuleHits),transforms:[m.a,p.a(1)],key:"hits"},{title:f.formatMessage(F.a.critical),transforms:[m.a,p.a(1)],key:"critical_hits"},{title:f.formatMessage(F.a.important),transforms:[m.a,p.a(1)],key:"important_hits"},{title:f.formatMessage(F.a.moderate),transforms:[m.a,p.a(1)],key:"moderate_hits"},{title:f.formatMessage(F.a.low),transforms:[m.a,p.a(1)],key:"low_hits"},{title:f.formatMessage(F.a.lastSeen),transforms:[m.a,p.a(10)],key:"updated"}],e.next=3,insights.loadInventory({react:h.a,reactRouterDom:d,pfReactTable:y});case 3:a=e.sent,n=a.inventoryConnector,s=a.mergeWithEntities,o=a.INVENTORY_ACTION_TYPES,Object(q.getRegistry)().register(ee({},s(Object(Z.c)([].concat(t),o)))),i=n(R),c=i.InventoryTable,k((function(){return c}));case 10:case"end":return e.stop()}}),e)})))()}),[f,R]),Object(b.useEffect)((function(){void 0===S.display_name?N(""):N(S.display_name)}),[S.display_name]),Object(b.useEffect)((function(){if(!G&&"pending"!==s){var e=ee({},S);delete e.display_name,_(ee(ee(ee({},e),D.length?{display_name:D}:{}),{},{offset:0}))}}),[L]),Object(b.useEffect)((function(){if(window.location.search){var e=Object(O.c)();delete e.tags,void 0!==e.sort&&(e.sort=e.sort[0]),void 0!==e.display_name&&(e.display_name=e.display_name[0]),void 0===e.hits&&(e.hits=["yes"]),void 0===e.offset?e.offset=0:e.offset=Number(e.offset[0]),void 0===e.limit?e.limit=10:e.limit=Number(e.limit[0]),_(ee(ee({},S),e))}else void 0!==S.limit&&void 0!==S.offset&&void 0!==S.hits||_(ee(ee({},S),{},{offset:0,limit:10,hits:["yes"]}));H(!1)}),[]),Object(b.useEffect)((function(){Object(O.e)(S,w)}),[S,w]),Object(b.useEffect)((function(){!G&&"pending"!==s&&null!==w&&V()}),[V,G,S,w]),M?"failed"!==s?h.a.createElement(M,{ref:T,items:("pending"!==s&&l&&l.data||[]).map((function(e){return ee(ee({},e),{},{id:e.system_uuid})})),sortBy:(a=Number(Object.entries(B).find((function(e){return e[1]===S.sort||"-".concat(e[1])===S.sort}))[0]),n="-"===S.sort[0]?"desc":"asc",{index:a,key:6!==a?B[a]:"updated",direction:n}),onSort:function(e){var t=e.index,a=e.direction,n="".concat("asc"===a?"":"-").concat(B[t]);_(ee(ee({},S),{},{sort:n,offset:0}))},hasCheckbox:!1,page:S.offset/S.limit+1,total:x,isLoaded:"pending"!==s,perPage:Number(S.limit),onRefresh:function(e){if("fulfilled"===s){var t=S.offset,a=S.limit;e.page*e.per_page-e.per_page===t&&a===e.per_page||_(ee(ee({},S),{},{limit:e.per_page,offset:e.page*e.per_page-e.per_page}))}},filterConfig:{items:Q},activeFiltersConfig:X,exportConfig:{onSelect:function(e,t){return Object(W.a)("systems",t,Object(O.e)(S,w))},extraItems:[h.a.createElement("li",{key:"download-pd",role:"menuitem"},h.a.createElement(J,{filters:ee({},Object(O.b)(S)),selectedTags:w.join(),systemsCount:l&&l.meta&&l.meta.count}))]}}):"failed"===s&&h.a.createElement(j.a,{message:f.formatMessage(F.a.systemTableFetchError)}):h.a.createElement(E.a,null)};te.propTypes={fetchSystems:_.a.func,systemsFetchStatus:_.a.string,systems:_.a.object,addNotification:_.a.func,intl:_.a.any,filters:_.a.object,setFilters:_.a.func,selectedTags:_.a.array};t.default=Object(K.c)(X()(Object(v.connect)((function(e){var t=e.AdvisorStore;return{systems:t.systems,systemsFetchStatus:t.systemsFetchStatus,filters:t.filtersSystems,selectedTags:t.selectedTags}}),(function(e){return{fetchSystems:function(t){return e(f.f(t))},addNotification:function(t){return e(Object(V.addNotification)(t))},setFilters:function(t){return e(f.l(t))}}}))(te)))},860:function(e,t,a){"use strict";a.d(t,"e",(function(){return f})),a.d(t,"b",(function(){return m})),a.d(t,"c",(function(){return p})),a.d(t,"a",(function(){return y})),a.d(t,"d",(function(){return d}));var n=a(106),r=a.n(n),s=a(235),o=a.n(s),i=a(237),c=a.n(i);function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f=function(e,t){var a=new URL(window.location),n="".concat(Object.keys(e).map((function(t){return"".concat(t,"=").concat(Array.isArray(e[t])?e[t].join():e[t])})).join("&")),r=new URLSearchParams(n);return null!==t&&t.length?r.set("tags",t.join()):r.delete("tags"),window.history.replaceState(null,null,"".concat(a.origin).concat(a.pathname,"?").concat(r.toString())),"?".concat(n)},m=function(e){return Object.assign.apply(Object,[{}].concat(c()(Object.entries(e).map((function(e){var t=o()(e,2),a=t[0],n=t[1];return Array.isArray(n)?("true"===n[0]||"false"===n[0])&&n.length>1?null:r()({},a,n.join()):r()({},a,n)})))))},p=function(){var e=new URLSearchParams(window.location.search);return Array.from(e).reduce((function(e,t){var a=o()(t,2),n=a[0],s=a[1];return u(u({},e),{},r()({},n,"true"===s||"false"===s?JSON.parse(s):s.split(",")))}),{})},y=function(e){return e[0].toUpperCase()+e.substring(1)},d=function(e,t){var a=Object.entries(e);return a.length>0?a.map((function(e){if(t[e[0]]){var a=t[e[0]],n=Array.isArray(e[1])?e[1].map((function(e){var t=a.values.find((function(t){return t.value===String(e)}));return t?{name:t.text||t.label,value:e}:{name:e,value:e}})):[{name:a.values.find((function(t){return t.value===String(e[1])})).label,value:e[1]}];return{category:y(a.title),chips:n,urlParam:a.urlParam}}return{category:"Description",chips:[{name:e[1],value:e[1]}],urlParam:e[0]}})):[]}},867:function(e,t,a){"use strict";var n=a(108),r=a(109),s=a(150),o=a(752),i=a.n(o),c=a(0),l=a.n(c),u=a(1),f=a.n(u),m=function(e){var t=e.message;return l.a.createElement(l.a.Fragment,null,l.a.createElement(n.Card,{className:"ins-empty-rule-cards"},l.a.createElement(s.CardHeader,null,l.a.createElement(i.a,{size:"lg"})),l.a.createElement(r.CardBody,null,t)))};t.a=m,m.propTypes={message:f.a.string}}}]);
//# sourceMappingURL=SystemsTable.js.map