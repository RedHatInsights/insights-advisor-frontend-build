(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1173:function(e,t,a){"use strict";var r=a(208),n=a.n(r),s=a(300),o=a.n(s),i=a(868),c=a(11),l=a(309),u=function(e){var t={date:(new Date).toISOString().replace(/[T:]/g,"-").split(".")[0]+"-utc"};return"Insights-Advisor_".concat(e,"--").concat(t.date)},f=function(){var e=o()(n.a.mark((function e(t,a,r){var s,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.get("".concat(c.BASE_URL,"/export/").concat(t,".").concat("json"===a?"json":"csv").concat(r));case 3:s=e.sent,o="json"===a?JSON.stringify(s.data):s.data,Object(l.downloadFile)(o,u(t),a),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),"".concat(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,r){return e.apply(this,arguments)}}();t.a=f},1317:function(e,t,a){(t=a(9)(!1)).push([e.i,".pf-c-table__sort-indicator{margin-left:var(--pf-global--spacer--xs)}.pf-c-table th,td{padding-right:0px !important}.pf-c-table tr>:last-child{padding-left:var(--pf-global--spacer--xs)}.pf-c-table .pf-c-table__sort{min-width:initial}\n",""]),e.exports=t},1318:function(e,t,a){(t=a(9)(!1)).push([e.i,".systemsPdfOverride{text-align:left !important;border-radius:0 !important}\n",""]),e.exports=t},1718:function(e,t,a){var r=a(1317);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0},s=a(14)(r,n);r.locals&&(e.exports=r.locals),e.hot.accept(1317,(function(){var t=a(1317);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var a,r=0;for(a in e){if(!t||e[a]!==t[a])return!1;r++}for(a in t)r--;return 0===r}(r.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");s(t)})),e.hot.dispose((function(){s()}))},1719:function(e,t,a){var r=a(1318);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0},s=a(14)(r,n);r.locals&&(e.exports=r.locals),e.hot.accept(1318,(function(){var t=a(1318);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var a,r=0;for(a in e){if(!t||e[a]!==t[a])return!1;r++}for(a in t)r--;return 0===r}(r.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");s(t)})),e.hot.dispose((function(){s()}))},1720:function(e,t,a){"use strict";a.r(t);var r=a(208),n=a.n(r),s=a(300),o=a.n(s),i=a(153),c=a.n(i),l=a(299),u=a.n(l),f=(a(1718),a(871)),m=a(85),p=a(334),y=a(335),d=a(91),g=a(157),b=a(154),h=a(826),v=a(11),O=a(0),j=a.n(O),E=a(930),S=a(937),w=a(893),_=a(13),T=a.n(_),P=a(302),x=a.n(P),M=(a(1719),a(819)),k=a(7),C=a(349),R=a.n(C),A=a(348),I=a.n(A),D=a(350),F=a.n(D),N=a(347),L=a.n(N),Y=a(420),U=a.n(Y),H=a(850),G=a.n(H),B=a(851),J=a.n(B),z=a(12);function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var q=k.i.create({bold:{fontWeight:U.a.value},link:{color:G.a.value},text:{marginTop:J.a.value},nameColumn:{width:"220px"},header:{fontSize:9,color:L.a.value,paddingLeft:I.a.value,paddingBottom:R.a.value,paddingTop:F.a.value}}),K=function(e){var t=e.page,a=e.systems,r=e.intl,n=[{value:r.formatMessage(z.a.name),style:q.nameColumn},{value:r.formatMessage(z.a.recommendations),style:{width:"100px",textAlign:"center"}},{value:r.formatMessage(z.a.critical),style:{width:"70px",textAlign:"center"}},{value:r.formatMessage(z.a.important),style:{width:"70px",textAlign:"center"}},{value:r.formatMessage(z.a.moderate),style:{width:"60px",textAlign:"center"}},{value:r.formatMessage(z.a.low),style:{width:"90px",textAlign:"center"}},{value:r.formatMessage(z.a.lastSeen),style:{marginLeft:"20px"}}],s=["hits","critical_hits","important_hits","moderate_hits","low_hits"],o=x()(a.map((function(e){var t=new Date(e.last_seen).toUTCString().split(" "),a=u()(t,5),r=a[1],n=a[2],o=a[3],i=a[4],c="".concat(r," ").concat(n," ").concat(o,", ").concat(i.split(":").slice(0,2).join(":")," UTC");return[j.a.createElement(k.j,{key:e.system_uuid,style:q.nameColumn},j.a.createElement(k.e,{style:q.link,src:"https://cloud.redhat.com/insights/advisor/systems/".concat(e.system_uuid,"/")},e.display_name))].concat(x()(s.map((function(t){return a={style:{width:"10px"},value:e[t]},r=a.value,n=a.style,j.a.createElement(k.j,{style:n},r);var a,r,n}))),[j.a.createElement(k.j,{key:e.last_seen,style:{width:"100px"}},"".concat(c))])})));return j.a.createElement(j.a.Fragment,{key:t},j.a.createElement(M.b,null,j.a.createElement(M.i,{withHeader:!0,rows:[n.map((function(e){return a=(t=e).value,r=t.style,j.a.createElement(k.j,{style:W(W(W({},r),q.header),q.bold)},a);var t,a,r}))].concat(x()(o))})))};K.propTypes={systems:T.a.object,page:T.a.number,intl:T.a.any};var Q=function(e){var t=e.systemsTotal,a=e.systems,r=e.filters,n=e.tags,s=e.intl;return delete r.offset,delete r.limit,j.a.createElement(j.a.Fragment,{key:"".concat(s.formatMessage(z.a.insightsHeader),": ").concat(s.formatMessage(z.a.systems))},j.a.createElement(k.j,{key:"sys-count",style:q.text},s.formatMessage(z.a.sysTableCount,{systems:j.a.createElement(k.j,{key:"sys-count-count",style:q.bold},s.formatMessage(z.a.execReportHeaderSystems,{systems:t}))})),j.a.createElement(k.j,{key:"sys-filters",style:q.text},s.formatMessage(z.a.filtersApplied)),j.a.createElement(k.j,{key:"sys-filters-values",style:q.bold},Object.entries(r).map((function(e){return j.a.createElement(k.j,{key:e},"".concat(e[0],": ").concat(e[1],"     "))}))),j.a.createElement(k.j,{key:"sys-tags",style:q.text},s.formatMessage(z.a.tagsApplied)),j.a.createElement(k.j,{key:"sys-tags-values",style:q.bold},n?decodeURIComponent(n):s.formatMessage(z.a.noTags)),j.a.createElement(M.h,{key:"systems",title:"Systems"},K({systems:a,intl:s})))};Q.propTypes={systems:T.a.object,systemsTotal:T.a.number,filters:T.a.object,tags:T.a.array,intl:T.a.any};var X=a(868),Z=a(318);function $(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var te=function(e){var t=e.filters,a=e.selectedTags,r=e.systemsCount,s=Object(Z.a)(),i=Object(O.useState)(!1),c=u()(i,2),l=c[0],f=c[1],m=function(){var e=o()(n.a.mark((function e(){var o,i,c,l,m,p;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),o=a.length&&{tags:a},e.t0=Promise,e.next=5,X.a.get(v.SYSTEMS_FETCH_URL,{},ee(ee(ee({},t),o),{},{limit:r}));case 5:return e.t1=e.sent.data,e.t2=[e.t1],e.next=9,e.t0.all.call(e.t0,e.t2);case 9:return i=e.sent,c=u()(i,1),l=c[0],m=Q({systemsTotal:l.meta.count,systems:l.data.slice(0,18),filters:t,tags:a,intl:s}),p=l.data.slice(18,l.data.length).reduce((function(e,t,a){var r=Math.floor(a/26);return!e[r]&&(e[r]=[]),e[r].push(t),e}),[]),f(!1),e.abrupt("return",[m].concat(x()(p.map((function(e,t){return K({page:t,systems:e,intl:s})})))));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.useMemo)((function(){return j.a.createElement(M.c,{label:l?s.formatMessage(z.a.loading):s.formatMessage(z.a.exportPdf),asyncFunction:m,buttonProps:ee({variant:"",component:"button",className:"pf-c-dropdown__menu-item systemsPdfOverride"},l?{isDisabled:!0}:null),reportName:"".concat(s.formatMessage(z.a.insightsHeader),":"),type:s.formatMessage(z.a.systems),fileName:"Advisor_systems--".concat((new Date).toUTCString().replace(/ /g,"-"),".pdf"),size:[841.89,595.28]})}),[l])};te.propTypes={filters:T.a.object,selectedTags:T.a.string,systemsCount:T.a.number};var ae=te,re=a(86),ne=a(899),se=a(1173),oe=a(308),ie=a(32),ce=a(301),le=a.n(ce),ue=a(307);function fe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function me(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var pe=function(e){var t,a,r,s=e.systemsFetchStatus,i=e.fetchSystems,l=e.systems,f=e.intl,_=e.filters,T=e.setFilters,P=e.selectedTags,x=Object(O.useRef)(null),M=Object(O.useState)(),k=u()(M,2),C=k[0],R=k[1],A=Object(m.useStore)(),I=l.meta?l.meta.count:0,D=Object(O.useState)(_.display_name||""),F=u()(D,2),N=F[0],L=F[1],Y=Object(ne.a)(N,v.DEBOUNCE_DELAY),U=Object(O.useState)(!0),H=u()(U,2),G=H[0],B=H[1],J={0:"display_name",1:"hits",2:"critical_hits",3:"important_hits",4:"moderate_hits",5:"low_hits",6:"last_seen"},V=Object(O.useCallback)((function(){var e=P.length&&{tags:P&&P.join()};i(me(me({},Object(E.b)(_)),e))}),[i,_,P]),W=function(e){var t=me(me({},_),{},{offset:0});"text"===e&&L(""),delete t[e],"hits"===e&&void 0===t.hits&&(t.hits=["yes"]),T(t)},q=[{label:f.formatMessage(z.a.name),filterValues:{key:"text-filter",onChange:function(e,t){return L(t)},value:N}},{label:v.SYSTEM_FILTER_CATEGORIES.hits.title,type:v.SYSTEM_FILTER_CATEGORIES.hits.type,id:v.SYSTEM_FILTER_CATEGORIES.hits.urlParam,value:"checkbox-".concat(v.SYSTEM_FILTER_CATEGORIES.hits.urlParam),filterValues:{key:"".concat(v.SYSTEM_FILTER_CATEGORIES.hits.urlParam,"-filter"),onChange:function(e,t){return function(e,t){"hits"===e&&t.length>1&&t.includes("yes")&&t.shift(),t.length>0?T(me(me({},_),{},{offset:0},c()({},e,t))):W(e)}(v.SYSTEM_FILTER_CATEGORIES.hits.urlParam,t)},value:_.hits,items:v.SYSTEM_FILTER_CATEGORIES.hits.values}}],K={filters:(t=me({},_),t.hits&&t.hits.includes("yes")&&delete t.hits,delete t.sort,delete t.offset,delete t.limit,Object(E.d)(t,v.SYSTEM_FILTER_CATEGORIES)),onDelete:function(e,t,a){a?(L(""),T({sort:_.sort,limit:_.limit,offset:_.offset,hits:["yes"]})):t.map((function(e){var t=c()({},e.urlParam,Array.isArray(_[e.urlParam])?_[e.urlParam].filter((function(t){return String(t)!==String(e.chips[0].value)})):"");t[e.urlParam].length>0?T(me(me({},_),t)):W(e.urlParam)}))}};return Object(O.useEffect)((function(){o()(n.a.mark((function e(){var t,a,r,s,o,i,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[{title:f.formatMessage(z.a.name),transforms:[p.a,y.a(80)],key:"display_name"},{title:f.formatMessage(z.a.numberRuleHits),transforms:[p.a,d.e],key:"hits"},{title:f.formatMessage(z.a.critical),transforms:[p.a,d.e],key:"critical_hits"},{title:f.formatMessage(z.a.important),transforms:[p.a,d.e],key:"important_hits"},{title:f.formatMessage(z.a.moderate),transforms:[p.a,d.e],key:"moderate_hits"},{title:f.formatMessage(z.a.low),transforms:[p.a,d.e],key:"low_hits"},{title:f.formatMessage(z.a.lastSeen),transforms:[p.a,d.e],key:"updated"}],e.next=3,insights.loadInventory({ReactRedux:m,react:j.a,reactRouterDom:b,pfReactTable:g,pfReact:h.reactCore});case 3:a=e.sent,r=a.inventoryConnector,s=a.mergeWithEntities,o=a.INVENTORY_ACTION_TYPES,Object(oe.getRegistry)().register(me({},s(Object(ue.c)([].concat(t),o)))),i=r(A),c=i.InventoryTable,R((function(){return c}));case 10:case"end":return e.stop()}}),e)})))()}),[f,A]),Object(O.useEffect)((function(){void 0===_.display_name?L(""):L(_.display_name)}),[_.display_name]),Object(O.useEffect)((function(){if(!G&&"pending"!==s){var e=me({},_);delete e.display_name,T(me(me(me({},e),N.length?{display_name:N}:{}),{},{offset:0}))}}),[Y]),Object(O.useEffect)((function(){if(window.location.search){var e=Object(E.c)();delete e.tags,void 0!==e.sort&&(e.sort=e.sort[0]),void 0!==e.display_name&&(e.display_name=e.display_name[0]),void 0===e.hits&&(e.hits=["yes"]),void 0===e.offset?e.offset=0:e.offset=Number(e.offset[0]),void 0===e.limit?e.limit=10:e.limit=Number(e.limit[0]),T(me(me({},_),e))}else void 0!==_.limit&&void 0!==_.offset&&void 0!==_.hits||T(me(me({},_),{},{offset:0,limit:10,hits:["yes"]}));B(!1)}),[]),Object(O.useEffect)((function(){Object(E.e)(_,P)}),[_,P]),Object(O.useEffect)((function(){!G&&"pending"!==s&&null!==P&&V()}),[V,G,_,P]),C?"failed"!==s?j.a.createElement(C,{ref:x,items:("pending"!==s&&l&&l.data||[]).map((function(e){return me(me({},e),{},{id:e.system_uuid})})),sortBy:(a=Number(Object.entries(J).find((function(e){return e[1]===_.sort||"-".concat(e[1])===_.sort}))[0]),r="-"===_.sort[0]?"desc":"asc",{index:a,key:6!==a?J[a]:"updated",direction:r}),onSort:function(e){var t=e.index,a=e.direction,r="".concat("asc"===a?"":"-").concat(J[t]);T(me(me({},_),{},{sort:r,offset:0}))},hasCheckbox:!1,page:_.offset/_.limit+1,total:I,isLoaded:"pending"!==s,perPage:Number(_.limit),onRefresh:function(e){if("fulfilled"===s){var t=_.offset,a=_.limit;e.page*e.per_page-e.per_page===t&&a===e.per_page||T(me(me({},_),{},{limit:e.per_page,offset:e.page*e.per_page-e.per_page}))}},filterConfig:{items:q},activeFiltersConfig:K,exportConfig:{onSelect:function(e,t){return Object(se.a)("systems",t,Object(E.e)(_,P))},extraItems:[j.a.createElement("li",{key:"download-pd",role:"menuitem"},j.a.createElement(ae,{filters:me({},Object(E.b)(_)),selectedTags:P&&P.join(),systemsCount:l&&l.meta&&l.meta.count}))]}}):"failed"===s&&j.a.createElement(S.a,{message:f.formatMessage(z.a.systemTableFetchError)}):j.a.createElement(w.a,null)};pe.propTypes={fetchSystems:T.a.func,systemsFetchStatus:T.a.string,systems:T.a.object,addNotification:T.a.func,intl:T.a.any,filters:T.a.object,setFilters:T.a.func,selectedTags:T.a.array};t.default=Object(ie.c)(le()(Object(m.connect)((function(e){var t=e.AdvisorStore;return{systems:t.systems,systemsFetchStatus:t.systemsFetchStatus,filters:t.filtersSystems,selectedTags:t.selectedTags}}),(function(e){return{fetchSystems:function(t){return e(f.f(t))},addNotification:function(t){return e(Object(re.addNotification)(t))},setFilters:function(t){return e(f.l(t))}}}))(pe)))},930:function(e,t,a){"use strict";a.d(t,"e",(function(){return f})),a.d(t,"b",(function(){return m})),a.d(t,"c",(function(){return p})),a.d(t,"a",(function(){return y})),a.d(t,"d",(function(){return d}));var r=a(153),n=a.n(r),s=a(299),o=a.n(s),i=a(302),c=a.n(i);function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){n()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f=function(e,t){var a=new URL(window.location),r="".concat(Object.keys(e).map((function(t){return"".concat(t,"=").concat(Array.isArray(e[t])?e[t].join():e[t])})).join("&")),n=new URLSearchParams(r);return null!==t&&t.length?n.set("tags",t.join()):n.delete("tags"),window.history.replaceState(null,null,"".concat(a.origin).concat(a.pathname,"?").concat(n.toString())),"?".concat(r)},m=function(e){return Object.assign.apply(Object,[{}].concat(c()(Object.entries(e).map((function(e){var t=o()(e,2),a=t[0],r=t[1];return Array.isArray(r)?("true"===r[0]||"false"===r[0])&&r.length>1?null:n()({},a,r.join()):n()({},a,r)})))))},p=function(){var e=new URLSearchParams(window.location.search);return Array.from(e).reduce((function(e,t){var a=o()(t,2),r=a[0],s=a[1];return u(u({},e),{},n()({},r,"true"===s||"false"===s?JSON.parse(s):s.split(",")))}),{})},y=function(e){return e[0].toUpperCase()+e.substring(1)},d=function(e,t){var a=Object.entries(e);return a.length>0?a.map((function(e){if(t[e[0]]){var a=t[e[0]],r=Array.isArray(e[1])?e[1].map((function(e){var t=a.values.find((function(t){return t.value===String(e)}));return t?{name:t.text||t.label,value:e}:{name:e,value:e}})):[{name:a.values.find((function(t){return t.value===String(e[1])})).label,value:e[1]}];return{category:y(a.title),chips:r,urlParam:a.urlParam}}return{category:"Name",chips:[{name:e[1],value:e[1]}],urlParam:e[0]}})):[]}},937:function(e,t,a){"use strict";var r=a(155),n=a(156),s=a(213),o=a(817),i=a.n(o),c=a(0),l=a.n(c),u=a(13),f=a.n(u),m=function(e){var t=e.message;return l.a.createElement(l.a.Fragment,null,l.a.createElement(r.Card,{className:"ins-empty-rule-cards"},l.a.createElement(s.CardHeader,null,l.a.createElement(i.a,{size:"lg"})),l.a.createElement(n.CardBody,null,t)))};t.a=m,m.propTypes={message:f.a.string}}}]);
//# sourceMappingURL=SystemsTable.js.map