(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1047:function(e,t,a){"use strict";a.r(t);var n=a(162),s=a.n(n),r=a(534),c=a.n(r),o=a(572),i=a.n(o),l=a(2),u=a.n(l),f=a(359),m=a(270),b=a.n(m),p=a(1),y=a.n(p),O=a(524),g=a.n(O),d=a(88),j=a(81),S=a(343),E=a(318),h=a(319),v=a(46),w=a(344),P=a(342),k=a(89),T=a(31),C=a(527),M=a(530),_=a(559),F=a(538),N=a(626),D=a(33);function H(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var x=function(e){var t=e.systemsFetchStatus,a=e.fetchSystems,n=e.systems,s=e.intl,r=Object(l.useState)([{title:s.formatMessage(D.a.name),transforms:[E.a]},{title:s.formatMessage(D.a.numberRuleHits),transforms:[E.a,Object(h.a)(15)]},{title:s.formatMessage(D.a.lastSeen),transforms:[E.a]}]),o=c()(r,1)[0],m=Object(l.useState)([]),b=c()(m,2),p=b[0],y=b[1],O=Object(l.useState)({}),j=c()(O,2),k=j[0],T=j[1],C=Object(l.useState)("-last_seen"),H=c()(C,2),x=H[0],A=H[1],B=Object(l.useState)(10),J=c()(B,2),R=J[0],I=J[1],L=Object(l.useState)(0),V=c()(L,2),q=V[0],z=V[1],G=n.meta?n.meta.count:0,K=Object(l.useState)(null),Q=c()(K,2),U=Q[0],W=Q[1],X=Object(N.a)(U,800),Y=Object(l.useCallback)((function(e,t,a){var n="".concat("asc"===a?"":"-").concat({0:"display_name",1:"hits",2:"last_seen"}[t]);T({index:t,direction:a}),A(n),z(0)}),[A,T,z]),Z=function(e){z(e*R-R)},$=Object(l.useCallback)((function(){z(0)}),[]);Object(l.useEffect)((function(){null!==U&&a(U.length&&{display_name:U,sort:x})}),[X]),Object(l.useEffect)((function(){a({offset:q,limit:R,sort:x})}),[a,R,q,x]),Object(l.useEffect)((function(){!p.length&&Y(null,2,"desc")}),[Y,p.length]),Object(l.useEffect)((function(){if(n.data)if(n.meta.count){var e=n.data.map((function(e,t){return[{isOpen:!1,system:e,cells:[{title:u.a.createElement(d.Link,{key:t,to:"/systems/".concat(e.system_uuid)},e.display_name)},{title:u.a.createElement("div",{key:t}," ",e.hits)},{title:u.a.createElement("div",{key:t},g()(e.last_seen).fromNow())}]}]}));y(i()(e))}else y([{cells:[{title:u.a.createElement(F.a,{icon:"none",title:s.formatMessage(D.a.systemTableNoHitsTitle),text:s.formatMessage(D.a.systemTableNoHitsEnabledRulesBody)}),props:{colSpan:5}}]}])}),[$,s,n]);var ee=[{label:s.formatMessage(D.a.name),filterValues:{onChange:function(e,t){return W(t)},value:U}}];return u.a.createElement(u.a.Fragment,null,u.a.createElement(f.PrimaryToolbar,{pagination:{itemCount:G,page:q/R+1,perPage:R,onSetPage:function(e,t){Z(t)},onPerPageSelect:function(e,t){I(t)},isCompact:!1},filterConfig:{items:ee}}),"fulfilled"===t&&u.a.createElement(v.b,{"aria-label":"rule-table",sortBy:k,onSort:Y,cells:o,rows:p},u.a.createElement(w.a,null),u.a.createElement(P.a,null)),"pending"===t&&u.a.createElement(M.a,null),"failed"===t&&u.a.createElement(_.a,{message:s.formatMessage(D.a.systemTableFetchError)}),u.a.createElement(f.TableToolbar,null,u.a.createElement(S.a,{itemCount:G,perPage:R,page:q/R+1,onSetPage:function(e,t){Z(t)},widgetId:"pagination-options-menu-bottom",variant:S.b.bottom})))};x.propTypes={fetchSystems:y.a.func,systemsFetchStatus:y.a.string,systems:y.a.object,addNotification:y.a.func,history:y.a.object,intl:y.a.any};t.default=Object(T.c)(b()(Object(j.connect)((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?H(a,!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):H(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({systems:e.AdvisorStore.systems,systemsFetchStatus:e.AdvisorStore.systemsFetchStatus},t)}),(function(e){return{fetchSystems:function(t){return e(C.f(t))},addNotification:function(t){return e(Object(k.addNotification)(t))}}}))(x)))}}]);