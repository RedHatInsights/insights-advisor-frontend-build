(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{504:function(e,t,a){"use strict";var n=a(91),s=a(92),r=a(161),o=a(683),i=a.n(o),c=a(0),l=a.n(c),f=a(1),u=a.n(f),m=function(e){var t=e.message;return l.a.createElement(l.a.Fragment,null,l.a.createElement(n.Card,{className:"ins-empty-rule-cards"},l.a.createElement(r.CardHeader,null,l.a.createElement(i.a,{size:"lg"})),l.a.createElement(s.CardBody,null,t)))};t.a=m,m.propTypes={message:u.a.string}},683:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FrownOpenIconConfig=void 0;var n,s=(n=a(6))&&n.__esModule?n:{default:n};var r={name:"FrownOpenIcon",height:512,width:496,svgPath:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zM136 208c0-17.7 14.3-32 32-32s32 14.3 32 32-14.3 32-32 32-32-14.3-32-32zm187.3 183.3c-31.2-9.6-59.4-15.3-75.3-15.3s-44.1 5.7-75.3 15.3c-11.5 3.5-22.5-6.3-20.5-18.1 7-40 60.1-61.2 95.8-61.2s88.8 21.3 95.8 61.2c2 11.9-9.1 21.6-20.5 18.1zM328 240c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z",yOffset:"",xOffset:"",transform:""};t.FrownOpenIconConfig=r;var o=(0,s.default)(r);t.default=o},875:function(e,t,a){"use strict";a.r(t);var n=a(89),s=a.n(n),r=a(156),o=a.n(r),i=a(411),c=a(94),l=a(0),f=a.n(l),u=a(204),m=a(205),d=a(21),p=a(210),y=a(209),b=a(673),g=a(462),O=a(504),j=a(57),v=a(454),E=a(455),h=a(661),S=a(1),w=a.n(S),P=a(237),_=a.n(P),M=a(507),F=a(36),C=a(56),k=a(674),D=a(12),T=a(10),x=a(158),z=a.n(x);function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var I=function(e){var t=e.systemsFetchStatus,a=e.fetchSystems,n=e.systems,s=e.intl,r=e.filters,i=e.setFilters,S=e.history,w=Object(l.useState)([{title:s.formatMessage(T.a.name),transforms:[u.a]},{title:s.formatMessage(T.a.numberRuleHits),transforms:[u.a,Object(m.a)(15)]},{title:s.formatMessage(T.a.lastSeen),transforms:[u.a]}]),P=o()(w,1)[0],F=Object(l.useState)([]),C=o()(F,2),D=C[0],x=C[1],z=Object(l.useState)({}),N=o()(z,2),I=N[0],A=N[1],B=Object(l.useState)(10),L=o()(B,2),J=L[0],V=L[1],R=Object(l.useState)(0),q=o()(R,2),G=q[0],K=q[1],Q=n.meta?n.meta.count:0,U=Object(l.useState)(r.display_name||""),W=o()(U,2),X=W[0],Y=W[1],Z=Object(k.a)(X,800),$=Object(l.useState)(!0),ee=o()($,2),te=ee[0],ae=ee[1],ne={0:"display_name",1:"hits",2:"last_seen"},se=function(e){K(e*J-J)};Object(l.useEffect)((function(){void 0===r.display_name?Y(""):Y(r.display_name)}),[r.display_name]),Object(l.useEffect)((function(){var e=H({},r),t=X.length?{display_name:X}:{};delete e.display_name,i(H({},e,{},t))}),[Z]),Object(l.useEffect)((function(){if(S.location.search){var e=Object(b.b)(S);void 0!==e.sort&&(e.sort=e.sort[0]),void 0!==e.display_name&&(e.display_name=e.display_name[0]),i(H({},e))}ae(!1)}),[]),Object(l.useEffect)((function(){Object(b.c)(r,S)}),[r,S]),Object(l.useEffect)((function(){if(void 0!==r.sort){var e=Number(Object.entries(ne).find((function(e){return e[1]===r.sort||"-".concat(e[1])===r.sort}))[0]),t="-"===r.sort[0]?"desc":"asc";A({index:e,direction:t})}}),[r.sort]),Object(l.useEffect)((function(){te||a(H({offset:G,limit:J},r))}),[a,J,G,r,te]),Object(l.useEffect)((function(){if(n.data)if(n.meta.count){var e=n.data.flatMap((function(e,t){return[{isOpen:!1,system:e,cells:[{title:f.a.createElement(j.Link,{key:t,to:"/rules/systems/".concat(e.system_uuid)},e.display_name)},{title:f.a.createElement("div",{key:t}," ",e.hits)},{title:f.a.createElement(g.DateFormat,{key:t,date:e.last_seen,variant:"relative"})}]}]}));x(e.asMutable())}else x([{cells:[{title:f.a.createElement(E.a,{icon:_.a,title:s.formatMessage(T.a.noHitsTitle,{item:s.formatMessage(T.a.systems).toLowerCase()}),text:s.formatMessage(T.a.noHitsBody,{item:s.formatMessage(T.a.systems).toLowerCase()})}),props:{colSpan:5}}]}])}),[s,n]);var re=[{label:s.formatMessage(T.a.name),filterValues:{key:"text-filter",onChange:function(e,t){return Y(t)},value:X}}],oe={filters:X.length>0&&[{category:"Description",chips:[{name:X}]}]||[],onDelete:function(){return Y("")}};return f.a.createElement(f.a.Fragment,null,f.a.createElement(h.PrimaryToolbar,{pagination:{itemCount:Q,page:G/J+1,perPage:J,onSetPage:function(e,t){se(t)},onPerPageSelect:function(e,t){V(t)},isCompact:!1},filterConfig:{items:re},activeFiltersConfig:oe}),"fulfilled"===t&&f.a.createElement(d.b,{"aria-label":"rule-table",sortBy:I,onSort:function(e,t,a){var n="".concat("asc"===a?"":"-").concat(ne[t]);A({index:t,direction:a}),i(H({},r,{sort:n})),K(0)},cells:P,rows:D},f.a.createElement(p.a,null),f.a.createElement(y.a,null)),"pending"===t&&f.a.createElement(v.a,null),"failed"===t&&f.a.createElement(O.a,{message:s.formatMessage(T.a.systemTableFetchError)}),f.a.createElement(M.TableToolbar,null,f.a.createElement(c.Pagination,{itemCount:Q,perPage:J,page:G/J+1,onSetPage:function(e,t){se(t)},widgetId:"pagination-options-menu-bottom",variant:c.PaginationVariant.bottom})))};I.propTypes={fetchSystems:w.a.func,systemsFetchStatus:w.a.string,systems:w.a.object,addNotification:w.a.func,history:w.a.object,intl:w.a.any,filters:w.a.object,setFilters:w.a.func};t.default=Object(D.c)(z()(Object(C.connect)((function(e,t){return H({systems:e.AdvisorStore.systems,systemsFetchStatus:e.AdvisorStore.systemsFetchStatus,filters:e.AdvisorStore.filtersSystems},t)}),(function(e){return{fetchSystems:function(t){return e(i.h(t))},addNotification:function(t){return e(Object(F.addNotification)(t))},setFilters:function(t){return e(i.n(t))}}}))(I)))}}]);
//# sourceMappingURL=SystemsTable.js.map