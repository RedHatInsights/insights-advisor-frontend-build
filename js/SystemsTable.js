(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1065:function(e,t,n){"use strict";var r=n(226),a=n.n(r),s=n(0);t.a=function(e,t){var n=Object(s.useState)(e),r=a()(n,2),i=r[0],c=r[1];return Object(s.useEffect)((function(){var n=setTimeout((function(){c(e)}),t);return function(){clearTimeout(n)}}),[t,e]),i}},1066:function(e,t,n){"use strict";var r=n(147),a=n.n(r),s=n(227),i=n.n(s),c=n(760),o=n(9),u=n(238),l=function(e){var t={date:(new Date).toISOString().replace(/[T:]/g,"-").split(".")[0]+"-utc"};return"Insights-Advisor_".concat(e,"--").concat(t.date)},f=function(){var e=i()(a.a.mark((function e(t,n,r){var s,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.get("".concat(o.BASE_URL,"/export/").concat(t,".").concat("json"===n?"json":"csv").concat(r));case 3:s=e.sent,i="json"===n?JSON.stringify(s.data):s.data,Object(u.downloadFile)(i,l(t),n),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),"".concat(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n,r){return e.apply(this,arguments)}}();t.a=f},1614:function(e,t,n){"use strict";n.r(t);var r=n(147),a=n.n(r),s=n(227),i=n.n(s),c=n(104),o=n.n(c),u=n(226),l=n.n(u),f=n(761),m=n(259),p=n(260),d=n(148),y=n(105),b=n(0),g=n.n(b),O=n(91),h=n(822),v=n(830),j=n(782),S=n(1),E=n.n(S),_=n(9),w=n(51),T=n(1065),P=n(1066),R=n(237),C=n(20),I=n(12),k=n(229),A=n.n(k),F=n(236);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L=function(e){var t,n,r,s,c=e.systemsFetchStatus,u=e.fetchSystems,f=e.systems,S=e.intl,E=e.filters,w=e.setFilters,C=e.selectedTags,k=Object(b.useRef)(null),A=Object(b.useState)(),M=l()(A,2),L=M[0],N=M[1],D=Object(O.useStore)(),Y=f.meta?f.meta.count:0,G=Object(b.useState)(E.display_name||""),J=l()(G,2),U=J[0],B=J[1],V=Object(T.a)(U,800),H=Object(b.useState)(!0),z=l()(H,2),W=z[0],q=z[1],K={0:"display_name",1:"hits",2:"critical_hits",3:"important_hits",4:"moderate_hits",5:"low_hits",6:"last_seen"},Q=Object(b.useCallback)((function(){var e=C.length&&{tags:C.join()};u(x(x({},Object(h.b)(E)),e))}),[u,E,C]),X=function(e){var t=x(x({},E),{},{offset:0});"text"===e&&B(""),delete t[e],"hits"===e&&void 0===t.hits&&(t.hits=["yes"]),w(t)},Z=[{label:S.formatMessage(I.a.name),filterValues:{key:"text-filter",onChange:function(e,t){return B(t)},value:U}},{label:_.SYSTEM_FILTER_CATEGORIES.hits.title,type:_.SYSTEM_FILTER_CATEGORIES.hits.type,id:_.SYSTEM_FILTER_CATEGORIES.hits.urlParam,value:"checkbox-".concat(_.SYSTEM_FILTER_CATEGORIES.hits.urlParam),filterValues:{key:"".concat(_.SYSTEM_FILTER_CATEGORIES.hits.urlParam,"-filter"),onChange:function(e,t){return function(e,t){"hits"===e&&t.length>1&&t.includes("yes")&&t.shift(),t.length>0?w(x(x({},E),{},{offset:0},o()({},e,t))):X(e)}(_.SYSTEM_FILTER_CATEGORIES.hits.urlParam,t)},value:E.hits,items:_.SYSTEM_FILTER_CATEGORIES.hits.values}}],$={filters:(n=x({},E),n.hits&&n.hits.includes("yes")&&delete n.hits,delete n.sort,delete n.offset,delete n.limit,Object(h.d)(n,_.SYSTEM_FILTER_CATEGORIES)),onDelete:function(e,t,n){n?(B(""),w({sort:E.sort,limit:E.limit,offset:E.offset,hits:["yes"]})):t.map((function(e){var t=o()({},e.urlParam,Array.isArray(E[e.urlParam])?E[e.urlParam].filter((function(t){return String(t)!==String(e.chips[0].value)})):"");t[e.urlParam].length>0?w(x(x({},E),t)):X(e.urlParam)}))}};return Object(b.useEffect)((function(){i()(a.a.mark((function e(){var t,n,r,s,i,c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[{title:S.formatMessage(I.a.name),transforms:[m.a,p.a(90)],key:"display_name"},{title:S.formatMessage(I.a.numberRuleHits),transforms:[m.a,p.a(1)],key:"hits"},{title:S.formatMessage(I.a.critical),transforms:[m.a,p.a(1)],key:"critical_hits"},{title:S.formatMessage(I.a.important),transforms:[m.a,p.a(1)],key:"important_hits"},{title:S.formatMessage(I.a.moderate),transforms:[m.a,p.a(1)],key:"moderate_hits"},{title:S.formatMessage(I.a.low),transforms:[m.a,p.a(1)],key:"low_hits"},{title:S.formatMessage(I.a.lastSeen),transforms:[m.a,p.a(1)],key:"updated"}],e.next=3,insights.loadInventory({react:g.a,reactRouterDom:y,pfReactTable:d});case 3:n=e.sent,r=n.inventoryConnector,s=n.mergeWithEntities,i=n.INVENTORY_ACTION_TYPES,Object(R.getRegistry)().register(x({},s(Object(F.c)([].concat(t),i)))),c=r(D),o=c.InventoryTable,N((function(){return o}));case 10:case"end":return e.stop()}}),e)})))()}),[S,D]),Object(b.useEffect)((function(){void 0===E.display_name?B(""):B(E.display_name)}),[E.display_name]),Object(b.useEffect)((function(){var e=x({},E);delete e.display_name,w(x(x(x({},e),U.length?{display_name:U}:{}),{},{offset:0}))}),[V]),Object(b.useEffect)((function(){if(window.location.search){var e=Object(h.c)();delete e.tags,void 0!==e.sort&&(e.sort=e.sort[0]),void 0!==e.display_name&&(e.display_name=e.display_name[0]),void 0===e.hits&&(e.hits=["yes"]),void 0===e.offset?e.offset=0:e.offset=Number(e.offset[0]),void 0===e.limit?e.limit=10:e.limit=Number(e.limit[0]),w(x(x({},E),e))}else void 0!==E.limit&&void 0!==E.offset&&void 0!==E.hits||w(x(x({},E),{},{offset:0,limit:10,hits:["yes"]}));q(!1)}),[]),Object(b.useEffect)((function(){Object(h.e)(E,C)}),[E,C]),Object(b.useEffect)((function(){!W&&"pending"!==c&&null!==C&&Q()}),[Q,W,E,C]),L?"failed"!==c?g.a.createElement(L,{ref:k,items:("pending"!==c&&f&&f.data||[]).map((function(e){return x(x({},e),{},{id:e.system_uuid})})),sortBy:(r=Number(Object.entries(K).find((function(e){return e[1]===E.sort||"-".concat(e[1])===E.sort}))[0]),s="-"===E.sort[0]?"desc":"asc",{index:r,key:6!==r?K[r]:"updated",direction:s}),onSort:function(e){var t=e.index,n=e.direction,r="".concat("asc"===n?"":"-").concat(K[t]);w(x(x({},E),{},{sort:r,offset:0}))},hasCheckbox:!1,page:E.offset/E.limit+1,total:Y,isLoaded:"pending"!==c,perPage:Number(E.limit),onRefresh:function(e){if("fulfilled"===c){var t=E.offset,n=E.limit;e.page*e.per_page-e.per_page===t&&n===e.per_page||w(x(x({},E),{},{limit:e.per_page,offset:e.page*e.per_page-e.per_page}))}},filterConfig:{items:Z},activeFiltersConfig:$,exportConfig:(t={label:S.formatMessage(I.a.exportCsv)},o()(t,"label",S.formatMessage(I.a.exportJson)),o()(t,"onSelect",(function(e,t){return Object(P.a)("systems",t,Object(h.e)(E,C))})),t)}):"failed"===c&&g.a.createElement(v.a,{message:S.formatMessage(I.a.systemTableFetchError)}):g.a.createElement(j.a,null)};L.propTypes={fetchSystems:E.a.func,systemsFetchStatus:E.a.string,systems:E.a.object,addNotification:E.a.func,intl:E.a.any,filters:E.a.object,setFilters:E.a.func,selectedTags:E.a.array};t.default=Object(C.c)(A()(Object(O.connect)((function(e){var t=e.AdvisorStore;return{systems:t.systems,systemsFetchStatus:t.systemsFetchStatus,filters:t.filtersSystems,selectedTags:t.selectedTags}}),(function(e){return{fetchSystems:function(t){return e(f.f(t))},addNotification:function(t){return e(Object(w.addNotification)(t))},setFilters:function(t){return e(f.l(t))}}}))(L)))},822:function(e,t,n){"use strict";n.d(t,"e",(function(){return f})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return y}));var r=n(104),a=n.n(r),s=n(226),i=n.n(s),c=n(228),o=n.n(c);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(e,t){var n=new URL(window.location),r="".concat(Object.keys(e).map((function(t){return"".concat(t,"=").concat(Array.isArray(e[t])?e[t].join():e[t])})).join("&")),a=new URLSearchParams(r);return null!==t&&t.length?a.set("tags",t.join()):a.delete("tags"),window.history.replaceState(null,null,"".concat(n.origin).concat(n.pathname,"?").concat(a.toString())),"?".concat(r)},m=function(e){return Object.assign.apply(Object,[{}].concat(o()(Object.entries(e).map((function(e){var t=i()(e,2),n=t[0],r=t[1];return Array.isArray(r)?("true"===r[0]||"false"===r[0])&&r.length>1?null:a()({},n,r.join()):a()({},n,r)})))))},p=function(){var e=new URLSearchParams(window.location.search);return Array.from(e).reduce((function(e,t){var n=i()(t,2),r=n[0],s=n[1];return l(l({},e),{},a()({},r,"true"===s||"false"===s?JSON.parse(s):s.split(",")))}),{})},d=function(e){return e[0].toUpperCase()+e.substring(1)},y=function(e,t){var n=Object.entries(e);return n.length>0?n.map((function(e){if(t[e[0]]){var n=t[e[0]],r=Array.isArray(e[1])?e[1].map((function(e){var t=n.values.find((function(t){return t.value===String(e)}));return{name:t.text||t.label,value:e}})):[{name:n.values.find((function(t){return t.value===String(e[1])})).label,value:e[1]}];return{category:d(n.title),chips:r,urlParam:n.urlParam}}return{category:"Description",chips:[{name:e[1],value:e[1]}],urlParam:e[0]}})):[]}},830:function(e,t,n){"use strict";var r=n(106),a=n(107),s=n(149),i=n(715),c=n.n(i),o=n(0),u=n.n(o),l=n(1),f=n.n(l),m=function(e){var t=e.message;return u.a.createElement(u.a.Fragment,null,u.a.createElement(r.Card,{className:"ins-empty-rule-cards"},u.a.createElement(s.CardHeader,null,u.a.createElement(c.a,{size:"lg"})),u.a.createElement(a.CardBody,null,t)))};t.a=m,m.propTypes={message:f.a.string}}}]);
//# sourceMappingURL=SystemsTable.js.map