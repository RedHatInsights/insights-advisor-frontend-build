(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1065:function(t,e,n){"use strict";var r=n(226),a=n.n(r),s=n(0);e.a=function(t,e){var n=Object(s.useState)(t),r=a()(n,2),c=r[0],o=r[1];return Object(s.useEffect)((function(){var n=setTimeout((function(){o(t)}),e);return function(){clearTimeout(n)}}),[e,t]),c}},1066:function(t,e,n){"use strict";var r=n(147),a=n.n(r),s=n(227),c=n.n(s),o=n(756),i=n(9),f=n(237),u=function(t){var e={date:(new Date).toISOString().replace(/[T:]/g,"-").split(".")[0]+"-utc"};return"Insights-Advisor_".concat(t,"--").concat(e.date)},l=function(){var t=c()(a.a.mark((function t(e,n,r){var s,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.get("".concat(i.BASE_URL,"/export/").concat(e,".").concat("json"===n?"json":"csv").concat(r));case 3:s=t.sent,c="json"===n?JSON.stringify(s.data):s.data,Object(f.downloadFile)(c,u(e),n),t.next=11;break;case 8:throw t.prev=8,t.t0=t.catch(0),"".concat(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n,r){return t.apply(this,arguments)}}();e.a=l},1614:function(t,e,n){"use strict";n.r(e);var r=n(147),a=n.n(r),s=n(227),c=n.n(s),o=n(104),i=n.n(o),f=n(226),u=n.n(f),l=n(757),p=n(148),m=n(256),d=n(257),b=n(105),y=n(0),g=n.n(y),O=n(91),j=n(825),h=n(840),v=n(782),w=n(1),S=n.n(w),_=n(51),P=n(1065),k=n(1066),E=n(236),T=n(20),x=n(12),D=n(228),N=n.n(D),M=n(235);function R(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?R(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var F=function(t){var e,n,r,s=t.systemsFetchStatus,o=t.fetchSystems,f=t.systems,l=t.intl,w=t.filters,S=t.setFilters,_=t.selectedTags,T=Object(y.useRef)(null),D=Object(y.useState)(),N=u()(D,2),R=N[0],F=N[1],A=Object(O.useStore)(),I=f.meta?f.meta.count:0,J=Object(y.useState)(w.display_name||""),L=u()(J,2),U=L[0],B=L[1],V=Object(P.a)(U,800),Y=Object(y.useState)(!0),H=u()(Y,2),W=H[0],q=H[1],z={0:"display_name",1:"hits",2:"critical_hits",3:"important_hits",4:"moderate_hits",5:"low_hits",6:"last_seen"},G=Object(y.useCallback)((function(){var t=_.length&&{tags:_.join()};o(C(C({},w),t))}),[o,w,_]),K=[{label:l.formatMessage(x.a.name),filterValues:{key:"text-filter",onChange:function(t,e){return B(e)},value:U}}],Q={filters:U.length>0&&[{category:"Description",chips:[{name:U}]}]||[],onDelete:function(){return B("")}};return Object(y.useEffect)((function(){c()(a.a.mark((function t(){var e,n,r,s,c,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,insights.loadInventory({react:g.a,reactRouterDom:b,pfReactTable:p});case 2:e=t.sent,n=e.inventoryConnector,r=e.mergeWithEntities,s=e.INVENTORY_ACTION_TYPES,Object(E.getRegistry)().register(C({},r(Object(M.c)([{title:l.formatMessage(x.a.name),transforms:[m.a],key:"display_name"},{title:l.formatMessage(x.a.numberRuleHits),transforms:[m.a,d.a(15)],key:"hits"},{title:l.formatMessage(x.a.critical),transforms:[m.a],key:"critical_hits"},{title:l.formatMessage(x.a.important),transforms:[m.a],key:"important_hits"},{title:l.formatMessage(x.a.moderate),transforms:[m.a],key:"moderate_hits"},{title:l.formatMessage(x.a.low),transforms:[m.a],key:"low_hits"},{title:l.formatMessage(x.a.lastSeen),transforms:[m.a],key:"updated"}],s)))),c=n(A),o=c.InventoryTable,F((function(){return o}));case 9:case"end":return t.stop()}}),t)})))()}),[l,A]),Object(y.useEffect)((function(){void 0===w.display_name?B(""):B(w.display_name)}),[w.display_name]),Object(y.useEffect)((function(){var t=C({},w);delete t.display_name,S(C(C(C({},t),U.length?{display_name:U}:{}),{},{offset:0}))}),[V]),Object(y.useEffect)((function(){if(window.location.search){var t=Object(j.c)();delete t.tags,void 0!==t.sort&&(t.sort=t.sort[0]),void 0!==t.display_name&&(t.display_name=t.display_name[0]),void 0===t.offset?t.offset=0:t.offset=Number(t.offset[0]),void 0===t.limit?t.limit=10:t.limit=Number(t.limit[0]),S(C(C({},w),t))}else void 0!==w.limit&&void 0!==w.offest||S(C(C({},w),{},{offset:0,limit:10}));q(!1)}),[]),Object(y.useEffect)((function(){Object(j.d)(w,_)}),[w,_]),Object(y.useEffect)((function(){!W&&"pending"!==s&&null!==_&&G()}),[G,W,w,_]),R?"failed"!==s?g.a.createElement(R,{ref:T,items:("pending"!==s&&f&&f.data||[]).map((function(t){return C(C({},t),{},{id:t.system_uuid})})),sortBy:(n=Number(Object.entries(z).find((function(t){return t[1]===w.sort||"-".concat(t[1])===w.sort}))[0]),r="-"===w.sort[0]?"desc":"asc",{index:n,key:6!==n?z[n]:"updated",direction:r}),onSort:function(t){var e=t.index,n=t.direction,r="".concat("asc"===n?"":"-").concat(z[e]);S(C(C({},w),{},{sort:r,offset:0}))},hasCheckbox:!1,page:w.offset/w.limit+1,total:I,isLoaded:"pending"!==s,perPage:Number(w.limit),onRefresh:function(t){if("fulfilled"===s){var e=w.offset,n=w.limit;t.page*t.per_page-t.per_page===e&&n===t.per_page||S(C(C({},w),{},{limit:t.per_page,offset:t.page*t.per_page-t.per_page}))}},filterConfig:{items:K},activeFiltersConfig:Q,exportConfig:(e={label:l.formatMessage(x.a.exportCsv)},i()(e,"label",l.formatMessage(x.a.exportJson)),i()(e,"onSelect",(function(t,e){return Object(k.a)("systems",e,Object(j.d)(w,_))})),e)}):"failed"===s&&g.a.createElement(h.a,{message:l.formatMessage(x.a.systemTableFetchError)}):g.a.createElement(v.a,null)};F.propTypes={fetchSystems:S.a.func,systemsFetchStatus:S.a.string,systems:S.a.object,addNotification:S.a.func,intl:S.a.any,filters:S.a.object,setFilters:S.a.func,selectedTags:S.a.array};e.default=Object(T.c)(N()(Object(O.connect)((function(t){var e=t.AdvisorStore;return{systems:e.systems,systemsFetchStatus:e.systemsFetchStatus,filters:e.filtersSystems,selectedTags:e.selectedTags}}),(function(t){return{fetchSystems:function(e){return t(l.f(e))},addNotification:function(e){return t(Object(_.addNotification)(e))},setFilters:function(e){return t(l.l(e))}}}))(F)))},825:function(t,e,n){"use strict";n.d(e,"d",(function(){return l})),n.d(e,"b",(function(){return p})),n.d(e,"c",(function(){return m})),n.d(e,"a",(function(){return d}));var r=n(104),a=n.n(r),s=n(226),c=n.n(s),o=n(773),i=n.n(o);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var l=function(t,e){var n=new URL(window.location),r="".concat(Object.keys(t).map((function(e){return"".concat(e,"=").concat(Array.isArray(t[e])?t[e].join():t[e])})).join("&")),a=new URLSearchParams(r);return null!==e&&e.length?a.set("tags",e.join()):a.delete("tags"),window.history.replaceState(null,null,"".concat(n.origin).concat(n.pathname,"?").concat(a.toString())),"?".concat(r)},p=function(t){return Object.assign.apply(Object,[{}].concat(i()(Object.entries(t).map((function(t){var e=c()(t,2),n=e[0],r=e[1];return Array.isArray(r)?("true"===r[0]||"false"===r[0])&&r.length>1?null:a()({},n,r.join()):a()({},n,r)})))))},m=function(){var t=new URLSearchParams(window.location.search);return Array.from(t).reduce((function(t,e){var n=c()(e,2),r=n[0],s=n[1];return u(u({},t),{},a()({},r,"true"===s||"false"===s?JSON.parse(s):s.split(",")))}),{})},d=function(t){return t[0].toUpperCase()+t.substring(1)}}}]);
//# sourceMappingURL=SystemsTable.js.map