(self.webpackChunkadvisor_frontend=self.webpackChunkadvisor_frontend||[]).push([[3993],{87211:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(94015),r=s.n(a),n=s(23645),i=s.n(n)()(r());i.push([e.id,".advisor .systemsPdfOverride{text-align:left !important;border-radius:0 !important}\n","",{version:3,sources:["webpack://./src/PresentationalComponents/Export/_Export.scss"],names:[],mappings:"AAAA,6BAA6B,0BAA0B,CAAC,0BAA0B",sourcesContent:[".advisor .systemsPdfOverride{text-align:left !important;border-radius:0 !important}\n"],sourceRoot:""}]);const o=i},11860:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(94015),r=s.n(a),n=s(23645),i=s.n(n)()(r());i.push([e.id,".advisor .pf-c-table__sort-indicator{margin-left:var(--pf-global--spacer--xs)}.pf-c-table th,td{padding-right:0px !important}.pf-c-table tr>:last-child{padding-left:var(--pf-global--spacer--xs)}.pf-c-table .pf-c-table__sort{min-width:initial}table.ins-c-entity-table.pf-c-table .ins-composed-col *{font-size:var(--pf-global--FontSize--md)}\n","",{version:3,sources:["webpack://./src/PresentationalComponents/SystemsTable/SystemsTable.scss"],names:[],mappings:"AAAA,qCAAqC,wCAAwC,CAAC,kBAAkB,4BAA4B,CAAC,2BAA2B,yCAAyC,CAAC,8BAA8B,iBAAiB,CAAC,wDAAwD,wCAAwC",sourcesContent:[".advisor .pf-c-table__sort-indicator{margin-left:var(--pf-global--spacer--xs)}.pf-c-table th,td{padding-right:0px !important}.pf-c-table tr>:last-child{padding-left:var(--pf-global--spacer--xs)}.pf-c-table .pf-c-table__sort{min-width:initial}table.ins-c-entity-table.pf-c-table .ins-composed-col *{font-size:var(--pf-global--FontSize--md)}\n"],sourceRoot:""}]);const o=i},96166:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>se});var a=s(59713),r=s.n(a),n=s(63038),i=s.n(n),o=(s(14704),s(64169)),l=s(83984),c=s(20999),f=s(97522),u=s.n(f),m=s(26042),p=s(59900),d=s(33739),y=s(82141),g=s(45697),b=s.n(g),v=s(87757),h=s.n(v),E=s(319),_=s.n(E),A=s(48926),O=s.n(A),S=(s(6972),s(58141)),w=s(89736),T=s(51634),x=s(39080),C=s(87119),P=s(75442),k=s(23992),j=s(71712),Z=s(32412),M=s(18623);function D(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function R(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?D(Object(s),!0).forEach((function(t){r()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):D(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var F=w.mM.create({bold:{fontWeight:k.default.value},link:{color:j.ZP.value},text:{marginTop:Z.ZP.value},nameColumn:{width:"220px"},header:{fontSize:9,color:P.ZP.value,paddingLeft:x.ZP.value,paddingBottom:T.ZP.value,paddingTop:C.ZP.value}}),I=function(e){var t=e.page,s=e.systems,a=e.intl,r=[{value:a.formatMessage(M.Z.name),style:F.nameColumn},{value:a.formatMessage(M.Z.recommendations),style:{width:"100px",textAlign:"center"}},{value:a.formatMessage(M.Z.critical),style:{width:"70px",textAlign:"center"}},{value:a.formatMessage(M.Z.important),style:{width:"70px",textAlign:"center"}},{value:a.formatMessage(M.Z.moderate),style:{width:"60px",textAlign:"center"}},{value:a.formatMessage(M.Z.low),style:{width:"90px",textAlign:"center"}},{value:a.formatMessage(M.Z.lastSeen),style:{marginLeft:"20px"}}],n=["hits","critical_hits","important_hits","moderate_hits","low_hits"],o=_()(s.map((function(e){var t=new Date(e.last_seen).toUTCString().split(" "),s=i()(t,5),a=s[1],r=s[2],o=s[3],l=s[4],c="".concat(a," ").concat(r," ").concat(o,", ").concat(l.split(":").slice(0,2).join(":")," UTC");return[u().createElement(w.xv,{key:e.system_uuid,style:F.nameColumn},u().createElement(w.rU,{style:F.link,src:"https://cloud.redhat.com/insights/advisor/systems/".concat(e.system_uuid,"/")},e.display_name))].concat(_()(n.map((function(t){return a=(s={style:{width:"10px"},value:e[t]}).value,r=s.style,u().createElement(w.xv,{style:r},a);var s,a,r}))),[u().createElement(w.xv,{key:e.last_seen,style:{width:"100px"}},"".concat(c))])})));return u().createElement(u().Fragment,{key:t},u().createElement(S.sg,null,u().createElement(S.iA,{withHeader:!0,rows:[r.map((function(e){return s=(t=e).value,a=t.style,u().createElement(w.xv,{style:R(R(R({},a),F.header),F.bold)},s);var t,s,a}))].concat(_()(o))})))};I.propTypes={systems:b().object,page:b().number,intl:b().any};var B=function(e){var t=e.systemsTotal,s=e.systems,a=e.filters,r=e.tags,n=e.intl;return delete a.offset,delete a.limit,u().createElement(u().Fragment,{key:"".concat(n.formatMessage(M.Z.insightsHeader),": ").concat(n.formatMessage(M.Z.systems))},u().createElement(w.xv,{key:"sys-count",style:F.text},n.formatMessage(M.Z.sysTableCount,{systems:u().createElement(w.xv,{key:"sys-count-count",style:F.bold},n.formatMessage(M.Z.execReportHeaderSystems,{systems:t}))})),u().createElement(w.xv,{key:"sys-filters",style:F.text},n.formatMessage(M.Z.filtersApplied)),u().createElement(w.xv,{key:"sys-filters-values",style:F.bold},Object.entries(a).map((function(e){return u().createElement(w.xv,{key:e},"".concat(e[0],": ").concat(e[1],"     "))}))),u().createElement(w.xv,{key:"sys-tags",style:F.text},n.formatMessage(M.Z.tagsApplied)),u().createElement(w.xv,{key:"sys-tags-values",style:F.bold},r?decodeURIComponent(r):n.formatMessage(M.Z.noTags)),u().createElement(S.$0,{key:"systems",title:"Systems"},I({systems:s,intl:n})))};B.propTypes={systems:b().object,systemsTotal:b().number,filters:b().object,tags:b().array,intl:b().any};var L=s(37802),N=s(86896);function Y(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function G(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(s),!0).forEach((function(t){r()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Y(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var H=function(e){var t=e.filters,s=e.selectedTags,a=e.systemsCount,r=(0,N.Z)(),n=(0,f.useState)(!1),o=i()(n,2),l=o[0],m=o[1],p=function(){var e=O()(h().mark((function e(){var n,o,l,f,u,p;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),n=s.length&&{tags:s},e.t0=Promise,e.next=5,L.Z.get(c.SYSTEMS_FETCH_URL,{},G(G(G({},t),n),{},{limit:a}));case 5:return e.t1=e.sent.data,e.t2=[e.t1],e.next=9,e.t0.all.call(e.t0,e.t2);case 9:return o=e.sent,l=i()(o,1),f=l[0],u=B({systemsTotal:f.meta.count,systems:f.data.slice(0,18),filters:t,tags:s,intl:r}),p=f.data.slice(18,f.data.length).reduce((function(e,t,s){var a=Math.floor(s/31);return!e[a]&&(e[a]=[]),e[a].push(t),e}),[]),m(!1),e.abrupt("return",[u].concat(_()(p.map((function(e,t){return I({page:t,systems:e,intl:r})})))));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,f.useMemo)((function(){return u().createElement(S.o6,{allPagesHaveTitle:!1,label:l?r.formatMessage(M.Z.loading):r.formatMessage(M.Z.exportPdf),asyncFunction:p,buttonProps:G({variant:"",component:"button",className:"pf-c-dropdown__menu-item systemsPdfOverride"},l?{isDisabled:!0}:null),reportName:"".concat(r.formatMessage(M.Z.insightsHeader),":"),type:r.formatMessage(M.Z.systems),fileName:"Advisor_systems--".concat((new Date).toUTCString().replace(/ /g,"-"),".pdf"),size:[841.89,595.28]})}),[l])};H.propTypes={filters:b().object,selectedTags:b().string,systemsCount:b().number};const U=H;var z=s(70892),V=s(86588),W=s(40050),q=s(24405),J=s(67336),K=s(36873),$=s(70856),Q=s(43707);function X(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function ee(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?X(Object(s),!0).forEach((function(t){r()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):X(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var te=function(e){var t,s,a,n=e.systemsFetchStatus,o=e.fetchSystems,g=e.systems,b=e.filters,v=e.setFilters,h=e.selectedTags,E=e.workloads,_=e.SID,A=(0,N.Z)(),O=(0,Q.T)("advisor",c.PERMS.export).hasAccess,S=(0,f.useRef)(null),w=g.meta?g.meta.count:0,T=(0,f.useState)(b.display_name||""),x=i()(T,2),C=x[0],P=x[1],k=(0,W.Z)(C,c.DEBOUNCE_DELAY),j=(0,f.useState)(!0),Z=i()(j,2),D=Z[0],R=Z[1],F={0:"display_name",1:"hits",2:"critical_hits",3:"important_hits",4:"moderate_hits",5:"low_hits",6:"last_seen"},I=(0,f.useCallback)((function(){var e=h.length&&{tags:h};E&&(e=ee(ee({},e),(0,m.s0)(E,_))),o(ee(ee({},(0,m.qW)(b)),e))}),[o,b,h,E,_]),B=function(e){var t=ee(ee({},b),{},{offset:0});"text"===e&&P(""),delete t[e],"hits"===e&&void 0===t.hits&&(t.hits=["yes"]),v(t)},L=[{label:A.formatMessage(M.Z.name),filterValues:{key:"text-filter",onChange:function(e,t){return P(t)},value:C}},{label:c.SYSTEM_FILTER_CATEGORIES.hits.title,type:c.SYSTEM_FILTER_CATEGORIES.hits.type,id:c.SYSTEM_FILTER_CATEGORIES.hits.urlParam,value:"checkbox-".concat(c.SYSTEM_FILTER_CATEGORIES.hits.urlParam),filterValues:{key:"".concat(c.SYSTEM_FILTER_CATEGORIES.hits.urlParam,"-filter"),onChange:function(e,t){return function(e,t){"hits"===e&&t.length>1&&t.includes("yes")&&t.shift(),t.length>0?v(ee(ee({},b),{},{offset:0},r()({},e,t))):B(e)}(c.SYSTEM_FILTER_CATEGORIES.hits.urlParam,t)},value:b.hits,items:c.SYSTEM_FILTER_CATEGORIES.hits.values}}],Y={filters:(t=ee({},b),t.hits&&t.hits.includes("yes")&&delete t.hits,delete t.sort,delete t.offset,delete t.limit,(0,m.yK)(t,c.SYSTEM_FILTER_CATEGORIES)),onDelete:function(e,t,s){s?(P(""),v({sort:b.sort,limit:b.limit,offset:b.offset,hits:["yes"]})):t.map((function(e){var t=r()({},e.urlParam,Array.isArray(b[e.urlParam])?b[e.urlParam].filter((function(t){return String(t)!==String(e.chips[0].value)})):"");t[e.urlParam].length>0?v(ee(ee({},b),t)):B(e.urlParam)}))}};return(0,f.useEffect)((function(){void 0===b.display_name?P(""):P(b.display_name)}),[b.display_name]),(0,f.useEffect)((function(){if(!D&&"pending"!==n){var e=ee({},b);delete e.display_name,v(ee(ee(ee({},e),C.length?{display_name:C}:{}),{},{offset:0}))}}),[k]),(0,f.useEffect)((function(){if(window.location.search){var e=(0,m.yG)();delete e.tags,void 0!==e.sort&&(e.sort=e.sort[0]),void 0!==e.display_name&&(e.display_name=e.display_name[0]),void 0===e.hits&&(e.hits=["all"]),void 0===e.offset?e.offset=0:e.offset=Number(e.offset[0]),void 0===e.limit?e.limit=10:e.limit=Number(e.limit[0]),v(ee(ee({},b),e))}else void 0!==b.limit&&void 0!==b.offset&&void 0!==b.hits||v(ee(ee({},b),{},{offset:0,limit:10,hits:["all"]}));R(!1)}),[]),(0,f.useEffect)((function(){(0,m.Y4)(b,h,E)}),[b,h,E]),(0,f.useEffect)((function(){!D&&"pending"!==n&&null!==h&&I()}),[I,D,b,h]),"failed"!==n?u().createElement(d.Z,{ref:S,items:("pending"!==n&&g&&g.data||[]).map((function(e){return ee(ee({},e),{},{id:e.system_uuid})})),isFullView:!0,sortBy:(s=Number(Object.entries(F).find((function(e){return e[1]===b.sort||"-".concat(e[1])===b.sort}))[0]),a="-"===b.sort[0]?"desc":"asc",{index:s,key:6!==s?F[s]:"updated",direction:a}),onSort:function(e){var t=e.index,s=e.direction,a="".concat("asc"===s?"":"-").concat(F[t]);v(ee(ee({},b),{},{sort:a,offset:0}))},hasCheckbox:!1,page:b.offset/b.limit+1,total:w,isLoaded:"pending"!==n,perPage:Number(b.limit),onRefresh:function(e){if("fulfilled"===n){var t=b.offset,s=b.limit;e.page*e.per_page-e.per_page===t&&s===e.per_page||v(ee(ee({},b),{},{limit:e.per_page,offset:e.page*e.per_page-e.per_page}))}},filterConfig:{items:L},activeFiltersConfig:Y,exportConfig:{onSelect:function(e,t){return(0,q.Z)("systems",t,(0,m.Y4)(b,h))},extraItems:[u().createElement("li",{key:"download-pd",role:"menuitem"},u().createElement(U,{filters:ee({},(0,m.qW)(b)),selectedTags:h,systemsCount:g&&g.meta&&g.meta.count}))],isDisabled:!O,tooltipText:O?A.formatMessage(M.Z.exportData):A.formatMessage(M.Z.permsAction)},fallback:y.Z,onLoad:function(e){var t=e.mergeWithEntities,s=e.INVENTORY_ACTION_TYPES,a=[{title:A.formatMessage(M.Z.name),transforms:[l.sortable,l.cellWidth(80)],key:"display_name"},{title:A.formatMessage(M.Z.numberRuleHits),transforms:[l.sortable,l.wrappable],key:"hits"},{title:A.formatMessage(M.Z.critical),transforms:[l.sortable,l.wrappable],key:"critical_hits"},{title:A.formatMessage(M.Z.important),transforms:[l.sortable,l.wrappable],key:"important_hits"},{title:A.formatMessage(M.Z.moderate),transforms:[l.sortable,l.wrappable],key:"moderate_hits"},{title:A.formatMessage(M.Z.low),transforms:[l.sortable,l.wrappable],key:"low_hits"},{title:A.formatMessage(M.Z.lastSeen),transforms:[l.sortable,l.wrappable],key:"updated"}];(0,J.JH)().register(ee({},t((0,$.Vy)([].concat(a),s))))}}):"failed"===n&&u().createElement(p.Z,{message:A.formatMessage(M.Z.systemTableFetchError)})};te.propTypes={fetchSystems:b().func,systemsFetchStatus:b().string,systems:b().object,addNotification:b().func,filters:b().object,setFilters:b().func,selectedTags:b().array,workloads:b().object,SID:b().object};const se=(0,K.Z)((0,V.connect)((function(e){var t=e.AdvisorStore;return{systems:t.systems,systemsFetchStatus:t.systemsFetchStatus,filters:t.filtersSystems,selectedTags:t.selectedTags,workloads:t.workloads,SID:t.SID}}),(function(e){return{fetchSystems:function(t){return e(o.lc(t))},addNotification:function(t){return e((0,z.addNotification)(t))},setFilters:function(t){return e(o.aw(t))}}}))(te))},6972:(e,t,s)=>{"use strict";var a=s(93379),r=s.n(a),n=s(87211),i=r()(n.default,{insert:"head",singleton:!1});if(!n.default.locals||e.hot.invalidate){var o=n.default.locals;e.hot.accept(87211,(t=>{n=s(87211),function(e,t,s){if(!e&&t||e&&!t)return!1;var a;for(a in e)if(e[a]!==t[a])return!1;for(a in t)if(!e[a])return!1;return!0}(o,n.default.locals)?(o=n.default.locals,i(n.default)):e.hot.invalidate()}))}e.hot.dispose((function(){i()})),n.default.locals},14704:(e,t,s)=>{"use strict";var a=s(93379),r=s.n(a),n=s(11860),i=r()(n.default,{insert:"head",singleton:!1});if(!n.default.locals||e.hot.invalidate){var o=n.default.locals;e.hot.accept(11860,(t=>{n=s(11860),function(e,t,s){if(!e&&t||e&&!t)return!1;var a;for(a in e)if(e[a]!==t[a])return!1;for(a in t)if(!e[a])return!1;return!0}(o,n.default.locals)?(o=n.default.locals,i(n.default)):e.hot.invalidate()}))}e.hot.dispose((function(){i()})),n.default.locals}}]);
//# sourceMappingURL=SystemsTable.565715b93a419e473195.js.map