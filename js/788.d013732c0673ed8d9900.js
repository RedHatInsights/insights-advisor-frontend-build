"use strict";(self.webpackChunkadvisor_frontend=self.webpackChunkadvisor_frontend||[]).push([[788],{44788:(e,t,n)=>{n.d(t,{Z:()=>_});var r=n(4942),a=n(15861),s=n(29439),i=n(87757),o=n.n(i),c=n(93264),l=n.n(c),u=n(59303),f=n(6202),d=n(32752),m=n(4853),p=n(23811),b=n(78826),y=n(71094),g=n(45697),v=n.n(g),h=n(12282),O=n(71355),j=n(30893),k=n(82041),Z=n(86896),M=n(77647);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=function(e){var t=e.handleModalToggle,n=e.isModalOpen,r=e.host,i=e.hosts,g=e.rule,v=e.afterFn,w=(0,Z.Z)(),E=(0,k.useDispatch)(),_=function(e){return E((0,O.wN)(e))},D=(0,c.useState)(""),x=(0,s.Z)(D,2),P=x[0],C=x[1],F=(0,c.useState)(void 0!==r||i.length>0),I=(0,s.Z)(F,2),R=I[0],T=I[1],B=(0,M.om)(),L=(0,s.Z)(B,2),N=L[0],H=(L[1].isLoading,function(){var e=(0,a.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={systems:i,justification:P},e.prev=1,e.next=4,(0,y.SO)("".concat(u._n,"/rule/").concat(g.rule_id,"/ack_hosts/"),{},t);case 4:!R&&_({variant:"success",dismissable:!0,timeout:!0,title:w.formatMessage(j.Z.recSuccessfullyDisabledForSystem)}),v&&v(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),_({variant:"danger",dismissable:!0,title:w.formatMessage(j.Z.error),description:"".concat(e.t0)});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}()),K=function(){var e=(0,a.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("enabled"!==g.rule_status||i.length){e.next=15;break}return n=R?{type:"HOST",options:{rule:g.rule_id,system_uuid:r.id,justification:P}}:{type:"RULE",options:S({rule_id:g.rule_id},P&&{justification:P})},e.prev=2,e.next=5,N(n).unwrap();case 5:_(R?{variant:"success",timeout:!0,dismissable:!0,title:w.formatMessage(j.Z.recSuccessfullyDisabledForSystem)}:{variant:"success",timeout:!0,dismissable:!0,title:w.formatMessage(j.Z.recSuccessfullyDisabled)}),C(""),v&&v(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),_({variant:"danger",dismissable:!0,title:w.formatMessage(j.Z.error),description:"".concat(e.t0)});case 13:e.next=16;break;case 15:H();case 16:t(!1);case 17:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();return l().createElement(b.u_,{variant:"small",title:w.formatMessage(j.Z.disableRule),isOpen:n,onClose:function(){t(!1),C("")},actions:[l().createElement(f.Button,{key:"confirm",variant:"primary",onClick:function(){return K()},ouiaId:"confirm"},w.formatMessage(j.Z.save)),l().createElement(f.Button,{key:"cancel",variant:"link",onClick:function(){t(!1),C("")},ouiaId:"cancel"},w.formatMessage(j.Z.cancel))]},w.formatMessage(j.Z.disableRuleBody),l().createElement(m.l,null,l().createElement(p.c,{fieldId:"blank-form"}),(void 0!==r||i.length>0)&&l().createElement(p.c,{fieldId:"disable-rule-one-system"},l().createElement(d.X,{isChecked:R,onChange:function(){T(!R)},label:i.length?w.formatMessage(j.Z.disableRuleForSystems):w.formatMessage(j.Z.disableRuleSingleSystem),id:"disable-rule-one-system",name:"disable-rule-one-system"})),l().createElement(p.c,{label:w.formatMessage(j.Z.justificationNote),fieldId:"disable-rule-justification"},l().createElement(h.oi,{type:"text",id:"disable-rule-justification","aria-describedby":"disable-rule-justification",value:P,onChange:function(e){return C(e)},onKeyDown:function(e){return"Enter"===e.key&&(e.preventDefault(),K())}}))))};E.propTypes={isModalOpen:v().bool,host:v().object,handleModalToggle:v().func,rule:v().object,afterFn:v().func,hosts:v().array},E.defaultProps={isModalOpen:!1,handleModalToggle:function(){},system:void 0,rule:{},afterFn:function(){},host:void 0,hosts:[]};const _=E}}]);
//# sourceMappingURL=../sourcemaps/788.9b37a3225e18259254059d82a8b5f78b.js.map