{"version":3,"sources":["webpack:///./src/Utilities/Api.js","webpack:///./src/PresentationalComponents/Common/Tables.js","webpack:///./src/PresentationalComponents/Breadcrumbs/Breadcrumbs.js","webpack:///./src/PresentationalComponents/Inventory/InventoryDetails.js"],"names":["get","url","headers","params","axios","put","data","post","urlBuilder","filters","selectedTags","URL","window","location","queryString","Object","keys","map","key","Array","isArray","join","URLSearchParams","length","set","history","replaceState","origin","pathname","toString","filterFetchBuilder","assign","entries","filterName","filterValue","paramParser","searchParams","search","from","reduce","acc","value","JSON","parse","split","capitalize","string","toUpperCase","substring","pruneFilters","localFilters","filterCategories","prunedFilters","item","category","chips","selectedCategoryValue","values","find","String","name","text","label","title","urlParam","Breadcrumbs","current","fetchRule","match","ruleFetchStatus","rule","intl","useState","items","setItems","ruleDescriptionLoaded","setRuleDescription","buildBreadcrumbs","useCallback","crumbs","splitUrl","push","navigate","undefined","id","inventoryId","description","useEffect","rule_id","Fragment","oneLink","to","isActive","formatMessage","messages","loading","propTypes","PropTypes","func","object","any","injectIntl","routerParams","connect","state","ownProps","AdvisorStore","dispatch","AppActions","InventoryDetails","entity","InventoryDetail","setInventoryDetail","AppInfo","setAppInfo","InvWrapper","setInvWrapper","store","useStore","fetchInventoryDetails","a","insights","loadInventory","ReactRedux","react","React","reactRouterDom","pfReactTable","pfReact","reactCore","inventoryConnector","mergeWithDetail","INVENTORY_ACTION_TYPES","InventoryDetailHead","DetailWrapper","getRegistry","register","entitiesDetailsReducer","Wrapper","className","display_name","hideBack","hasGutter","span","contextTypes","addAlert","entityDetails","props"],"mappings":"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","file":"js/InventoryDetails.js","sourcesContent":["import axios from 'axios';\n\nexport default {\n    get(url, headers = {}, params = {}) {\n        return axios.get(url, {\n            headers,\n            params\n        });\n    },\n    put(url, data = {}, headers = {}) {\n        return axios.put(url, data, {\n            headers\n        });\n    },\n    post(url, headers = {}, data = {}) {\n        return axios.post(url, data, {\n            headers\n        });\n    },\n    delete(url, data = {}, headers = {}) {\n        return axios.delete(url, data, {\n            headers\n        });\n    }\n};\n","// Builds returns url params from table filters, pushes to url if history object is passed\nexport const urlBuilder = (filters, selectedTags) => {\n    const url = new URL(window.location);\n    const queryString = `${Object.keys(filters).map(key => `${key}=${Array.isArray(filters[key]) ? filters[key].join() : filters[key]}`).join('&')}`;\n    const params = new URLSearchParams(queryString);\n    selectedTags !== null && selectedTags.length ? params.set('tags', selectedTags.join()) : params.delete('tags');\n    window.history.replaceState(null, null, `${url.origin}${url.pathname}?${params.toString()}`);\n    return `?${queryString}`;\n};\n\n// transforms array of strings -> comma seperated strings, required by advisor api\nexport const filterFetchBuilder = (filters) => Object.assign({},\n    ...Object.entries(filters).map(([filterName, filterValue]) => Array.isArray(filterValue) ?\n        ((filterValue[0] === 'true') || (filterValue[0] === 'false')) && filterValue.length > 1 ? null\n            : { [filterName]: filterValue.join() }\n        : { [filterName]: filterValue })\n);\n\n// parses url params for use in table/filter chips\nexport const paramParser = () => {\n    const searchParams = new URLSearchParams(window.location.search);\n    return Array.from(searchParams).reduce((acc, [key, value]) => ({\n        ...acc, [key]: (value === 'true' || value === 'false') ? JSON.parse(value) : value.split(',')\n    }), {});\n};\n\n// capitalizes text string\nexport const capitalize = (string) => string[0].toUpperCase() + string.substring(1);\n\nexport const pruneFilters = (localFilters, filterCategories) => {\n    const prunedFilters = Object.entries(localFilters);\n    return prunedFilters.length > 0 ? prunedFilters.map(item => {\n        if (filterCategories[item[0]]) {\n            const category = filterCategories[item[0]];\n            const chips = Array.isArray(item[1]) ? item[1].map(value => {\n                const selectedCategoryValue = category.values.find(values => values.value === String(value));\n                return selectedCategoryValue ? { name: selectedCategoryValue.text || selectedCategoryValue.label, value } : { name: value, value };\n            })\n                : [{ name: category.values.find(values => values.value === String(item[1])).label, value: item[1] }];\n            return { category: capitalize(category.title), chips, urlParam: category.urlParam };\n        } else {\n            return { category: 'Name', chips: [{ name: item[1], value: item[1] }], urlParam: item[0] };\n        }\n    })\n        : [];\n};\n","/* eslint-disable react-hooks/exhaustive-deps */\nimport * as AppActions from '../../AppActions';\n\nimport React, { useCallback, useEffect, useState } from 'react';\n\nimport { Breadcrumb } from '@patternfly/react-core/dist/js/components/Breadcrumb/Breadcrumb';\nimport { BreadcrumbItem } from '@patternfly/react-core/dist/js/components/Breadcrumb/BreadcrumbItem';\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { capitalize } from '../Common/Tables';\nimport { connect } from 'react-redux';\nimport { injectIntl } from 'react-intl';\nimport messages from '../../Messages';\nimport routerParams from '@redhat-cloud-services/frontend-components-utilities/files/RouterParams';\n\nconst Breadcrumbs = ({ current, fetchRule, match, ruleFetchStatus, rule, intl }) => {\n    const [items, setItems] = useState([]);\n    const [ruleDescriptionLoaded, setRuleDescription] = useState(false);\n    const buildBreadcrumbs = useCallback(() => {\n        const crumbs = [];\n        const splitUrl = match.url.split('/');\n\n        // add recommendations base\n        crumbs.push({ title: capitalize(splitUrl[1]), navigate: `/${splitUrl[1]}` });\n\n        // if applicable, add :id breadcrumb\n        if (match.params.id !== undefined && match.params.inventoryId !== undefined) {\n            crumbs.push({\n                title: rule.description,\n                navigate: `/${match.url.split('/')[1]}/${match.params.id}`\n            });\n        }\n\n        setItems(crumbs);\n    }, [intl, match.params.id, match.params.inventoryId, match.url, rule.description]);\n\n    useEffect(() => {\n        const splitUrl = match.url.split('/');\n        match.params.inventoryId !== undefined && splitUrl[1] !== 'systems' ?\n            fetchRule({ rule_id: match.params.id }) // eslint-disable-line camelcase\n            : buildBreadcrumbs();\n    }, [buildBreadcrumbs, fetchRule, match.params.id, match.params.inventoryId, match.url]);\n\n    useEffect(() => {\n        if (ruleFetchStatus === 'fulfilled' && !ruleDescriptionLoaded) {\n            setRuleDescription(true);\n            buildBreadcrumbs();\n        }\n    }, [buildBreadcrumbs, ruleFetchStatus, ruleDescriptionLoaded]);\n\n    return (\n        <React.Fragment>\n            {(ruleFetchStatus === 'fulfilled' || items.length > 0) && (\n                <Breadcrumb>\n                    {items.map((oneLink, key) => (\n                        <BreadcrumbItem key={key}>\n                            <Link to={oneLink.navigate}>{oneLink.title}</Link>\n                        </BreadcrumbItem>\n                    ))}\n                    <BreadcrumbItem isActive>{current}</BreadcrumbItem>\n                </Breadcrumb>\n            )}\n            {ruleFetchStatus === 'pending' && intl.formatMessage(messages.loading)}\n        </React.Fragment>\n    );\n};\n\nBreadcrumbs.propTypes = {\n    current: PropTypes.string,\n    fetchRule: PropTypes.func,\n    match: PropTypes.object,\n    rule: PropTypes.object,\n    ruleFetchStatus: PropTypes.string,\n    intl: PropTypes.any\n};\n\nconst mapStateToProps = (state, ownProps) => ({\n    rule: state.AdvisorStore.rule,\n    ruleFetchStatus: state.AdvisorStore.ruleFetchStatus,\n    ...ownProps\n});\n\nconst mapDispatchToProps = dispatch => ({\n    fetchRule: (url) => dispatch(AppActions.fetchRule(url))\n});\n\nexport default injectIntl(routerParams(connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Breadcrumbs)));\n","import '@redhat-cloud-services/frontend-components-inventory-insights/index.css';\n\nimport * as pfReactTable from '@patternfly/react-table';\nimport * as reactRouterDom from 'react-router-dom';\nimport * as ReactRedux from 'react-redux';\nimport { reactCore } from '@redhat-cloud-services/frontend-components-utilities/files/inventoryDependencies';\n\nimport { Grid, GridItem } from '@patternfly/react-core/dist/js/layouts/Grid/index';\nimport React, { useEffect, useState } from 'react';\n\nimport Breadcrumbs from '../../PresentationalComponents/Breadcrumbs/Breadcrumbs';\nimport { Main } from '@redhat-cloud-services/frontend-components/components/Main';\nimport { PageHeader } from '@redhat-cloud-services/frontend-components/components/PageHeader';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { entitiesDetailsReducer } from '../../AppReducer';\nimport { getRegistry } from '@redhat-cloud-services/frontend-components-utilities/files/Registry';\nimport routerParams from '@redhat-cloud-services/frontend-components-utilities/files/RouterParams';\nimport { useStore } from 'react-redux';\n\nconst InventoryDetails = ({ entity, match }) => {\n    const [InventoryDetail, setInventoryDetail] = useState();\n    const [AppInfo, setAppInfo] = useState();\n    const [InvWrapper, setInvWrapper] = useState();\n    const store = useStore();\n\n    const fetchInventoryDetails = async () => {\n        const { inventoryConnector, mergeWithDetail, INVENTORY_ACTION_TYPES } = await insights.loadInventory({\n            ReactRedux,\n            react: React,\n            reactRouterDom,\n            pfReactTable,\n            pfReact: reactCore\n        });\n        const { InventoryDetailHead, AppInfo, DetailWrapper } = inventoryConnector(store);\n\n        getRegistry().register({\n            ...mergeWithDetail(entitiesDetailsReducer(INVENTORY_ACTION_TYPES))\n        });\n        setInventoryDetail(() => InventoryDetailHead);\n        setAppInfo(() => AppInfo);\n        setInvWrapper(() => DetailWrapper);\n    };\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    useEffect(() => { fetchInventoryDetails(); }, []);\n    const Wrapper = InvWrapper || React.Fragment;\n\n    return <Wrapper>\n        <PageHeader className=\"pf-m-light ins-inventory-detail\">\n            {entity && <Breadcrumbs\n                current={entity.display_name || entity.id}\n                match={match}\n            />}\n            {InventoryDetail && <InventoryDetail hideBack />}\n        </PageHeader>\n        <Main>\n            <Grid hasGutter>\n                <GridItem span={12}>\n                    {AppInfo && <AppInfo />}\n                </GridItem>\n            </Grid>\n        </Main>\n    </Wrapper>;\n};\n\nInventoryDetails.contextTypes = {\n    store: PropTypes.object\n};\n\nInventoryDetails.propTypes = {\n    history: PropTypes.object,\n    entity: PropTypes.object,\n    addAlert: PropTypes.func,\n    match: PropTypes.any\n};\n\nconst mapStateToProps = ({ entityDetails, props }) => ({\n    entity: entityDetails && entityDetails.entity,\n    ...props\n});\n\nexport default routerParams(connect(mapStateToProps, null)(InventoryDetails));\n"],"sourceRoot":""}