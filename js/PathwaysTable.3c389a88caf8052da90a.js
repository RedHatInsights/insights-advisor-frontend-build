"use strict";(self.webpackChunkadvisor_frontend=self.webpackChunkadvisor_frontend||[]).push([[573],{10793:(e,t,r)=>{r.r(t),r.d(t,{default:()=>L});var o=r(87462),a=r(29439),n=r(4942),i=r(59303),l=r(73685),s=r(13877),c=r(93264),u=r.n(c),f=r(27577),m=r(97109),d=r(88931),g=r(66584),b=r(76341),p=r(46891),y=r(34702),v=r(66296),h=r(42293),P=r(45697),Z=r.n(P),W=r(30893),E=r(86896),k=function(e){var t=(0,E.Z)(),r=e.recommendation_level,o=function(e,t,r){return u().createElement(h.Label,{color:r},"".concat(e," - ").concat(t,"%"))};return r>=80?o(t.formatMessage(W.Z.high),r,"red"):r<80&&r>=50?o(t.formatMessage(W.Z.medium),r,"orange"):o(t.formatMessage(W.Z.low),r,"blue")};k.propTypes={props:Z().array};const S=k;var M=r(87516),O=r(71070),w=r(40609),j=r(28672),x=r(8377);function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const L=function(){var e,t,r=(0,E.Z)(),h=(0,d.useDispatch)(),P=(0,l.useLocation)().search,Z=(0,d.useSelector)((function(e){return e.filters.selectedTags})),k=(0,d.useSelector)((function(e){return e.filters.workloads})),C=(0,d.useSelector)((function(e){return e.filters.SID})),L=(0,d.useSelector)((function(e){return e.filters.pathState})),T=function(e){return h((0,j.lW)(e))},D={};(null==Z?void 0:Z.length)&&(D=_(_({},D),{tags:Z.join(",")})),k&&(D=_(_({},D),(0,m.s0)(k,C)));var F,q=(0,x.Lv)(_(_({},(0,m.qW)(L)),D)),A=q.data,N=void 0===A?[]:A,V=q.isFetching,B=q.isLoading,I=q.isError,R=[{title:r.formatMessage(W.Z.pathway),transforms:[f.sortable,(0,f.cellWidth)(45)]},{title:r.formatMessage(W.Z.category),transforms:[f.sortable,(0,f.cellWidth)(15)]},{title:r.formatMessage(W.Z.systems),transforms:[f.sortable,(0,f.cellWidth)(10)]},{title:r.formatMessage(W.Z.reboot),transforms:[f.sortable,(0,f.cellWidth)(10)]},{title:r.formatMessage(W.Z.reclvl),transforms:[f.sortable,(0,f.cellWidth)(20),f.fitContent,(0,f.info)({tooltip:r.formatMessage(W.Z.reclvldetails),tooltipProps:{isContentLeftAligned:!0}})]}],H={0:"description",1:"category",2:"impacted_systems_count",3:"reboot_required",4:"recommendation_level"},G=(0,c.useState)({}),K=(0,a.Z)(G,2),Y=K[0],$=K[1],z=(0,c.useState)(!0),J=(0,a.Z)(z,2),Q=J[0],U=J[1],X=(0,c.useState)((null==L?void 0:L.text)||""),ee=(0,a.Z)(X,2),te=ee[0],re=ee[1],oe=(0,w.Z)(te,i.$x),ae=function(e){var t=e*L.limit-L.limit;T(_(_({},L),{},{offset:t}))},ne=function(e){var t=_(_({},L),{},{offset:0});"text"===e&&re(""),delete t[e],T(t)},ie=function(e,t){t.length>0?T(_(_({},L),{},{offset:0},(0,n.Z)({},e,t))):ne(e)},le=[{label:r.formatMessage(W.Z.name).toLowerCase(),filterValues:{key:"text-filter",onChange:function(e,t){return re(t)},value:te,placeholder:r.formatMessage(W.Z.filterBy)}},{label:i.W2.category.title,type:i.W2.category.type,id:i.W2.category.urlParam,value:"checkbox-".concat(i.W2.category.urlParam),filterValues:{key:"".concat(i.W2.category.urlParam,"-filter"),onChange:function(e,t){return ie(i.W2.category.urlParam,t)},value:L.category,items:i.W2.category.values}},{label:i.W2.incident.title,type:i.W2.incident.type,id:i.W2.incident.urlParam,value:"checkbox-".concat(i.W2.incident.urlParam),filterValues:{key:"".concat(i.W2.incident.urlParam,"-filter"),onChange:function(e,t){return ie(i.W2.incident.urlParam,t)},value:L.incident,items:i.W2.incident.values}},{label:i.W2.reboot.title,type:i.W2.reboot.type,id:i.W2.reboot.urlParam,value:"checkbox-".concat(i.W2.reboot.urlParam),filterValues:{key:"".concat(i.W2.reboot.urlParam,"-filter"),onChange:function(e,t){return ie(i.W2.reboot.urlParam,t)},value:L.reboot,items:i.W2.reboot.values}}],se={deleteTitle:r.formatMessage(W.Z.resetFilters),filters:(F=_({},L),delete F.sort,delete F.offset,delete F.limit,(0,m.yK)(F,i.W2)),onDelete:function(e,t,r){r?(re(""),T({limit:L.limit,offset:L.offset})):t.map((function(e){var t=(0,n.Z)({},e.urlParam,Array.isArray(L[e.urlParam])?L[e.urlParam].filter((function(t){return String(t)!==String(e.chips[0].value)})):"");t[e.urlParam].length>0?T(_(_({},L),t)):ne(e.urlParam)}))}};return(0,c.useEffect)((function(){Q||null===Z||(0,m.Y4)(L,Z)}),[L,Z,k,C]),(0,c.useEffect)((function(){if(P&&Q){var e=(0,m.yG)();delete e.tags,void 0===e.text?re(""):re(e.text),e.sort=void 0===e.sort?"-impacted_systems_count":e.sort[0],void 0===e.offset?e.offset=0:e.offset=Number(e.offset[0]),void 0===e.limit?e.limit=20:e.limit=Number(e.limit[0]),void 0!==e.reboot&&!Array.isArray(e.reboot)&&(e.reboot=["".concat(e.reboot)]),T(_(_({},L),e))}U(!1)}),[]),(0,c.useEffect)((function(){if(void 0!==L.sort&&H){var e=L.sort,t=Number(Object.entries(H).find((function(t){return t[1]===e||"-".concat(t[1])===e}))[0]),r="-"===L.sort[0]?"desc":"asc";$({index:t,direction:r})}}),[L.sort]),(0,c.useEffect)((function(){if(!Q&&!B){var e=_({},L),t=te.length?{text:te}:{};delete e.text,T(_(_(_({},e),t),{},{offset:0}))}}),[oe]),u().createElement(u().Fragment,null,u().createElement(v.Z,{pagination:{itemCount:(null==N||null===(e=N.meta)||void 0===e?void 0:e.count)||0,page:L.offset/L.limit+1,perPage:Number(L.limit),onSetPage:function(e,t){ae(t)},onPerPageSelect:function(e,t){T(_(_({},L),{},{limit:t,offset:0}))},isCompact:!0},filterConfig:{items:le},activeFiltersConfig:se}),V?u().createElement(p.Z,null):I?u().createElement(b.Z,{message:r.formatMessage(W.Z.rulesTableFetchRulesError)}):u().createElement(f.Table,{"aria-label":"pathways-table",variant:f.TableVariant.compact,sortBy:Y,onSort:function(e,t,r){var o="".concat("asc"===r?"":"-").concat(H[t]);$({index:t,direction:r}),T(_(_({},L),{},{sort:o,offset:0}))},cells:R,rows:function(e){return 0===e.length?[{cells:[{title:u().createElement(y.Z,{icon:O.ZP,title:r.formatMessage(W.Z.noResults),text:r.formatMessage(W.Z.adjustFilters)}),props:{colSpan:6}}]}]:e.flatMap((function(e,t){return[{cells:[{title:u().createElement("span",{key:t},u().createElement(l.Link,{key:t,to:"/pathways/".concat(e.name)}," ",e.description," "),e.has_incident&&u().createElement(M.Z,{rule:{tags:"incident"}}))},{title:u().createElement(g.Z,{key:t,labelList:e.categories})},{title:u().createElement("div",{key:t},"".concat(e.impacted_systems_count.toLocaleString()))},{title:u().createElement("span",{key:t},r.formatMessage(e.reboot_required?W.Z.required:W.Z.notRequired))},{title:u().createElement(S,(0,o.Z)({key:t},e))}]}]}))}(null==N?void 0:N.data),isStickyHeader:!0},u().createElement(f.TableHeader,null),u().createElement(f.TableBody,null)),u().createElement(s.tl,{ouiaId:"page",itemCount:(null==N||null===(t=N.meta)||void 0===t?void 0:t.count)||0,page:L.offset/L.limit+1,perPage:Number(L.limit),onSetPage:function(e,t){ae(t)},onPerPageSelect:function(e,t){T(_(_({},L),{},{limit:t,offset:0}))},widgetId:"pagination-options-menu-bottom",variant:s.aM.bottom}))}}}]);
//# sourceMappingURL=../sourcemaps/PathwaysTable.c97d5191c4129d8160f4593de828fc62.js.map