(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{486:function(e,t,a){(e.exports=a(6)(!1)).push([e.i,".pf-c-check__label #battery_svg{height:1.25rem}\n",""])},557:function(e,t,a){"use strict";a.r(t);var r=a(179),n=a.n(r),o=a(272),i=a.n(o),l=a(178),s=a.n(l),c=a(558),u=a.n(c),f=a(270),E=a.n(f),m=(a(562),a(467)),p=a(14),d=a(249),b=a(59),T=a(85),R=a(243),_=a(65),I=a(256),g=a(158),O=a(318),h=a(319),y=a(333),S=a(2),v=a.n(S),A=a(322),k=a(326),C=a(48),F=a(335),L=a(332),j=a(480),P=a(511),G=a(482),w=a(107),M=a(473),x=a(474),N=a(1),D=a.n(N),B=a(576),H=a(546),V=a(548),z=a(90),J=a(106),U=a(563),K=a(32),W=a(22),q=a(466),Q=a.n(q),X=a(271),Y=a.n(X);function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function $(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ee=function(e){var t=e.rules,a=e.filters,r=e.rulesFetchStatus,o=e.setFilters,l=e.fetchRules,c=e.addNotification,f=e.history,m=e.intl,N=Object(S.useState)([{title:m.formatMessage(W.a.description),transforms:[A.a]},{title:m.formatMessage(W.a.added),transforms:[A.a,Object(k.a)(15)]},{title:m.formatMessage(W.a.totalRisk),transforms:[A.a,Object(k.a)(15)]},{title:m.formatMessage(W.a.systems),transforms:[A.a]},{title:v.a.createElement(v.a.Fragment,null,v.a.createElement(d.b,{size:"md"})," ",m.formatMessage(W.a.ansible)),transforms:[A.a],dataLabel:m.formatMessage(W.a.ansible)}]),D=E()(N,1)[0],z=Object(S.useState)([]),J=E()(z,2),K=J[0],q=J[1],X=Object(S.useState)({}),Y=E()(X,2),Z=Y[0],ee=Y[1],te=Object(S.useState)(a.impacting),ae=E()(te,2),re=ae[0],ne=ae[1],oe=Object(S.useState)(10),ie=E()(oe,2),le=ie[0],se=ie[1],ce=Object(S.useState)(0),ue=E()(ce,2),fe=ue[0],Ee=ue[1],me=Object(S.useState)(!0),pe=E()(me,2),de=pe[0],be=pe[1],Te=Object(S.useState)(""),Re=E()(Te,2),_e=Re[0],Ie=Re[1],ge=Object(S.useState)(""),Oe=E()(ge,2),he=Oe[0],ye=Oe[1],Se=Object(S.useState)(!1),ve=E()(Se,2),Ae=ve[0],ke=ve[1],Ce=Object(S.useState)({}),Fe=E()(Ce,2),Le=Fe[0],je=Fe[1],Pe=Object(S.useState)(!1),Ge=E()(Pe,2),we=Ge[0],Me=Ge[1],xe=Object(S.useState)({}),Ne=E()(xe,2),De=Ne[0],Be=Ne[1],He=Object(U.a)(he,800),Ve=t.meta?t.meta.count:0,ze={1:"description",2:"publish_date",3:"total_risk",4:"impacted_count",5:"playbook_count"},Je=function(e){return Object.assign.apply(Object,[{}].concat(u()(Object.entries(e).map((function(e){var t=e[0],a=e[1];return Array.isArray(a)?(a[0],a.length>1?null:s()({},t,a.join())):s()({},t,a)})))))},Ue=function(){l($({},Je(a),{offset:0,limit:le,impacting:re}))},Ke=function(e){Ee(e*le-le)},We=function(e){var t="undefined"===e?void 0:e;o($({},a,{reports_shown:t},"true"!==t&&{impacting:!1})),"true"!==t&&ne(!1),Ee(0)},qe=function(){var e=i()(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=K[t].rule,e.prev=1,!a.reports_shown){e.next=7;break}je(a),ke(!0),e.next=10;break;case 7:return e.next=9,j.a.delete("".concat(p.BASE_URL,"/ack/").concat(a.rule_id,"/"));case 9:Ue();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),c({variant:"danger",dismissable:!0,title:a.reports_shown?m.formatMessage(W.a.rulesTableHideReportsErrorDisabled):m.formatMessage(W.a.rulesTableHideReportsErrorEnabled),description:"".concat(e.t0)});case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),Qe=Object(S.useCallback)((function(){Ee(0)}),[]);Object(S.useEffect)((function(){if(f.location.search){var e=new URLSearchParams(f.location.search),t=Array.from(e).reduce((function(e,t){var a=E()(t,2),r=a[0],n=a[1];return $({},e,s()({},r,"true"===n||"false"===n?JSON.parse(n):n.split(",")))}),{});t.reports_shown=void 0===t.reports_shown||"undefined"===t.reports_shown[0]?void 0:t.reports_shown,t.sort=void 0===t.sort?"-publish_date":t.sort[0],void 0!==t.incident&&!Array.isArray(t.incident)&&(t.incident=["".concat(t.incident)]),ne(t.impacting),o($({},t))}be(!1)}),[]),Object(S.useEffect)((function(){var e=Object.keys(a).map((function(e){return"".concat(e,"=").concat(Array.isArray(a[e])?a[e].join():a[e])})).join("&");Ie("?".concat(e)),f.replace({search:"?".concat(e)})}),[a,f]),Object(S.useEffect)((function(){de||l($({},Je(a),{offset:fe,limit:le}))}),[l,de,a,le,fe]),Object(S.useEffect)((function(){if(void 0!==a.sort){var e=Number(Object.entries(ze).find((function(e){return e[1]===a.sort||"-".concat(e[1])===a.sort}))[0]),t="-"===a.sort[0]?"desc":"asc";ee({index:e,direction:t})}}),[a,a.sort]),Object(S.useEffect)((function(){if(t.data)if(0===t.data.length)q([{cells:[{title:v.a.createElement(x.a,{icon:b.b,iconClass:"ansibleCheck",size:"sm",title:m.formatMessage(W.a.rulesTableNoRuleHitsTitle),text:a.reports_shown?m.formatMessage(W.a.rulesTableNoRuleHitsEnabledRulesBody):m.formatMessage(W.a.rulesTableNoRuleHitsAnyRulesBody)},a.reports_shown&&v.a.createElement(I.a,{variant:"link",style:{paddingTop:24},onClick:function(){We("undefined"),Qe()}},m.formatMessage(W.a.rulesTableNoRuleHitsAddDisabledButton))),props:{colSpan:5}}]}]);else{var e=t.data.flatMap((function(e,t){return[{isOpen:!1,rule:e,cells:[{title:v.a.createElement("span",{key:t},v.a.createElement(H.a,{rule:e}),v.a.createElement(w.Link,{key:t,to:"/rules/".concat(e.rule_id)}," ",e.description," "))},{title:v.a.createElement("div",{key:t},Q()(e.publish_date).fromNow())},{title:v.a.createElement("div",{className:"pf-m-center",key:t},v.a.createElement(g.a,{key:t,position:g.b.bottom,content:m.formatMessage(W.a.rulesDetailsTotalriskBody,{likelihood:p.LIKELIHOOD_LABEL[e.likelihood]||m.formatMessage(W.a.undefined),impact:p.IMPACT_LABEL[e.impact.impact]||m.formatMessage(W.a.undefined),strong:function(e){return v.a.createElement("strong",null,e)}})},v.a.createElement(_.Battery,{label:p.TOTAL_RISK_LABEL[e.total_risk]||m.formatMessage(W.a.undefined),severity:e.total_risk})))},{title:v.a.createElement("div",{key:t}," ",e.reports_shown?"".concat(e.impacted_systems_count.toLocaleString()):m.formatMessage(W.a.nA))},{title:v.a.createElement("div",{className:"pf-m-center ",key:t},e.playbook_count?v.a.createElement(T.b,{className:"ansibleCheck"}):m.formatMessage(W.a.no))}]},{parent:2*t,fullWidth:!0,cells:[{title:v.a.createElement(_.Main,{className:"pf-m-light"},v.a.createElement(O.a,{gutter:"md"},e.hosts_acked_count?v.a.createElement(h.a,null,v.a.createElement(R.b,{size:"sm"})," ",e.hosts_acked_count&&!e.impacted_systems_count?m.formatMessage(W.a.ruleIsDisabledForAllSystems):m.formatMessage(W.a.ruleIsDisabledForSystemsBody,{systems:e.hosts_acked_count}),"  ",v.a.createElement(I.a,{isInline:!0,variant:"link",onClick:function(){Be(e),Me(!0)}},m.formatMessage(W.a.viewSystems))):v.a.createElement(v.a.Fragment,null),v.a.createElement(B.a,{rule:e})))}]}]}));q(e.asMutable())}}),[Qe,a,t,o]),Object(S.useEffect)((function(){void 0===a.text?ye(""):ye(a.text)}),[a.text]),Object(S.useEffect)((function(){if(!de){var e=$({},a),t=he.length?{text:he}:{};delete e.text,o($({},e,{},t))}}),[He]);var Xe=function(e){var t=$({},a);delete t[e],o(t)},Ye=function(e,t){t.length>0?o($({},a,{},s()({},e,t))):Xe(e)},Ze=["",{label:m.formatMessage(re?W.a.rulesTableActionShow:W.a.rulesTableActionHide),onClick:function(){return function(e){o($({},a,{impacting:e})),ne(e),Ee(0)}(!re)}}],$e=[{label:m.formatMessage(W.a.description),filterValues:{key:"text-filter",onChange:function(e,t){return ye(t)},value:he}},{label:p.FILTER_CATEGORIES.total_risk.title,type:p.FILTER_CATEGORIES.total_risk.type,id:p.FILTER_CATEGORIES.total_risk.urlParam,value:"checkbox-".concat(p.FILTER_CATEGORIES.total_risk.urlParam),filterValues:{key:"".concat(p.FILTER_CATEGORIES.total_risk.urlParam,"-filter"),onChange:function(e,t){return Ye(p.FILTER_CATEGORIES.total_risk.urlParam,t)},value:a.total_risk,items:p.FILTER_CATEGORIES.total_risk.values}},{label:p.FILTER_CATEGORIES.res_risk.title,type:p.FILTER_CATEGORIES.res_risk.type,id:p.FILTER_CATEGORIES.res_risk.urlParam,value:"checkbox-".concat(p.FILTER_CATEGORIES.res_risk.urlParam),filterValues:{key:"".concat(p.FILTER_CATEGORIES.res_risk.urlParam,"-filter"),onChange:function(e,t){return Ye(p.FILTER_CATEGORIES.res_risk.urlParam,t)},value:a.res_risk,items:p.FILTER_CATEGORIES.res_risk.values}},{label:p.FILTER_CATEGORIES.impact.title,type:p.FILTER_CATEGORIES.impact.type,id:p.FILTER_CATEGORIES.impact.urlParam,value:"checkbox-".concat(p.FILTER_CATEGORIES.impact.urlParam),filterValues:{key:"".concat(p.FILTER_CATEGORIES.impact.urlParam,"-filter"),onChange:function(e,t){return Ye(p.FILTER_CATEGORIES.impact.urlParam,t)},value:a.impact,items:p.FILTER_CATEGORIES.impact.values}},{label:p.FILTER_CATEGORIES.likelihood.title,type:p.FILTER_CATEGORIES.likelihood.type,id:p.FILTER_CATEGORIES.likelihood.urlParam,value:"checkbox-".concat(p.FILTER_CATEGORIES.likelihood.urlParam),filterValues:{key:"".concat(p.FILTER_CATEGORIES.likelihood.urlParam,"-filter"),onChange:function(e,t){return Ye(p.FILTER_CATEGORIES.likelihood.urlParam,t)},value:a.likelihood,items:p.FILTER_CATEGORIES.likelihood.values}},{label:p.FILTER_CATEGORIES.category.title,type:p.FILTER_CATEGORIES.category.type,id:p.FILTER_CATEGORIES.category.urlParam,value:"checkbox-".concat(p.FILTER_CATEGORIES.category.urlParam),filterValues:{key:"".concat(p.FILTER_CATEGORIES.category.urlParam,"-filter"),onChange:function(e,t){return Ye(p.FILTER_CATEGORIES.category.urlParam,t)},value:a.category,items:p.FILTER_CATEGORIES.category.values}},{label:p.FILTER_CATEGORIES.incident.title,type:p.FILTER_CATEGORIES.incident.type,id:p.FILTER_CATEGORIES.incident.urlParam,value:"checkbox-".concat(p.FILTER_CATEGORIES.incident.urlParam),filterValues:{key:"".concat(p.FILTER_CATEGORIES.incident.urlParam,"-filter"),onChange:function(e,t){return Ye(p.FILTER_CATEGORIES.incident.urlParam,t)},value:a.incident,items:p.FILTER_CATEGORIES.incident.values}},{label:p.FILTER_CATEGORIES.reports_shown.title,type:p.FILTER_CATEGORIES.reports_shown.type,id:p.FILTER_CATEGORIES.reports_shown.urlParam,value:"radio-".concat(p.FILTER_CATEGORIES.reports_shown.urlParam),filterValues:{key:"".concat(p.FILTER_CATEGORIES.reports_shown.urlParam,"-filter"),onChange:function(e,t){return We(t)},value:void 0===a.reports_shown?"undefined":"".concat(a.reports_shown),items:p.FILTER_CATEGORIES.reports_shown.values}}],et={filters:function(){var e=$({},a);delete e.impacting,delete e.topic,delete e.sort;var t=Object.entries(e);return t.length>0?t.map((function(e){if(p.FILTER_CATEGORIES[e[0]]){var t=p.FILTER_CATEGORIES[e[0]],a=Array.isArray(e[1])?e[1].map((function(e){var a=t.values.find((function(t){return t.value===String(e)}));return{name:a.text||a.label,value:e}})):[{name:t.values.find((function(t){return t.value===String(e[1])})).label,value:e[1]}];return{category:t.title,chips:a,urlParam:t.urlParam}}return{category:"Description",chips:[{name:e[1],value:e[1]}],urlParam:e[0]}})):[]}(),onDelete:function(e,t,r){r?o($({},a.topic&&{topic:a.topic},{impacting:!0,reports_shown:"true"})):t.map((function(e){var t=s()({},e.urlParam,Array.isArray(a[e.urlParam])?a[e.urlParam].filter((function(t){return String(t)!==String(e.chips[0].value)})):"");t[e.urlParam].length>0?o($({},a,{},t)):Xe(e.urlParam)}))}};return v.a.createElement(v.a.Fragment,null,we&&v.a.createElement(V.a,{handleModalToggle:function(e){return Me(e)},isModalOpen:we,afterFn:function(){Ue()},rule:De}),Ae&&v.a.createElement(P.a,{handleModalToggle:ke,isModalOpen:Ae,rule:Le,afterFn:Ue}),v.a.createElement(_.PrimaryToolbar,{pagination:{itemCount:Ve,page:fe/le+1,perPage:le,onSetPage:function(e,t){Ke(t)},onPerPageSelect:function(e,t){se(t)},isCompact:!1},exportConfig:{onSelect:function(e,t){return window.location="".concat(p.BASE_URL,"/export/hits.").concat("json"===t?"json":"csv","/").concat(_e)},isDisabled:!re},actionsConfig:{actions:Ze},filterConfig:{items:$e},activeFiltersConfig:et}),"fulfilled"===r&&v.a.createElement(C.b,{"aria-label":"rule-table",actionResolver:function(e,t){var a=t.rowIndex,r=K[a].rule?K[a].rule:null;return a%2==0&&r?r&&r.reports_shown?[{title:m.formatMessage(W.a.disableRule),onClick:function(e,t){return qe(t)}}]:[{title:m.formatMessage(W.a.enableRule),onClick:function(e,t){return qe(t)}}]:null},onCollapse:function(e,t,a){var r=u()(K);r[t]=$({},r[t],{isOpen:a}),q(r)},sortBy:Z,onSort:function(e,t,r){var n="".concat("asc"===r?"":"-").concat(ze[t]);ee({index:t,direction:r}),o($({},a,{sort:n})),Ee(0)},cells:D,rows:K},v.a.createElement(F.a,null),v.a.createElement(L.a,null)),"pending"===r&&v.a.createElement(M.a,null),"failed"===r&&v.a.createElement(G.a,{message:m.formatMessage(W.a.rulesTableFetchRulesError)}),v.a.createElement(_.TableToolbar,null,v.a.createElement(y.a,{itemCount:Ve,perPage:le,page:fe/le+1,onSetPage:function(e,t){Ke(t)},widgetId:"pagination-options-menu-bottom",variant:y.b.bottom})))};ee.propTypes={fetchRules:D.a.func,rulesFetchStatus:D.a.string,rules:D.a.object,filters:D.a.object,addNotification:D.a.func,setFilters:D.a.func,history:D.a.object,intl:D.a.any};t.default=Object(K.c)(Y()(Object(J.connect)((function(e,t){return $({rules:e.AdvisorStore.rules,rulesFetchStatus:e.AdvisorStore.rulesFetchStatus,filters:e.AdvisorStore.filters},t)}),(function(e){return{fetchRules:function(t){return e(m.d(t))},addNotification:function(t){return e(Object(z.addNotification)(t))},setFilters:function(t){return e(m.m(t))}}}))(ee)))},558:function(e,t,a){var r=a(559),n=a(560),o=a(561);e.exports=function(e){return r(e)||n(e)||o()}},559:function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}},560:function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},561:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},562:function(e,t,a){var r=a(486);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0},o=a(7)(r,n);r.locals&&(e.exports=r.locals),e.hot.accept(486,(function(){var t=a(486);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var a,r=0;for(a in e){if(!t||e[a]!==t[a])return!1;r++}for(a in t)r--;return 0===r}(r.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");o(t)})),e.hot.dispose((function(){o()}))}}]);
//# sourceMappingURL=RulesTAble.js.map