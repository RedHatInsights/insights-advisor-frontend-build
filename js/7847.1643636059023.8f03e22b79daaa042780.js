(self.webpackChunkadvisor_frontend=self.webpackChunkadvisor_frontend||[]).push([[7847],{75331:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n(70885),a=n(93264),o=n.n(a),s=n(85991),i=n(49489),l=n(75662),c=n(45697),u=n.n(c),d=n(30893),f=n(75546),m=n(86896),p=function(e){var t,n=e.current,c=(0,m.Z)(),u=null===(t=(0,l.useLocation)().pathname)||void 0===t?void 0:t.split("/"),p=(0,a.useState)([]),v=(0,r.Z)(p,2),g=v[0],b=v[1],h=!("recommendations"===u[1]&&4===u.length)||"pathways"===u[2],y=(0,f.m1)({ruleId:u[2]},{skip:h}),_=y.data,k=y.isFetching;return(0,a.useEffect)((function(){var e;(e=[]).push({title:"".concat(c.formatMessage(d.Z.insightsHeader)," ").concat(u[1]),navigate:"/".concat(u[1])}),h||e.push({title:null==_?void 0:_.description,navigate:"/".concat(u[1],"/").concat(u[2])}),"pathways"===u[2]&&(e=[{title:"Advisor pathways",navigate:"/recommendations/pathways"}]),b(e)}),[_]),o().createElement(o().Fragment,null,!k&&g.length>0?o().createElement(s.a,{ouiaId:"detail"},g.map((function(e,t){return o().createElement(i.g,{key:t},o().createElement(l.Link,{to:e.navigate},e.title))})),o().createElement(i.g,{isActive:!0},n)):c.formatMessage(d.Z.loading))};p.propTypes={current:u().string};const v=p},52202:(e,t,n)=>{"use strict";n.d(t,{k:()=>b,b:()=>h});var r=n(66197),a=n(16545),o=n(82644),s=n(29558),i=n(91290),l=n(26076),c=n(93264),u=n.n(c),d=n(14498),f=n(30893),m=n(28186),p=(0,o.Sn)(),v=navigator.language.slice(0,2),g=(0,s.d)({onError:console.log,locale:v},p),b=function(e){return u().createElement("span",{className:"system-reboot-message"},u().createElement(l.ZP,{className:e?"reboot-required-icon":"no-reboot-required-icon"}),u().createElement(r.TextContent,{className:"system-reboot-message__content"},u().createElement(r.Text,{component:r.TextVariants.p},g.formatMessage(f.Z.systemReboot,{strong:function(e){return(0,m.f)(e)},status:e?g.formatMessage(f.Z.is):g.formatMessage(f.Z.isNot)}))))},h=function(e){return u().createElement(a.u,{key:e,position:a.D.right,content:u().createElement("div",null,e)},u().createElement("span",{"aria-label":"Action"},u().createElement(i.ZP,{color:d.global_info_color_100.value})))}},40771:(e,t,n)=>{"use strict";n.d(t,{Z:()=>D});var r=n(4942),a=n(15861),o=n(70885),s=n(87757),i=n.n(s),l=n(59303),c=n(93264),u=n.n(c),d=n(27577),f=n(97109),m=n(28216),p=n(61829),v=n(44788),g=n(71094),b=n(33739),h=n(46891),y=n(45697),_=n.n(y),k=n(98132),x=n(30893),Z=n(71355),w=n(46655),E=n(41131),P=n(86896),O=n(58921);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=function(e){var t,n,s,y,_,S,C,D=e.tableProps,M=e.rule,I=e.afterDisableFn,j=e.pathway,N=e.selectedTags,F=e.workloads,A=e.SID,U=e.permsExport,R=e.exportTable,V=(0,m.useStore)(),L=(0,P.Z)(),X=(0,m.useDispatch)(),Y=(0,c.useState)([]),J=(0,o.Z)(Y,2),q=J[0],W=J[1],z=(0,c.useState)({limit:20,offset:0,sort:"-last_seen",name:""}),B=(0,o.Z)(z,2),H=B[0],K=B[1],G=(0,m.useSelector)((function(e){return e.entities||{}})),Q=function(e,t){return X({type:"SELECT_ENTITY",payload:{id:e,selected:t}})},$=function(e){return X((0,Z.wN)(e))},ee=(0,c.useState)(!1),te=(0,o.Z)(ee,2),ne=te[0],re=te[1],ae=(0,c.useState)(),oe=(0,o.Z)(ae,2),se=oe[0],ie=oe[1],le=function(){var e=(0,a.Z)(i().mark((function e(){var t,n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=17;break}return e.next=3,(0,g.dX)("".concat(l._n,"/pathway/").concat(encodeURI(j.slug),"/rules/"),{},{});case 3:if(e.t1=t=e.sent,e.t0=null===e.t1,e.t0){e.next=7;break}e.t0=void 0===t;case 7:if(!e.t0){e.next=11;break}e.t2=void 0,e.next=12;break;case 11:e.t2=t.data.data;case 12:return n=e.t2,r=n.map((function(e){return{id:"advisor:".concat(e.rule_id),description:e.description}})),e.abrupt("return",{issues:r,systems:q});case 17:return e.abrupt("return",{issues:[{id:"advisor:".concat(M.rule_id),description:M.description}],systems:q});case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(e){re(e)},ue=function(){ie(!0),Q(0,!0)},de=function(){var e;return se?ie(!1):W(null==G||null===(e=G.rows)||void 0===e?void 0:e.filter((function(e){return!0===e.selected})).map((function(e){return e.id})))},fe=function(e){var t=e.name,n=e.display_name,r=T(T(T({},e),t&&{name:t}),n&&{display_name:n});!j&&(0,f.Y4)(r,N)},me=function(e){var t=T(T({},H),{},{offset:0});delete t[e],K(t)},pe=[{label:l.Ut.rhel_version.title.toLowerCase(),type:l.Ut.rhel_version.type,id:l.Ut.rhel_version.urlParam,value:"checkbox-".concat(l.Ut.rhel_version.urlParam),filterValues:{key:"".concat(l.Ut.rhel_version.urlParam,"-filter"),onChange:function(e,t){!function(e,t){t.length>0?K(T(T({},H),{},{offset:0},(0,r.Z)({},e,t))):me(e)}(l.Ut.rhel_version.urlParam,t)},value:H.rhel_version,items:l.Ut.rhel_version.values}}],ve={deleteTitle:L.formatMessage(x.Z.resetFilters),filters:(S=T({},H),delete S.sort,delete S.offset,delete S.limit,(0,f.yK)(S,l.Ut)),onDelete:function(e,t,n){n?K({sort:H.sort,limit:H.limit,offset:H.offset}):t.map((function(e){var t=(0,r.Z)({},e.urlParam,Array.isArray(H[e.urlParam])?H[e.urlParam].filter((function(t){return String(t)!==String(e.chips[0].value)})):"");t[e.urlParam].length>0?K(T(T({},H),t)):me(e.urlParam)}))}};return(0,c.useEffect)((function(){var e;(null==G||null===(e=G.rows)||void 0===e?void 0:e.length)&&de(G.rows)}),[null==G?void 0:G.rows]),u().createElement(u().Fragment,null,ne&&u().createElement(v.Z,{handleModalToggle:ce,isModalOpen:ne,rule:M,afterFn:I,hosts:q}),u().createElement(b.Z,{hasCheckbox:!0,initialLoading:!0,autoRefresh:!0,hideFilters:{all:!0,name:!1},filterConfig:{items:pe},activeFiltersConfig:ve,columns:function(e){return function(e){var t=e.filter((function(e){return"updated"===e.key})),n=e.filter((function(e){return"display_name"===e.key})),r=e.filter((function(e){return"system_profile"===e.key}));return n=T(T({},n[0]),{},{transforms:[d.sortable,d.wrappable],props:{isStatic:!0}}),t=T(T({},t[0]),{},{transforms:[d.sortable,d.wrappable],props:{width:20}}),[n,r=T(T({},r[0]),{},{transforms:[d.wrappable]}),t]}(e)},tableProps:T({variant:d.TableVariant.compact},D),customFilters:{advisorFilters:H,selectedTags:N,workloads:F,SID:A},getEntities:function(){var e=(0,a.Z)(i().mark((function e(t,n,r,a){var o,s,c,u,d,m,p,v,b,h,y,_,k,x,Z,w,E;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m=n.per_page,p=n.page,v=n.orderBy,b=n.orderDirection,h=n.advisorFilters,y=n.selectedTags,_=n.workloads,k=n.SID,x="".concat("ASC"===b?"":"-").concat("updated"===v?"last_seen":v),Z=T(T(T(T(T({},h),{},{limit:m,offset:p*m-m,sort:x},n.filters.hostnameOrId&&!j&&{name:null==n||null===(o=n.filters)||void 0===o?void 0:o.hostnameOrId}),n.filters.hostnameOrId&&j&&{display_name:null==n||null===(s=n.filters)||void 0===s?void 0:s.hostnameOrId}),(null==y?void 0:y.length)&&{tags:y}),Array.isArray(h.rhel_version)&&{rhel_version:null===(c=h.rhel_version)||void 0===c?void 0:c.join(",")}),_&&(Z=T(T({},Z),(0,f.s0)(_,k))),fe(Z),!j){e.next=20;break}return e.next=8,(0,g.dX)("".concat(l.Vo),{},T(T({},Z),{},{pathway:j.slug}));case 8:if(e.t2=u=e.sent,e.t1=null===e.t2,e.t1){e.next=12;break}e.t1=void 0===u;case 12:if(!e.t1){e.next=16;break}e.t3=void 0,e.next=17;break;case 16:e.t3=u.data;case 17:e.t0=e.t3,e.next=32;break;case 20:return e.next=22,(0,g.dX)("".concat(l.cJ).concat(encodeURI(M.rule_id),"/systems_detail/"),{},Z);case 22:if(e.t5=d=e.sent,e.t4=null===e.t5,e.t4){e.next=26;break}e.t4=void 0===d;case 26:if(!e.t4){e.next=30;break}e.t6=void 0,e.next=31;break;case 30:e.t6=d.data;case 31:e.t0=e.t6;case 32:return w=e.t0,e.next=35,a(w.data.map((function(e){return e.system_uuid})),{page:p,per_page:m,hasItems:!0,fields:{system_profile:["operating_system"]}},r);case 35:return E=e.sent,e.abrupt("return",Promise.resolve({results:(0,f.E9)(w.data,E.results),total:w.meta.count}));case 37:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),dedicatedAction:u().createElement(k.Z,{key:"remediation-button",isDisabled:0===q.length||!j&&0===(null==M?void 0:M.playbook_count),dataProvider:le,onRemediationCreated:function(e){return function(e){Q(-1,!1);try{e.remediation&&$(e.getNotification())}catch(e){$({variant:"danger",dismissable:!0,title:L.formatMessage(x.Z.error),description:"".concat(e)})}}(e)}},u().createElement(p.ZP,{size:"sm",className:"ins-c-background__default"}),"Â ",L.formatMessage(x.Z.remediate)),actionsConfig:{actions:["",{label:L.formatMessage(x.Z.disableRuleForSystems),props:{isDisabled:0===q.length},onClick:function(){return ce(!0)}}]},bulkSelect:{count:q.length,items:[{title:L.formatMessage(x.Z.selectNone),onClick:function(){Q(-1,!1)}},T({},(null==G||null===(t=G.rows)||void 0===t?void 0:t.length)>H.limit?{title:L.formatMessage(x.Z.selectPage,{items:H.limit}),onClick:function(){Q(0,!0)}}:{}),T({},(null==G||null===(n=G.rows)||void 0===n?void 0:n.length)>0?{title:L.formatMessage(x.Z.selectAll,{items:(null==G?void 0:G.total)||0}),onClick:(C=(0,a.Z)(i().mark((function e(){var t,n,r,a,o,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.error(j),!j){e.next=16;break}return e.next=4,(0,g.dX)("".concat(l.Vo),{},{pathway:j.slug,limit:j.impacted_systems_count});case 4:if(e.t2=t=e.sent,e.t1=null===e.t2,e.t1){e.next=8;break}e.t1=void 0===t;case 8:if(!e.t1){e.next=12;break}e.t3=void 0,e.next=13;break;case 12:e.t3=null===(n=t.data)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.map((function(e){return e.system_uuid}));case 13:e.t0=e.t3,e.next=28;break;case 16:return e.next=18,(0,g.dX)("".concat(l.cJ).concat(encodeURI(M.rule_id),"/systems/"),{},{name:H.name});case 18:if(e.t5=a=e.sent,e.t4=null===e.t5,e.t4){e.next=22;break}e.t4=void 0===a;case 22:if(!e.t4){e.next=26;break}e.t6=void 0,e.next=27;break;case 26:e.t6=null===(o=a.data)||void 0===o?void 0:o.host_ids;case 27:e.t0=e.t6;case 28:s=e.t0,console.error(s),W(s),ue();case 32:case"end":return e.stop()}}),e)}))),function(){return C.apply(this,arguments)})}:{})],checked:(q.length===(null==G||null===(s=G.rows)||void 0===s?void 0:s.length)||q.length===(null==G?void 0:G.total))&&(null==G?void 0:G.total)>0?1:q.length===H.limit?null:0,onSelect:function(){q.length>0?Q(-1,!1):ue(),de()}},fallback:h.Z,onLoad:function(e){var t=e.mergeWithEntities,n=e.INVENTORY_ACTION_TYPES,r=e.mergeWithDetail;V.replaceReducer((0,E.U)(T(T({},t((0,w.V)([],n),{page:Number(H.offset/H.limit+1||1),perPage:Number(H.limit||20)})),r())))},exportConfig:U&&(_={label:L.formatMessage(x.Z.exportCsv)},(0,r.Z)(_,"label",L.formatMessage(x.Z.exportJson)),(0,r.Z)(_,"onSelect",(function(e,t){var n=G.rows.map((function(e){return{display_name:e.display_name,os:"".concat(e.system_profile.operating_system.name," ").concat(e.system_profile.operating_system.major,".").concat(e.system_profile.operating_system.minor),last_seen:e.last_seen}}));return(0,O.Z)(R,t,H,N,F,A,n)})),(0,r.Z)(_,"isDisabled",!U||0===(null==G||null===(y=G.rows)||void 0===y?void 0:y.length)),(0,r.Z)(_,"tooltipText",U?L.formatMessage(x.Z.exportData):L.formatMessage(x.Z.permsAction)),_)}))};C.propTypes={tableProps:_().any,rule:_().object,afterDisableFn:_().func,pathway:_().object,selectedTags:_().any,workloads:_().any,SID:_().any,permsExport:_().bool,exportTable:_().string};const D=C},58392:()=>{}}]);
//# sourceMappingURL=../sourcemaps/7847.518010b6e6749524cec85de6071f5e76.js.map