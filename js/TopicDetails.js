(window.webpackJsonp=window.webpackJsonp||[]).push([[12,10],{1020:function(e,t,a){"use strict";a.r(t);var r=a(2),n=a.n(r),l=a(279),c=a.n(l),o=a(373),i=a(289),s=a(310),u=a(312),f=a(313),p=a(81),m=a(1),d=a.n(m),b=a(243),g=a(200),h=a(33),v=a(539),O=a(571),E=a(650),y=a(543),j=a(552),w=a(10),S=(a(1022),function(e){var t=e.match,a=e.fetchTopic,l=e.setFilters,c=e.topic,p=e.topicFetchStatus,m=e.intl,d=e.filters;return Object(r.useEffect)((function(){void 0===d.topic&&l({impacting:!0,reports_shown:!0,topic:t.params.id})})),Object(r.useEffect)((function(){return a({topic_id:t.params.id}),function(){l({impacting:!0,reports_shown:!0})}}),[a,t.params.id,l]),n.a.createElement(n.a.Fragment,null,n.a.createElement(o.PageHeader,null,n.a.createElement(O.a,{current:c.name,match:t}),"fulfilled"===p&&n.a.createElement(n.a.Fragment,null,n.a.createElement(i.a,{size:"2xl",className:"titleOverride"},c.name,c.featured&&n.a.createElement(s.a,{className:"labelOverride"},n.a.createElement(b.b,null),m.formatMessage(w.a.featured))),n.a.createElement(u.a,{className:"textOverride"},n.a.createElement(f.a,{component:f.b.p},n.a.createElement(o.Truncate,{text:c.description,length:600,expandText:m.formatMessage(w.a.readmore),collapseText:m.formatMessage(w.a.readless),inline:!0})))),""===p||"pending"===p&&n.a.createElement(y.a,null)),n.a.createElement(o.Main,null,n.a.createElement(n.a.Fragment,null,""===p||"pending"===p||"fulfilled"===p&&n.a.createElement(n.a.Fragment,null,n.a.createElement(i.a,{headingLevel:"h3",size:"2xl",className:"titlePaddingOverride"}," Rules"),d.topic&&n.a.createElement(E.default,null)),"failed"===p||"rejected"===p&&n.a.createElement(j.a,{icon:g.b,title:m.formatMessage(w.a.topicDetailslNodetailsTitle),text:m.formatMessage(w.a.topicDetailslNodetailsBody)}))))});S.propTypes={match:d.a.any,fetchTopic:d.a.func,topic:d.a.object,topicFetchStatus:d.a.string,setFilters:d.a.func,intl:d.a.any,filters:d.a.object};t.default=Object(h.c)(c()(Object(p.connect)((function(e){return{topic:e.AdvisorStore.topic,topicFetchStatus:e.AdvisorStore.topicFetchStatus,filters:e.AdvisorStore.filters}}),(function(e){return{fetchTopic:function(t){return e(v.g(t))},setFilters:function(t){return e(v.j(t))}}}))(S)))},1022:function(e,t,a){var r=a(640);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0},l=a(6)(r,n);r.locals&&(e.exports=r.locals),e.hot.accept(640,(function(){var t=a(640);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var a,r=0;for(a in e){if(!t||e[a]!==t[a])return!1;r++}for(a in t)r--;return 0===r}(r.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");l(t)})),e.hot.dispose((function(){l()}))},549:function(e,t,a){(e.exports=a(4)(!1)).push([e.i,"nav.pf-c-breadcrumb ol {\n  padding-left: 0;\n  margin-left: 0;\n  margin-top: 0; }\n\nnav.pf-c-breadcrumb li {\n  text-transform: capitalize;\n  margin-top: 0; }\n",""])},571:function(e,t,a){"use strict";var r=a(166),n=a.n(r),l=a(544),c=a.n(l),o=a(2),i=a.n(o),s=a(88),u=a(297),f=a(298),p=a(279),m=a.n(p),d=a(81),b=a(1),g=a.n(b),h=a(33),v=a(539),O=(a(572),a(10));function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var y=function(e){var t=e.breadcrumbs,a=e.current,r=e.fetchRule,n=e.match,l=e.ruleFetchStatus,p=e.rule,m=e.intl,d=Object(o.useState)([]),b=c()(d,2),g=b[0],h=b[1],v=Object(o.useState)(!1),E=c()(v,2),y=E[0],j=E[1],w=Object(o.useCallback)((function(){var e=[],a=function(t){var a=t.toLowerCase();"rules"!==a&&"systems"!==a||e.push({title:"Rules",navigate:"/rules"})};if(void 0!==t[0])a(t[0].title),e.push(t[0]);else{var r=n.url.split("/")[1];a(r),e.push({title:r,navigate:"/".concat(r)})}if(void 0!==n.params.id&&void 0!==n.params.inventoryId){var l=p.description;e.push({title:l,navigate:"/".concat(n.url.split("/")[1],"/").concat(n.params.id)})}h(e)}),[t,n.params.id,n.params.inventoryId,n.url,p.description]);return Object(o.useEffect)((function(){var e=n.url.split("/")[1];void 0!==n.params.inventoryId&&"systems"!==e?r({rule_id:n.params.id}):w()}),[w,r,n.params.id,n.params.inventoryId,n.url]),Object(o.useEffect)((function(){"fulfilled"!==l||y||(j(!0),w())}),[w,l,y]),i.a.createElement(i.a.Fragment,null,("fulfilled"===l||g.length>0)&&i.a.createElement(u.a,null,g.map((function(e,t){return i.a.createElement(f.a,{key:t},i.a.createElement(s.Link,{to:e.navigate},e.title))})),i.a.createElement(f.a,{isActive:!0},a)),"pending"===l&&m.formatMessage(O.a.loading))};y.propTypes={breadcrumbs:g.a.arrayOf(Object),current:g.a.string,fetchRule:g.a.func,match:g.a.object,rule:g.a.object,ruleFetchStatus:g.a.string,intl:g.a.any};t.a=Object(h.c)(m()(Object(d.connect)((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(a,!0).forEach((function(t){n()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({breadcrumbs:e.AdvisorStore.breadcrumbs,rule:e.AdvisorStore.rule,ruleFetchStatus:e.AdvisorStore.ruleFetchStatus},e,{},t)}),(function(e){return{fetchRule:function(t){return e(v.a(t))}}}))(y)))},572:function(e,t,a){var r=a(549);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0},l=a(6)(r,n);r.locals&&(e.exports=r.locals),e.hot.accept(549,(function(){var t=a(549);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var a,r=0;for(a in e){if(!t||e[a]!==t[a])return!1;r++}for(a in t)r--;return 0===r}(r.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");l(t)})),e.hot.dispose((function(){l()}))},640:function(e,t,a){(e.exports=a(4)(!1)).push([e.i,":root {\n  --ins-color--orange: #ec7a08; }\n\n.pf-c-label.labelOverride {\n  vertical-align: middle;\n  margin-left: 20px; }\n\n.textOverride {\n  margin-top: var(--pf-global--spacer--md); }\n",""])},650:function(e,t,a){"use strict";a.r(t);var r=a(167),n=a.n(r),l=a(280),c=a.n(l),o=a(574),i=a.n(o),s=a(166),u=a.n(s),f=a(544),p=a.n(f),m=a(586),d=a.n(m),b=a(2),g=a.n(b),h=a(373),v=a(279),O=a.n(v),E=a(1),y=a.n(E),j=a(244),w=a(218),S=a(180),k=a(246),P=a(538),F=a.n(P),x=a(88),M=a(81),T=a(288),_=a(296),A=a(357),C=a(305),R=a(19),N=a(306),D=a(291),H=a(302),I=a(332),B=a(333),L=a(46),z=a(358),J=a(356),U=a(89),W=a(33),q=a(539),G=a(543),K=a(573),Q=a(328),V=a(327),X=a(304),Y=a(267),Z=a(329),$=a(121),ee=a(20),te=a(639),ae=a(206),re=a(130),ne=a(303),le=a(150),ce=a(10);function oe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var ie=function(e){var t=e.filters,a=e.removeFilter,r=e.removeAllFilters,n=e.intl,l=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?oe(a,!0).forEach((function(t){u()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oe(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t);delete l.text,delete l.impacting,delete l.reports_shown,delete l.topic;var c=Object.entries(l);return c.length>0&&g.a.createElement(g.a.Fragment,null,g.a.createElement(re.a,{withToolbar:!0,numChips:4},c.map((function(e){var t=ee.d.find((function(t){return t.urlParam===e[0]}));return g.a.createElement(ne.a,{key:e[0],categoryName:t.title},e[1].split(",").map((function(e){var r=t.values.find((function(t){return t.value===String(e)}));return g.a.createElement(le.a,{key:e,onClick:function(){return a(t.urlParam,r.value)}},r.label)})))}))),g.a.createElement(T.a,{variant:"link",onClick:function(){return r()}},n.formatMessage(ce.a.clearFilters)))};ie.propTypes={filters:y.a.object,removeFilter:y.a.func,removeAllFilters:y.a.func,intl:y.a.any};var se=Object(W.c)(ie);function ue(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function fe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ue(a,!0).forEach((function(t){u()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ue(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var pe=function(e){var t=e.children,a=e.searchPlaceholder,r=e.filters,n=e.hideCategories,l=e.setFilters,c=e.fetchAction,o=Object(b.useState)(""),i=p()(o,2),s=i[0],f=i[1],m=Object(te.a)(s,800),d=g.a.Children.toArray(t),v=d.pop(),O=function(e,t){var a=u()({},e,r[e].split(",").filter((function(e){return Number(e)!==Number(t)})).join(","));if(a[e].length)l(fe({},r,{},a)),c(fe({},r,{},a));else{var n=fe({},r);delete n[e],l(n),c(n)}};return Object(b.useEffect)((function(){f(r.text),void 0===r.text&&f("")}),[r.text]),Object(b.useEffect)((function(){var e=fe({},r),t=s.length?{text:s}:{};delete e.text,l(fe({},e,{},t)),c(fe({},e,{},t))}),[m]),g.a.createElement(g.a.Fragment,null,g.a.createElement(Q.a,null,g.a.createElement(V.a,{className:"pf-u-mr-xl"},g.a.createElement(X.a,null,g.a.createElement(Y.a,{name:"search-input","aria-label":"Search",id:"insights-search-input",type:"search",value:s,placeholder:a,onChange:f}),g.a.createElement(T.a,{variant:T.c.tertiary,"aria-label":"search button for search input"},g.a.createElement(ae.b,null)))),g.a.createElement(V.a,{className:"pf-u-mr-md"},g.a.createElement(h.FilterDropdown,{filters:r,addFilter:function(e,t,a){var n;switch(a){case"checkbox":n=r[e]?u()({},e,"".concat(r[e],",").concat(t)):u()({},e,t);break;case"radio":n=u()({},e,t)}l(fe({},r,{},n)),c(fe({},r,{},n))},removeFilter:O,hideCategories:n,filterCategories:ee.d})),g.a.Children.map(d,(function(e){return g.a.createElement(V.a,null," ",e," ")}))),g.a.createElement(Q.a,null,g.a.createElement(V.a,null,v)),g.a.createElement(Z.a,{"aria-label":"Filter Chips Section"},g.a.createElement(Q.a,null,g.a.createElement(V.a,null,g.a.createElement(se,{filters:r,fetchAction:c,removeFilter:O,removeAllFilters:function(){var e={impacting:!0,reports_shown:!0};l(e),c(e)}})))))};pe.propTypes={children:y.a.any,hideCategories:y.a.array,searchPlaceholder:y.a.string,filters:y.a.object,setFilters:y.a.func,fetchAction:y.a.func,results:y.a.number};var me=O()(Object(M.connect)((function(e,t){return fe({filters:e.AdvisorStore.filters},t)}),(function(e){return Object($.a)({setFilters:function(e){return q.j(e)}},e)}))(pe)),de=a(600),be=a(552),ge=a(651);function he(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ve(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?he(a,!0).forEach((function(t){u()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):he(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Oe=function(e){var t=e.rules,a=e.filters,r=e.rulesFetchStatus,l=e.setFilters,o=e.fetchRules,s=e.addNotification,f=e.history,m=e.intl,v=Object(b.useState)([{title:m.formatMessage(ce.a.rule),transforms:[I.a]},{title:m.formatMessage(ce.a.added),transforms:[I.a,Object(B.a)(15)]},{title:m.formatMessage(ce.a.totalRisk),transforms:[I.a]},{title:m.formatMessage(ce.a.systems),transforms:[I.a]},{title:g.a.createElement(g.a.Fragment,null,g.a.createElement(j.b,{size:"md"})," ",m.formatMessage(ce.a.ansible)),transforms:[I.a],dataLabel:m.formatMessage(ce.a.ansible)}]),O=p()(v,1)[0],E=Object(b.useState)([]),y=p()(E,2),P=y[0],M=y[1],U=Object(b.useState)({}),W=p()(U,2),q=W[0],Q=W[1],V=Object(b.useState)("-publish_date"),X=p()(V,2),Y=X[0],Z=X[1],$=Object(b.useState)(a.impacting),te=p()($,2),ae=te[0],re=te[1],ne=Object(b.useState)(10),le=p()(ne,2),oe=le[0],ie=le[1],se=Object(b.useState)(0),ue=p()(se,2),fe=ue[0],pe=ue[1],he=Object(b.useState)(!1),Oe=p()(he,2),Ee=Oe[0],ye=Oe[1],je=Object(b.useState)(!0),we=p()(je,2),Se=we[0],ke=we[1],Pe=t.meta?t.meta.count:0,Fe=Object(b.useCallback)((function(e,t,a){var r="".concat("asc"===a?"":"-").concat({1:"description",2:"publish_date",3:"total_risk",4:"impacted_count",5:"playbook_count"}[t]);Q({index:t,direction:a}),Z(r),pe(0)}),[Z,Q,pe]),xe=function(e,t){pe(t*oe-oe)},Me=function(e,t){ie(t)},Te=function(){var e=c()(n.a.mark((function e(t){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=P[t].rule,e.prev=1,!r.reports_shown){e.next=7;break}return e.next=5,de.a.post("".concat(ee.a,"/ack/"),{rule_id:r.rule_id});case 5:e.next=9;break;case 7:return e.next=9,de.a.delete("".concat(ee.a,"/ack/").concat(r.rule_id,"/"));case 9:o(ve({},a,{offset:0,limit:oe,impacting:ae,sort:Y})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),s({variant:"danger",dismissable:!0,title:r.reports_shown?m.formatMessage(ce.a.rulesTableHideReportsErrorDisabled):m.formatMessage(ce.a.rulesTableHideReportsErrorEnabled),description:m.formatMessage(ce.a.rulesTableHideReportsErrorBody,{ruleName:r.description})});case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),_e=Object(b.useCallback)((function(){pe(0)}),[]);Object(b.useEffect)((function(){if(f.location.search){var e=new URLSearchParams(f.location.search),t=Array.from(e).reduce((function(e,t){var a=p()(t,2),r=a[0],n=a[1];return ve({},e,u()({},r,"true"===n||"false"===n?JSON.parse(n):n))}),{}),a={};"undefined"===t.reports_shown&&(a={reports_shown:void 0}),re(t.impacting),l(ve({},t,{},a))}ke(!1)}),[]),Object(b.useEffect)((function(){var e=Object.keys(a).map((function(e){return e+"="+a[e]})).join("&");f.replace({search:"?".concat(e)})}),[a,f]),Object(b.useEffect)((function(){Se||o(ve({},a,{offset:fe,limit:oe,sort:Y}))}),[o,Se,a,oe,fe,Y]),Object(b.useEffect)((function(){P.length||Fe(null,2,"desc")}),[Fe,P.length]),Object(b.useEffect)((function(){if(t.data)if(0===t.data.length)M([{cells:[{title:g.a.createElement(be.a,{icon:w.b,iconClass:"ansibleCheck",size:"sm",title:m.formatMessage(ce.a.rulesTableNoRuleHitsTitle),text:a.reports_shown?m.formatMessage(ce.a.rulesTableNoRuleHitsEnabledRulesBody):m.formatMessage(ce.a.rulesTableNoRuleHitsAnyRulesBody)},a.reports_shown&&g.a.createElement(T.a,{variant:"link",style:{paddingTop:24},onClick:function(){l(ve({},a,{reports_shown:void 0})),_e()}},m.formatMessage(ce.a.rulesTableNoRuleHitsAddDisabledButton))),props:{colSpan:5}}]}]);else{var e=t.data.map((function(e,t){return[{isOpen:!1,rule:e,cells:[{title:e.reports_shown?g.a.createElement(x.Link,{key:t,to:"/rules/".concat(e.rule_id)},e.description):g.a.createElement("span",{key:t}," ",g.a.createElement(_.a,{isRead:!0},m.formatMessage(ce.a.disabled))," ",e.description)},{title:g.a.createElement("div",{key:t},F()(e.publish_date).fromNow())},{title:g.a.createElement("div",{className:"pf-m-center",key:t,style:{verticalAlign:"top"}},g.a.createElement(h.Battery,{label:m.formatMessage(ce.a.totalRisk),labelHidden:!0,severity:e.total_risk}))},{title:g.a.createElement("div",{key:t}," ",e.reports_shown?"".concat(e.impacted_systems_count.toLocaleString()):m.formatMessage(ce.a.nA))},{title:g.a.createElement("div",{className:"pf-m-center ",key:t},e.playbook_count?g.a.createElement(S.b,{className:"ansibleCheck"}):null)}]},{parent:2*t,fullWidth:!0,cells:[{title:g.a.createElement(h.Main,{className:"pf-m-light"}," ",g.a.createElement(ge.a,{rule:e}))}]}]}));M(d()(e))}}),[_e,a,t,l]);var Ae=function(e){return g.a.createElement(A.a,{itemCount:Pe,perPage:oe,page:fe/oe+1,onSetPage:xe,onPerPageSelect:Me,widgetId:"pagination-options-menu-".concat("bottom"===e?"bottom":"top"),variant:"bottom"===e?A.b.bottom:null})};return g.a.createElement(g.a.Fragment,null,g.a.createElement(h.TableToolbar,{style:{justifyContent:"space-between"}},g.a.createElement(me,{fetchAction:_e,searchPlaceholder:m.formatMessage(ce.a.rulesTableFilterInputText),results:Pe},g.a.createElement(C.a,{position:R.d.left,toggle:g.a.createElement(N.a,{onToggle:function(e){ye(e)}}),onSelect:function(){ye(!1)},isOpen:Ee,isPlain:!0,dropdownItems:[g.a.createElement(D.a,{value:"json",href:"".concat(ee.a,"/export/hits.json/"),key:"export json","aria-label":"export data json"},g.a.createElement(k.b,null)," ",m.formatMessage(ce.a.rulesTableActionExportJson)),g.a.createElement(D.a,{value:"csv",href:"".concat(ee.a,"/export/hits.csv/"),key:"export csv","aria-label":"export data csv"},g.a.createElement(k.b,null)," ",m.formatMessage(ce.a.rulesTableActionExportCsv))]}),g.a.createElement(H.a,{label:m.formatMessage(ce.a.rulesTableActionShowrulehits),isChecked:ae,onChange:function(e){l(ve({},a,{impacting:e})),re(e),pe(0)},"aria-label":"InsightsRulesHideHits",id:"InsightsRulesHideHits"}),Ae())),"fulfilled"===r&&g.a.createElement(L.b,{"aria-label":"rule-table",actionResolver:function(e,t){var a=t.rowIndex,r=P[a].rule?P[a].rule:null;return a%2==0&&r?r&&r.reports_shown?[{title:m.formatMessage(ce.a.disableRule),onClick:function(e,t){return Te(t)}}]:[{title:m.formatMessage(ce.a.enableRule),onClick:function(e,t){return Te(t)}}]:null},onCollapse:function(e,t,a){var r=i()(P);r[t]=ve({},r[t],{isOpen:a}),M(r)},sortBy:q,onSort:Fe,cells:O,rows:P},g.a.createElement(z.a,null),g.a.createElement(J.a,null)),"pending"===r&&g.a.createElement(G.a,null),"failed"===r&&g.a.createElement(K.a,{message:m.formatMessage(ce.a.rulesTableFetchRulesError)}),g.a.createElement(h.TableToolbar,null,Ae("bottom")))};Oe.propTypes={fetchRules:y.a.func,rulesFetchStatus:y.a.string,rules:y.a.object,filters:y.a.object,addNotification:y.a.func,setFilters:y.a.func,history:y.a.object,intl:y.a.any};t.default=Object(W.c)(O()(Object(M.connect)((function(e,t){return ve({rules:e.AdvisorStore.rules,rulesFetchStatus:e.AdvisorStore.rulesFetchStatus,filters:e.AdvisorStore.filters},t)}),(function(e){return{fetchRules:function(t){return e(q.b(t))},addNotification:function(t){return e(Object(U.addNotification)(t))},setFilters:function(t){return e(q.j(t))}}}))(Oe)))}}]);