(window.webpackJsonp=window.webpackJsonp||[]).push([[12,10],{1006:function(e,t,a){"use strict";a.r(t);var r=a(2),n=a.n(r),i=a(270),o=a.n(i),l=a(359),c=a(280),s=a(297),u=a(299),f=a(300),d=a(81),p=a(1),m=a.n(p),b=a(239),g=a(196),v=a(31),h=a(527),y=a(557),O=a(625),j=a(530),E=a(538),k=a(33),w=(a(1008),function(e){var t=e.match,a=e.fetchTopic,i=e.setFilters,o=e.topic,d=e.topicFetchStatus,p=e.intl,m=e.filters;return Object(r.useEffect)((function(){void 0===m.topic&&i({impacting:!0,reports_shown:"true",topic:t.params.id})})),Object(r.useEffect)((function(){return a({topic_id:t.params.id}),function(){i({impacting:!0,reports_shown:"true"})}}),[a,t.params.id,i]),n.a.createElement(n.a.Fragment,null,n.a.createElement(l.PageHeader,null,n.a.createElement(y.a,{current:o.name,match:t}),"fulfilled"===d&&n.a.createElement(n.a.Fragment,null,n.a.createElement(c.a,{size:"2xl",className:"titleOverride"},o.name,o.featured&&n.a.createElement(s.a,{className:"labelOverride"},n.a.createElement(b.b,null),p.formatMessage(k.a.featured))),n.a.createElement(u.a,{className:"textOverride"},n.a.createElement(f.a,{component:f.b.p},n.a.createElement(l.Truncate,{text:o.description,length:600,expandText:p.formatMessage(k.a.readmore),collapseText:p.formatMessage(k.a.readless),inline:!0})))),""===d||"pending"===d&&n.a.createElement(j.a,null)),n.a.createElement(l.Main,null,n.a.createElement(n.a.Fragment,null,""===d||"pending"===d||"fulfilled"===d&&n.a.createElement(n.a.Fragment,null,n.a.createElement(c.a,{headingLevel:"h3",size:"2xl",className:"titlePaddingOverride"}," Rules"),m.topic&&n.a.createElement(O.default,null)),"failed"===d||"rejected"===d&&n.a.createElement(E.a,{icon:g.b,title:p.formatMessage(k.a.topicDetailslNodetailsTitle),text:p.formatMessage(k.a.topicDetailslNodetailsBody)}))))});w.propTypes={match:m.a.any,fetchTopic:m.a.func,topic:m.a.object,topicFetchStatus:m.a.string,setFilters:m.a.func,intl:m.a.any,filters:m.a.object};t.default=Object(v.c)(o()(Object(d.connect)((function(e){return{topic:e.AdvisorStore.topic,topicFetchStatus:e.AdvisorStore.topicFetchStatus,filters:e.AdvisorStore.filters}}),(function(e){return{fetchTopic:function(t){return e(h.g(t))},setFilters:function(t){return e(h.j(t))}}}))(w)))},1008:function(e,t,a){var r=a(627);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0},i=a(5)(r,n);r.locals&&(e.exports=r.locals),e.hot.accept(627,(function(){var t=a(627);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var a,r=0;for(a in e){if(!t||e[a]!==t[a])return!1;r++}for(a in t)r--;return 0===r}(r.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");i(t)})),e.hot.dispose((function(){i()}))},535:function(e,t,a){(e.exports=a(4)(!1)).push([e.i,"nav.pf-c-breadcrumb ol {\n  padding-left: 0;\n  margin-left: 0;\n  margin-top: 0; }\n\nnav.pf-c-breadcrumb li {\n  text-transform: capitalize;\n  margin-top: 0; }\n",""])},557:function(e,t,a){"use strict";var r=a(162),n=a.n(r),i=a(534),o=a.n(i),l=a(2),c=a.n(l),s=a(88),u=a(288),f=a(289),d=a(270),p=a.n(d),m=a(81),b=a(1),g=a.n(b),v=a(31),h=a(527),y=(a(558),a(33));function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var j=function(e){var t=e.breadcrumbs,a=e.current,r=e.fetchRule,n=e.match,i=e.ruleFetchStatus,d=e.rule,p=e.intl,m=Object(l.useState)([]),b=o()(m,2),g=b[0],v=b[1],h=Object(l.useState)(!1),O=o()(h,2),j=O[0],E=O[1],k=Object(l.useCallback)((function(){var e=[],a=function(t){var a=t.toLowerCase();"rules"!==a&&"systems"!==a||e.push({title:"Rules",navigate:"/rules"})};if(void 0!==t[0])a(t[0].title),e.push(t[0]);else{var r=n.url.split("/")[1];a(r),e.push({title:r,navigate:"/".concat(r)})}if(void 0!==n.params.id&&void 0!==n.params.inventoryId){var i=d.description;e.push({title:i,navigate:"/".concat(n.url.split("/")[1],"/").concat(n.params.id)})}v(e)}),[t,n.params.id,n.params.inventoryId,n.url,d.description]);return Object(l.useEffect)((function(){var e=n.url.split("/")[1];void 0!==n.params.inventoryId&&"systems"!==e?r({rule_id:n.params.id}):k()}),[k,r,n.params.id,n.params.inventoryId,n.url]),Object(l.useEffect)((function(){"fulfilled"!==i||j||(E(!0),k())}),[k,i,j]),c.a.createElement(c.a.Fragment,null,("fulfilled"===i||g.length>0)&&c.a.createElement(u.a,null,g.map((function(e,t){return c.a.createElement(f.a,{key:t},c.a.createElement(s.Link,{to:e.navigate},e.title))})),c.a.createElement(f.a,{isActive:!0},a)),"pending"===i&&p.formatMessage(y.a.loading))};j.propTypes={breadcrumbs:g.a.arrayOf(Object),current:g.a.string,fetchRule:g.a.func,match:g.a.object,rule:g.a.object,ruleFetchStatus:g.a.string,intl:g.a.any};t.a=Object(v.c)(p()(Object(m.connect)((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(a,!0).forEach((function(t){n()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({breadcrumbs:e.AdvisorStore.breadcrumbs,rule:e.AdvisorStore.rule,ruleFetchStatus:e.AdvisorStore.ruleFetchStatus},e,{},t)}),(function(e){return{fetchRule:function(t){return e(h.a(t))}}}))(j)))},558:function(e,t,a){var r=a(535);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0},i=a(5)(r,n);r.locals&&(e.exports=r.locals),e.hot.accept(535,(function(){var t=a(535);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var a,r=0;for(a in e){if(!t||e[a]!==t[a])return!1;r++}for(a in t)r--;return 0===r}(r.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");i(t)})),e.hot.dispose((function(){i()}))},625:function(e,t,a){"use strict";a.r(t);var r=a(163),n=a.n(r),i=a(271),o=a.n(i),l=a(162),c=a.n(l),s=a(560),u=a.n(s),f=a(534),d=a.n(f),p=a(572),m=a.n(p),b=a(2),g=a.n(b),v=a(359),h=a(270),y=a.n(h),O=a(1),j=a.n(O),E=a(240),k=a(215),w=a(176),_=a(524),S=a.n(_),P=a(88),x=a(81),M=a(279),C=a(287),F=a(343),R=a(318),A=a(319),T=a(46),N=a(344),D=a(342),H=a(89),I=a(31),B=a(527),L=a(530),V=a(559),z=a(586),J=a(18),U=a(538),W=a(637),q=a(33),G=a(626);function K(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?K(a,!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):K(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var X=function(e){var t=e.rules,a=e.filters,r=e.rulesFetchStatus,i=e.setFilters,l=e.fetchRules,s=e.addNotification,f=e.history,p=e.intl,h=Object(b.useState)([{title:p.formatMessage(q.a.description),transforms:[R.a]},{title:p.formatMessage(q.a.added),transforms:[R.a,Object(A.a)(15)]},{title:p.formatMessage(q.a.totalRisk),transforms:[R.a]},{title:p.formatMessage(q.a.systems),transforms:[R.a]},{title:g.a.createElement(g.a.Fragment,null,g.a.createElement(E.b,{size:"md"})," ",p.formatMessage(q.a.ansible)),transforms:[R.a],dataLabel:p.formatMessage(q.a.ansible)}]),y=d()(h,1)[0],O=Object(b.useState)([]),j=d()(O,2),_=j[0],x=j[1],H=Object(b.useState)({}),I=d()(H,2),B=I[0],K=I[1],X=Object(b.useState)("-publish_date"),Y=d()(X,2),Z=Y[0],$=Y[1],ee=Object(b.useState)(a.impacting),te=d()(ee,2),ae=te[0],re=te[1],ne=Object(b.useState)(10),ie=d()(ne,2),oe=ie[0],le=ie[1],ce=Object(b.useState)(0),se=d()(ce,2),ue=se[0],fe=se[1],de=Object(b.useState)(!0),pe=d()(de,2),me=pe[0],be=pe[1],ge=Object(b.useState)(""),ve=d()(ge,2),he=ve[0],ye=ve[1],Oe=Object(b.useState)(""),je=d()(Oe,2),Ee=je[0],ke=je[1],we=Object(G.a)(Ee,800),_e=t.meta?t.meta.count:0,Se=function(e){return Object.assign.apply(Object,[{}].concat(u()(Object.entries(e).map((function(e){return Array.isArray(e[1])?c()({},e[0],e[1].join()):c()({},e[0],e[1])})))))},Pe=Object(b.useCallback)((function(e,t,a){var r="".concat("asc"===a?"":"-").concat({1:"description",2:"publish_date",3:"total_risk",4:"impacted_count",5:"playbook_count"}[t]);K({index:t,direction:a}),$(r),fe(0)}),[$,K,fe]),xe=function(e){fe(e*oe-oe)},Me=function(){var e=o()(n.a.mark((function e(t){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_[t].rule,e.prev=1,!r.reports_shown){e.next=7;break}return e.next=5,z.a.post("".concat(J.a,"/ack/"),{rule_id:r.rule_id});case 5:e.next=9;break;case 7:return e.next=9,z.a.delete("".concat(J.a,"/ack/").concat(r.rule_id,"/"));case 9:l(Q({},Se(a),{offset:0,limit:oe,impacting:ae,sort:Z})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),s({variant:"danger",dismissable:!0,title:r.reports_shown?p.formatMessage(q.a.rulesTableHideReportsErrorDisabled):p.formatMessage(q.a.rulesTableHideReportsErrorEnabled),description:p.formatMessage(q.a.rulesTableHideReportsErrorBody,{ruleName:r.description})});case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),Ce=Object(b.useCallback)((function(){fe(0)}),[]);Object(b.useEffect)((function(){if(f.location.search){var e=new URLSearchParams(f.location.search),t=Array.from(e).reduce((function(e,t){var a=d()(t,2),r=a[0],n=a[1];return Q({},e,c()({},r,"true"===n||"false"===n?JSON.parse(n):n.split(",")))}),{});t.reports_shown=void 0===t.reports_shown||"undefined"===t.reports_shown[0]?void 0:t.reports_shown,re(t.impacting),i(Q({},t))}be(!1)}),[]),Object(b.useEffect)((function(){var e=Object.keys(a).map((function(e){return"".concat(e,"=").concat(Array.isArray(a[e])?a[e].join():a[e])})).join("&");ye("?".concat(e)),f.replace({search:"?".concat(e)})}),[a,f]),Object(b.useEffect)((function(){me||l(Q({},Se(a),{offset:ue,limit:oe,sort:Z}))}),[l,me,a,oe,ue,Z]),Object(b.useEffect)((function(){_.length||Pe(null,2,"desc")}),[Pe,_.length]),Object(b.useEffect)((function(){if(t.data)if(0===t.data.length)x([{cells:[{title:g.a.createElement(U.a,{icon:k.b,iconClass:"ansibleCheck",size:"sm",title:p.formatMessage(q.a.rulesTableNoRuleHitsTitle),text:a.reports_shown?p.formatMessage(q.a.rulesTableNoRuleHitsEnabledRulesBody):p.formatMessage(q.a.rulesTableNoRuleHitsAnyRulesBody)},a.reports_shown&&g.a.createElement(M.a,{variant:"link",style:{paddingTop:24},onClick:function(){i(Q({},a,{reports_shown:void 0})),Ce()}},p.formatMessage(q.a.rulesTableNoRuleHitsAddDisabledButton))),props:{colSpan:5}}]}]);else{var e=t.data.map((function(e,t){return[{isOpen:!1,rule:e,cells:[{title:e.reports_shown?g.a.createElement(P.Link,{key:t,to:"/rules/".concat(e.rule_id)},e.description):g.a.createElement("span",{key:t}," ",g.a.createElement(C.a,{isRead:!0},p.formatMessage(q.a.disabled))," ",e.description)},{title:g.a.createElement("div",{key:t},S()(e.publish_date).fromNow())},{title:g.a.createElement("div",{className:"pf-m-center",key:t,style:{verticalAlign:"top"}},g.a.createElement(v.Battery,{label:p.formatMessage(q.a.totalRisk),labelHidden:!0,severity:e.total_risk}))},{title:g.a.createElement("div",{key:t}," ",e.reports_shown?"".concat(e.impacted_systems_count.toLocaleString()):p.formatMessage(q.a.nA))},{title:g.a.createElement("div",{className:"pf-m-center ",key:t},e.playbook_count?g.a.createElement(w.b,{className:"ansibleCheck"}):p.formatMessage(q.a.no))}]},{parent:2*t,fullWidth:!0,cells:[{title:g.a.createElement(v.Main,{className:"pf-m-light"}," ",g.a.createElement(W.a,{rule:e}))}]}]}));x(m()(e))}}),[Ce,a,t,i]),Object(b.useEffect)((function(){void 0===a.text?ke(""):ke(a.text)}),[a.text]),Object(b.useEffect)((function(){if(!me){var e=Q({},a),t=Ee.length?{text:Ee}:{};delete e.text,i(Q({},e,{},t))}}),[we]);var Fe=function(e){var t=Q({},a);delete t[e],i(t)},Re=function(e,t){t.length>0?i(Q({},a,{},c()({},e,t))):Fe(e)},Ae=["",{label:p.formatMessage(ae?q.a.rulesTableActionShow:q.a.rulesTableActionHide),onClick:function(){return function(e){i(Q({},a,{impacting:e})),re(e),fe(0)}(!ae)}}],Te=[{label:p.formatMessage(q.a.description),filterValues:{onChange:function(e,t){return ke(t)},value:Ee}},{label:J.d.total_risk.title,type:J.d.total_risk.type,id:J.d.total_risk.urlParam,value:"checkbox-".concat(J.d.total_risk.urlParam),filterValues:{onChange:function(e,t){return Re(J.d.total_risk.urlParam,t)},value:a.total_risk,items:J.d.total_risk.values}},{label:J.d.res_risk.title,type:J.d.res_risk.type,id:J.d.res_risk.urlParam,value:"checkbox-".concat(J.d.res_risk.urlParam),filterValues:{onChange:function(e,t){return Re(J.d.res_risk.urlParam,t)},value:a.res_risk,items:J.d.res_risk.values}},{label:J.d.impact.title,type:J.d.impact.type,id:J.d.impact.urlParam,value:"checkbox-".concat(J.d.impact.urlParam),filterValues:{onChange:function(e,t){return Re(J.d.impact.urlParam,t)},value:a.impact,items:J.d.impact.values}},{label:J.d.likelihood.title,type:J.d.likelihood.type,id:J.d.likelihood.urlParam,value:"checkbox-".concat(J.d.likelihood.urlParam),filterValues:{onChange:function(e,t){return Re(J.d.likelihood.urlParam,t)},value:a.likelihood,items:J.d.likelihood.values}},{label:J.d.category.title,type:J.d.category.type,id:J.d.category.urlParam,value:"checkbox-".concat(J.d.category.urlParam),filterValues:{onChange:function(e,t){return Re(J.d.category.urlParam,t)},value:a.category,items:J.d.category.values}},{label:J.d.reports_shown.title,type:J.d.reports_shown.type,id:J.d.reports_shown.urlParam,value:"radio-".concat(J.d.reports_shown.urlParam),filterValues:{onChange:function(e,t){return i(Q({},a,{reports_shown:"undefined"===(r=t)?void 0:r})),void fe(0);var r},value:void 0===a.reports_shown?"undefined":"".concat(a.reports_shown),items:J.d.reports_shown.values}}],Ne={filters:function(){var e=Q({},a);delete e.text,delete e.impacting,delete e.reports_shown,delete e.topic;var t=Object.entries(e);return t.length>0?t.map((function(e){var t=J.d[e[0]],a=Array.isArray(e[1])?e[1].map((function(e){return{name:t.values.find((function(t){return t.value===String(e)})).label,value:e}})):[{name:t.values.find((function(t){return t.value===String(e[1])})).label,value:e[1]}];return{category:t.title,chips:a,urlParam:t.urlParam}})):[]}(),onDelete:function(e,t,r){r?i({impacting:!0,reports_shown:"true"}):t.map((function(e){var t=c()({},e.urlParam,a[e.urlParam].filter((function(t){return Number(t)!==Number(e.chips[0].value)})));t[e.urlParam].length>0?i(Q({},a,{},t)):Fe(e.urlParam)}))}};return g.a.createElement(g.a.Fragment,null,g.a.createElement(v.PrimaryToolbar,{pagination:{itemCount:_e,page:ue/oe+1,perPage:oe,onSetPage:function(e,t){xe(t)},onPerPageSelect:function(e,t){le(t)},isCompact:!1},exportConfig:{onSelect:function(e,t){return window.location="".concat(J.a,"/export/hits.").concat("json"===t?"json":"csv","/").concat(he)}},actionsConfig:{actions:Ae},filterConfig:{items:Te},activeFiltersConfig:Ne}),"fulfilled"===r&&g.a.createElement(T.b,{"aria-label":"rule-table",actionResolver:function(e,t){var a=t.rowIndex,r=_[a].rule?_[a].rule:null;return a%2==0&&r?r&&r.reports_shown?[{title:p.formatMessage(q.a.disableRule),onClick:function(e,t){return Me(t)}}]:[{title:p.formatMessage(q.a.enableRule),onClick:function(e,t){return Me(t)}}]:null},onCollapse:function(e,t,a){var r=u()(_);r[t]=Q({},r[t],{isOpen:a}),x(r)},sortBy:B,onSort:Pe,cells:y,rows:_},g.a.createElement(N.a,null),g.a.createElement(D.a,null)),"pending"===r&&g.a.createElement(L.a,null),"failed"===r&&g.a.createElement(V.a,{message:p.formatMessage(q.a.rulesTableFetchRulesError)}),g.a.createElement(v.TableToolbar,null,g.a.createElement(F.a,{itemCount:_e,perPage:oe,page:ue/oe+1,onSetPage:function(e,t){xe(t)},widgetId:"pagination-options-menu-bottom",variant:F.b.bottom})))};X.propTypes={fetchRules:j.a.func,rulesFetchStatus:j.a.string,rules:j.a.object,filters:j.a.object,addNotification:j.a.func,setFilters:j.a.func,history:j.a.object,intl:j.a.any};t.default=Object(I.c)(y()(Object(x.connect)((function(e,t){return Q({rules:e.AdvisorStore.rules,rulesFetchStatus:e.AdvisorStore.rulesFetchStatus,filters:e.AdvisorStore.filters},t)}),(function(e){return{fetchRules:function(t){return e(B.b(t))},addNotification:function(t){return e(Object(H.addNotification)(t))},setFilters:function(t){return e(B.j(t))}}}))(X)))},627:function(e,t,a){(e.exports=a(4)(!1)).push([e.i,":root {\n  --ins-color--orange: #ec7a08; }\n\n.pf-c-label.labelOverride {\n  vertical-align: middle;\n  margin-left: 20px; }\n\n.textOverride {\n  margin-top: var(--pf-global--spacer--md); }\n",""])}}]);