(window.webpackJsonp=window.webpackJsonp||[]).push([[12,10],{506:function(e,t,a){(e.exports=a(6)(!1)).push([e.i,"nav.pf-c-breadcrumb li{text-transform:capitalize}\n",""])},527:function(e,t,a){"use strict";var r=a(152),n=a.n(r),c=a(505),i=a.n(c),o=a(2),l=a.n(o),s=a(83),u=a(274),f=a(275),p=a(261),m=a.n(p),d=a(75),b=a(1),g=a.n(b),h=a(27),v=a(502),y=(a(528),a(29));function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var k=function(e){var t=e.current,a=e.fetchRule,r=e.match,n=e.ruleFetchStatus,c=e.rule,p=e.intl,m=Object(o.useState)([]),d=i()(m,2),b=d[0],g=d[1],h=Object(o.useState)(!1),v=i()(h,2),O=v[0],k=v[1],j=Object(o.useCallback)((function(){var e=[],t=r.url.split("/");e.push({title:t[1],navigate:"/".concat(t[1])}),"rules"===t[1]&&(t[1]+t[2]!=="rulessystems"?e.push({title:p.formatMessage(y.a.rules),navigate:"/rules"}):e.push({title:p.formatMessage(y.a.systems),navigate:"/rules/systems"})),void 0!==r.params.id&&void 0!==r.params.inventoryId&&e.push({title:c.description,navigate:"/".concat(r.url.split("/")[1],"/").concat(r.params.id)}),g(e)}),[p,r.params.id,r.params.inventoryId,r.url,c.description]);return Object(o.useEffect)((function(){var e=r.url.split("/");void 0!==r.params.inventoryId&&"systems"!==e[2]?a({rule_id:r.params.id}):j()}),[j,a,r.params.id,r.params.inventoryId,r.url]),Object(o.useEffect)((function(){"fulfilled"!==n||O||(k(!0),j())}),[j,n,O]),l.a.createElement(l.a.Fragment,null,("fulfilled"===n||b.length>0)&&l.a.createElement(u.a,null,b.map((function(e,t){return l.a.createElement(f.a,{key:t},l.a.createElement(s.Link,{to:e.navigate},e.title))})),l.a.createElement(f.a,{isActive:!0},t)),"pending"===n&&p.formatMessage(y.a.loading))};k.propTypes={current:g.a.string,fetchRule:g.a.func,match:g.a.object,rule:g.a.object,ruleFetchStatus:g.a.string,intl:g.a.any};t.a=Object(h.c)(m()(Object(d.connect)((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(a,!0).forEach((function(t){n()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({rule:e.AdvisorStore.rule,ruleFetchStatus:e.AdvisorStore.ruleFetchStatus},t)}),(function(e){return{fetchRule:function(t){return e(v.a(t))}}}))(k)))},528:function(e,t,a){var r=a(506);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0},c=a(7)(r,n);r.locals&&(e.exports=r.locals),e.hot.accept(506,(function(){var t=a(506);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var a,r=0;for(a in e){if(!t||e[a]!==t[a])return!1;r++}for(a in t)r--;return 0===r}(r.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");c(t)})),e.hot.dispose((function(){c()}))},590:function(e,t,a){"use strict";a.r(t);var r=a(153),n=a.n(r),c=a(262),i=a.n(c),o=a(152),l=a.n(o),s=a(530),u=a.n(s),f=a(505),p=a.n(f),m=a(2),d=a.n(m),b=a(345),g=a(261),h=a.n(g),v=a(1),y=a.n(v),O=a(230),k=a(205),j=a(166),E=a(496),w=a.n(E),_=a(83),P=a(75),S=a(246),x=a(273),M=a(328),C=a(304),F=a(305),R=a(42),T=a(329),A=a(327),N=a(84),D=a(27),H=a(502),I=a(509),B=a(529),V=a(555),L=a(18),z=a(510),J=a(602),U=a(29),W=a(591);function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function G(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(a,!0).forEach((function(t){l()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var K=function(e){var t=e.rules,a=e.filters,r=e.rulesFetchStatus,c=e.setFilters,o=e.fetchRules,s=e.addNotification,f=e.history,g=e.intl,h=Object(m.useState)([{title:g.formatMessage(U.a.description),transforms:[C.a]},{title:g.formatMessage(U.a.added),transforms:[C.a,Object(F.a)(15)]},{title:g.formatMessage(U.a.totalRisk),transforms:[C.a]},{title:g.formatMessage(U.a.systems),transforms:[C.a]},{title:d.a.createElement(d.a.Fragment,null,d.a.createElement(O.b,{size:"md"})," ",g.formatMessage(U.a.ansible)),transforms:[C.a],dataLabel:g.formatMessage(U.a.ansible)}]),v=p()(h,1)[0],y=Object(m.useState)([]),E=p()(y,2),P=E[0],N=E[1],D=Object(m.useState)({}),H=p()(D,2),q=H[0],K=H[1],Q=Object(m.useState)("-publish_date"),X=p()(Q,2),Y=X[0],Z=X[1],$=Object(m.useState)(a.impacting),ee=p()($,2),te=ee[0],ae=ee[1],re=Object(m.useState)(10),ne=p()(re,2),ce=ne[0],ie=ne[1],oe=Object(m.useState)(0),le=p()(oe,2),se=le[0],ue=le[1],fe=Object(m.useState)(!0),pe=p()(fe,2),me=pe[0],de=pe[1],be=Object(m.useState)(""),ge=p()(be,2),he=ge[0],ve=ge[1],ye=Object(m.useState)(""),Oe=p()(ye,2),ke=Oe[0],je=Oe[1],Ee=Object(W.a)(ke,800),we=t.meta?t.meta.count:0,_e=function(e){return Object.assign.apply(Object,[{}].concat(u()(Object.entries(e).map((function(e){return Array.isArray(e[1])?l()({},e[0],e[1].join()):l()({},e[0],e[1])})))))},Pe=Object(m.useCallback)((function(e,t,a){var r="".concat("asc"===a?"":"-").concat({1:"description",2:"publish_date",3:"total_risk",4:"impacted_count",5:"playbook_count"}[t]);K({index:t,direction:a}),Z(r),ue(0)}),[Z,K,ue]),Se=function(e){ue(e*ce-ce)},xe=function(){var e=i()(n.a.mark((function e(t){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=P[t].rule,e.prev=1,!r.reports_shown){e.next=7;break}return e.next=5,V.a.post("".concat(L.a,"/ack/"),{rule_id:r.rule_id});case 5:e.next=9;break;case 7:return e.next=9,V.a.delete("".concat(L.a,"/ack/").concat(r.rule_id,"/"));case 9:o(G({},_e(a),{offset:0,limit:ce,impacting:te,sort:Y})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),s({variant:"danger",dismissable:!0,title:r.reports_shown?g.formatMessage(U.a.rulesTableHideReportsErrorDisabled):g.formatMessage(U.a.rulesTableHideReportsErrorEnabled),description:g.formatMessage(U.a.rulesTableHideReportsErrorBody,{ruleName:r.description})});case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),Me=Object(m.useCallback)((function(){ue(0)}),[]);Object(m.useEffect)((function(){if(f.location.search){var e=new URLSearchParams(f.location.search),t=Array.from(e).reduce((function(e,t){var a=p()(t,2),r=a[0],n=a[1];return G({},e,l()({},r,"true"===n||"false"===n?JSON.parse(n):n.split(",")))}),{});t.reports_shown=void 0===t.reports_shown||"undefined"===t.reports_shown[0]?void 0:t.reports_shown,ae(t.impacting),c(G({},t))}de(!1)}),[]),Object(m.useEffect)((function(){var e=Object.keys(a).map((function(e){return"".concat(e,"=").concat(Array.isArray(a[e])?a[e].join():a[e])})).join("&");ve("?".concat(e)),f.replace({search:"?".concat(e)})}),[a,f]),Object(m.useEffect)((function(){me||o(G({},_e(a),{offset:se,limit:ce,sort:Y}))}),[o,me,a,ce,se,Y]),Object(m.useEffect)((function(){P.length||Pe(null,2,"desc")}),[Pe,P.length]),Object(m.useEffect)((function(){if(t.data)if(0===t.data.length)N([{cells:[{title:d.a.createElement(z.a,{icon:k.b,iconClass:"ansibleCheck",size:"sm",title:g.formatMessage(U.a.rulesTableNoRuleHitsTitle),text:a.reports_shown?g.formatMessage(U.a.rulesTableNoRuleHitsEnabledRulesBody):g.formatMessage(U.a.rulesTableNoRuleHitsAnyRulesBody)},a.reports_shown&&d.a.createElement(S.a,{variant:"link",style:{paddingTop:24},onClick:function(){c(G({},a,{reports_shown:void 0})),Me()}},g.formatMessage(U.a.rulesTableNoRuleHitsAddDisabledButton))),props:{colSpan:5}}]}]);else{var e=t.data.flatMap((function(e,t){return[{isOpen:!1,rule:e,cells:[{title:e.reports_shown?d.a.createElement(_.Link,{key:t,to:"/rules/".concat(e.rule_id)},e.description):d.a.createElement("span",{key:t}," ",d.a.createElement(x.a,{isRead:!0},g.formatMessage(U.a.disabled))," ",e.description)},{title:d.a.createElement("div",{key:t},w()(e.publish_date).fromNow())},{title:d.a.createElement("div",{className:"pf-m-center",key:t,style:{verticalAlign:"top"}},d.a.createElement(b.Battery,{label:g.formatMessage(U.a.totalRisk),labelHidden:!0,severity:e.total_risk}))},{title:d.a.createElement("div",{key:t}," ",e.reports_shown?"".concat(e.impacted_systems_count.toLocaleString()):g.formatMessage(U.a.nA))},{title:d.a.createElement("div",{className:"pf-m-center ",key:t},e.playbook_count?d.a.createElement(j.b,{className:"ansibleCheck"}):g.formatMessage(U.a.no))}]},{parent:2*t,fullWidth:!0,cells:[{title:d.a.createElement(b.Main,{className:"pf-m-light"}," ",d.a.createElement(J.a,{rule:e}))}]}]}));N(e.asMutable())}}),[Me,a,t,c]),Object(m.useEffect)((function(){void 0===a.text?je(""):je(a.text)}),[a.text]),Object(m.useEffect)((function(){if(!me){var e=G({},a),t=ke.length?{text:ke}:{};delete e.text,c(G({},e,{},t))}}),[Ee]);var Ce=function(e){var t=G({},a);delete t[e],c(t)},Fe=function(e,t){t.length>0?c(G({},a,{},l()({},e,t))):Ce(e)},Re=["",{label:g.formatMessage(te?U.a.rulesTableActionShow:U.a.rulesTableActionHide),onClick:function(){return function(e){c(G({},a,{impacting:e})),ae(e),ue(0)}(!te)}}],Te=[{label:g.formatMessage(U.a.description),filterValues:{key:"text-filter",onChange:function(e,t){return je(t)},value:ke}},{label:L.c.total_risk.title,type:L.c.total_risk.type,id:L.c.total_risk.urlParam,value:"checkbox-".concat(L.c.total_risk.urlParam),filterValues:{key:"".concat(L.c.total_risk.urlParam,"-filter"),onChange:function(e,t){return Fe(L.c.total_risk.urlParam,t)},value:a.total_risk,items:L.c.total_risk.values}},{label:L.c.res_risk.title,type:L.c.res_risk.type,id:L.c.res_risk.urlParam,value:"checkbox-".concat(L.c.res_risk.urlParam),filterValues:{key:"".concat(L.c.res_risk.urlParam,"-filter"),onChange:function(e,t){return Fe(L.c.res_risk.urlParam,t)},value:a.res_risk,items:L.c.res_risk.values}},{label:L.c.impact.title,type:L.c.impact.type,id:L.c.impact.urlParam,value:"checkbox-".concat(L.c.impact.urlParam),filterValues:{key:"".concat(L.c.impact.urlParam,"-filter"),onChange:function(e,t){return Fe(L.c.impact.urlParam,t)},value:a.impact,items:L.c.impact.values}},{label:L.c.likelihood.title,type:L.c.likelihood.type,id:L.c.likelihood.urlParam,value:"checkbox-".concat(L.c.likelihood.urlParam),filterValues:{key:"".concat(L.c.likelihood.urlParam,"-filter"),onChange:function(e,t){return Fe(L.c.likelihood.urlParam,t)},value:a.likelihood,items:L.c.likelihood.values}},{label:L.c.category.title,type:L.c.category.type,id:L.c.category.urlParam,value:"checkbox-".concat(L.c.category.urlParam),filterValues:{key:"".concat(L.c.category.urlParam,"-filter"),onChange:function(e,t){return Fe(L.c.category.urlParam,t)},value:a.category,items:L.c.category.values}},{label:L.c.reports_shown.title,type:L.c.reports_shown.type,id:L.c.reports_shown.urlParam,value:"radio-".concat(L.c.reports_shown.urlParam),filterValues:{key:"".concat(L.c.reports_shown.urlParam,"-filter"),onChange:function(e,t){return c(G({},a,{reports_shown:"undefined"===(r=t)?void 0:r})),void ue(0);var r},value:void 0===a.reports_shown?"undefined":"".concat(a.reports_shown),items:L.c.reports_shown.values}}],Ae={filters:function(){var e=G({},a);delete e.text,delete e.impacting,delete e.reports_shown,delete e.topic;var t=Object.entries(e);return t.length>0?t.map((function(e){var t=L.c[e[0]],a=Array.isArray(e[1])?e[1].map((function(e){return{name:t.values.find((function(t){return t.value===String(e)})).label,value:e}})):[{name:t.values.find((function(t){return t.value===String(e[1])})).label,value:e[1]}];return{category:t.title,chips:a,urlParam:t.urlParam}})):[]}(),onDelete:function(e,t,r){r?c({impacting:!0,reports_shown:"true"}):t.map((function(e){var t=l()({},e.urlParam,a[e.urlParam].filter((function(t){return Number(t)!==Number(e.chips[0].value)})));t[e.urlParam].length>0?c(G({},a,{},t)):Ce(e.urlParam)}))}};return d.a.createElement(d.a.Fragment,null,d.a.createElement(b.PrimaryToolbar,{pagination:{itemCount:we,page:se/ce+1,perPage:ce,onSetPage:function(e,t){Se(t)},onPerPageSelect:function(e,t){ie(t)},isCompact:!1},exportConfig:{onSelect:function(e,t){return window.location="".concat(L.a,"/export/hits.").concat("json"===t?"json":"csv","/").concat(he)}},actionsConfig:{actions:Re},filterConfig:{items:Te},activeFiltersConfig:Ae}),"fulfilled"===r&&d.a.createElement(R.b,{"aria-label":"rule-table",actionResolver:function(e,t){var a=t.rowIndex,r=P[a].rule?P[a].rule:null;return a%2==0&&r?r&&r.reports_shown?[{title:g.formatMessage(U.a.disableRule),onClick:function(e,t){return xe(t)}}]:[{title:g.formatMessage(U.a.enableRule),onClick:function(e,t){return xe(t)}}]:null},onCollapse:function(e,t,a){var r=u()(P);r[t]=G({},r[t],{isOpen:a}),N(r)},sortBy:q,onSort:Pe,cells:v,rows:P},d.a.createElement(T.a,null),d.a.createElement(A.a,null)),"pending"===r&&d.a.createElement(I.a,null),"failed"===r&&d.a.createElement(B.a,{message:g.formatMessage(U.a.rulesTableFetchRulesError)}),d.a.createElement(b.TableToolbar,null,d.a.createElement(M.a,{itemCount:we,perPage:ce,page:se/ce+1,onSetPage:function(e,t){Se(t)},widgetId:"pagination-options-menu-bottom",variant:M.b.bottom})))};K.propTypes={fetchRules:y.a.func,rulesFetchStatus:y.a.string,rules:y.a.object,filters:y.a.object,addNotification:y.a.func,setFilters:y.a.func,history:y.a.object,intl:y.a.any};t.default=Object(D.c)(h()(Object(P.connect)((function(e,t){return G({rules:e.AdvisorStore.rules,rulesFetchStatus:e.AdvisorStore.rulesFetchStatus,filters:e.AdvisorStore.filters},t)}),(function(e){return{fetchRules:function(t){return e(H.b(t))},addNotification:function(t){return e(Object(N.addNotification)(t))},setFilters:function(t){return e(H.i(t))}}}))(K)))},592:function(e,t,a){(e.exports=a(6)(!1)).push([e.i,":root{--ins-color--orange: #ec7a08}.pf-c-label.labelOverride{vertical-align:middle;margin-left:20px}.textOverride{margin-top:var(--pf-global--spacer--md)}\n",""])},979:function(e,t,a){"use strict";a.r(t);var r=a(2),n=a.n(r),c=a(261),i=a.n(c),o=a(345),l=a(268),s=a(283),u=a(285),f=a(286),p=a(75),m=a(1),d=a.n(m),b=a(229),g=a(186),h=a(27),v=a(502),y=a(527),O=a(590),k=a(509),j=a(510),E=a(29),w=(a(981),function(e){var t=e.match,a=e.fetchTopic,c=e.setFilters,i=e.topic,p=e.topicFetchStatus,m=e.intl,d=e.filters;return Object(r.useEffect)((function(){void 0===d.topic&&c({impacting:!0,reports_shown:"true",topic:t.params.id})})),Object(r.useEffect)((function(){return a({topic_id:t.params.id}),function(){c({impacting:!0,reports_shown:"true"})}}),[a,t.params.id,c]),n.a.createElement(n.a.Fragment,null,n.a.createElement(o.PageHeader,null,n.a.createElement(y.a,{current:i.name,match:t}),"fulfilled"===p&&n.a.createElement(n.a.Fragment,null,n.a.createElement(l.a,{size:"2xl",className:"titleOverride"},i.name,i.featured&&n.a.createElement(s.a,{className:"labelOverride"},n.a.createElement(b.b,null),m.formatMessage(E.a.featured))),n.a.createElement(u.a,{className:"textOverride"},n.a.createElement(f.a,{component:f.b.p},n.a.createElement(o.Truncate,{text:i.description,length:600,expandText:m.formatMessage(E.a.readmore),collapseText:m.formatMessage(E.a.readless),inline:!0})))),""===p||"pending"===p&&n.a.createElement(k.a,null)),n.a.createElement(o.Main,null,n.a.createElement(n.a.Fragment,null,""===p||"pending"===p||"fulfilled"===p&&n.a.createElement(n.a.Fragment,null,n.a.createElement(l.a,{headingLevel:"h3",size:"2xl",className:"titlePaddingOverride"}," Rules"),d.topic&&n.a.createElement(O.default,null)),"failed"===p||"rejected"===p&&n.a.createElement(j.a,{icon:g.b,title:m.formatMessage(E.a.topicDetailslNodetailsTitle),text:m.formatMessage(E.a.topicDetailslNodetailsBody)}))))});w.propTypes={match:d.a.any,fetchTopic:d.a.func,topic:d.a.object,topicFetchStatus:d.a.string,setFilters:d.a.func,intl:d.a.any,filters:d.a.object};t.default=Object(h.c)(i()(Object(p.connect)((function(e){return{topic:e.AdvisorStore.topic,topicFetchStatus:e.AdvisorStore.topicFetchStatus,filters:e.AdvisorStore.filters}}),(function(e){return{fetchTopic:function(t){return e(v.g(t))},setFilters:function(t){return e(v.i(t))}}}))(w)))},981:function(e,t,a){var r=a(592);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0},c=a(7)(r,n);r.locals&&(e.exports=r.locals),e.hot.accept(592,(function(){var t=a(592);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var a,r=0;for(a in e){if(!t||e[a]!==t[a])return!1;r++}for(a in t)r--;return 0===r}(r.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");c(t)})),e.hot.dispose((function(){c()}))}}]);
//# sourceMappingURL=TopicDetails.js.map