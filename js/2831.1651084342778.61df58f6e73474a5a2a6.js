(self.webpackChunkadvisor_frontend=self.webpackChunkadvisor_frontend||[]).push([[2831],{58921:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(4942),a=n(15861),s=n(87757),l=n.n(s),c=n(53446),i=n(35240),o=n(59303),u=n(71094),m=n(97109);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(e){var t={date:(new Date).toISOString().replace(/[T:]/g,"-").split(".")[0]+"-utc"};return"Insights-Advisor_".concat(e,"--").concat(t.date)};const g=function(){var e=(0,a.Z)(l().mark((function e(t,n,r,a,s,p,g){var b,v,h;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b=(null==a?void 0:a.length)&&{tags:a},s&&(b=d(d({},b),(0,m.s0)(s,p))),g((0,c.addNotification)(o.LH.pending)),e.next=6,(0,u.dX)("".concat(o._n,"/export/").concat(t,".").concat("json"===n?"json":"csv"),{},d(d({},r),b)).then((function(e){return g((0,c.addNotification)(o.LH.success)),e})).catch((function(){return g((0,c.addNotification)(o.LH.error))}));case 6:v=e.sent.data,h="json"===n?JSON.stringify(v):v,(0,i.Sv)(h,f(t),n),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),"".concat(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n,r,a,s,l,c){return e.apply(this,arguments)}}()},66584:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n(63732),a=n(15914),s=n(42293),l=n(26407),c=n(99332),i=n(69507),o=n(45697),u=n.n(o),m=n(93264),p=n.n(m),d=n(30893),f=n(86896),g=function(e){var t,n=e.labelList,o=e.isCompact,u=(0,f.Z)(),m=(t=n.map((function(e){return e.id})),Object.entries(t.reduce((function(e,t){return e[t]=(e[t]||0)+1,e}),{})).sort((function(e,t){return t[1]-e[1]}))),g=function(e,t){return p().createElement(s.Label,{icon:e,variant:"outline",color:"blue",isCompact:o},t)};return p().createElement(l.e,{numLabels:1,isCompact:o},m.map((function(e){return function(e,t){return 1===e?g(p().createElement(r.ZP,null),u.formatMessage(d.Z.availability)):2===e?g(p().createElement(c.ZP,null),u.formatMessage(d.Z.security)):3===e?g(p().createElement(a.ZP,null),u.formatMessage(d.Z.stability)):4===e?g(p().createElement(i.ZP,null),u.formatMessage(d.Z.performance)):void 0}(Number(e[0]))})))};g.propTypes={labelList:u().array,isCompact:u().bool},g.defaultProps={isCompact:!0};const b=g},76341:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(2095),a=n(85962),s=n(21015),l=n(62965),c=n(93264),i=n.n(c),o=n(45697),u=function(e){var t=e.message;return i().createElement(i().Fragment,null,i().createElement(r.Card,{className:"adv-c-card-empty-rule"},i().createElement(s.CardHeader,null,i().createElement(l.ZP,{size:"lg"})),i().createElement(a.CardBody,null,t)))};const m=u;u.propTypes={message:n.n(o)().string}},44788:(e,t,n)=>{"use strict";n.d(t,{Z:()=>P});var r=n(4942),a=n(15861),s=n(70885),l=n(87757),c=n.n(l),i=n(93264),o=n.n(i),u=n(59303),m=n(6202),p=n(32752),d=n(4853),f=n(23811),g=n(78826),b=n(71094),v=n(45697),h=n.n(v),y=n(12282),E=n(71355),k=n(30893),Z=n(28216),O=n(86896),S=n(77647);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=function(e){var t=e.handleModalToggle,n=e.isModalOpen,r=e.host,l=e.hosts,v=e.rule,h=e.afterFn,M=(0,O.Z)(),w=(0,Z.useDispatch)(),P=function(e){return w((0,E.wN)(e))},_=(0,i.useState)(""),D=(0,s.Z)(_,2),I=D[0],C=D[1],T=(0,i.useState)(void 0!==r||l.length>0),x=(0,s.Z)(T,2),N=x[0],R=x[1],F=(0,S.om)(),L=(0,s.Z)(F,2),B=L[0],q=(L[1].isLoading,function(){var e=(0,a.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={systems:l,justification:I},e.prev=1,e.next=4,(0,b.SO)("".concat(u._n,"/rule/").concat(v.rule_id,"/ack_hosts/"),{},t);case 4:!N&&P({variant:"success",dismissable:!0,timeout:!0,title:M.formatMessage(k.Z.recSuccessfullyDisabled)}),h&&h(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),P({variant:"danger",dismissable:!0,title:M.formatMessage(k.Z.error),description:"".concat(e.t0)});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}()),z=function(){var e=(0,a.Z)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("enabled"!==v.rule_status||l.length){e.next=15;break}return n=N?{type:"HOST",options:{rule:v.rule_id,system_uuid:r.id,justification:I}}:{type:"RULE",options:j({rule_id:v.rule_id},I&&{justification:I})},e.prev=2,e.next=5,B(n).unwrap();case 5:P({variant:"success",timeout:!0,dismissable:!0,title:M.formatMessage(k.Z.recSuccessfullyDisabled)}),C(""),h&&h(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),P({variant:"danger",dismissable:!0,title:M.formatMessage(k.Z.error),description:"".concat(e.t0)});case 13:e.next=16;break;case 15:q();case 16:t(!1);case 17:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();return o().createElement(g.u_,{variant:"small",title:M.formatMessage(k.Z.disableRule),isOpen:n,onClose:function(){t(!1),C("")},actions:[o().createElement(m.Button,{key:"confirm",variant:"primary",onClick:function(){return z()},ouiaId:"confirm"},M.formatMessage(k.Z.save)),o().createElement(m.Button,{key:"cancel",variant:"link",onClick:function(){t(!1),C("")},ouiaId:"cancel"},M.formatMessage(k.Z.cancel))]},M.formatMessage(k.Z.disableRuleBody),o().createElement(d.l,null,o().createElement(f.c,{fieldId:"blank-form"}),(void 0!==r||l.length>0)&&o().createElement(f.c,{fieldId:"disable-rule-one-system"},o().createElement(p.X,{isChecked:N,onChange:function(){R(!N)},label:l.length?M.formatMessage(k.Z.disableRuleForSystems):M.formatMessage(k.Z.disableRuleSingleSystem),id:"disable-rule-one-system",name:"disable-rule-one-system"})),o().createElement(f.c,{label:M.formatMessage(k.Z.justificationNote),fieldId:"disable-rule-justification"},o().createElement(y.oi,{type:"text",id:"disable-rule-justification","aria-describedby":"disable-rule-justification",value:I,onChange:function(e){return C(e)},onKeyDown:function(e){return"Enter"===e.key&&(e.preventDefault(),z())}}))))};w.propTypes={isModalOpen:h().bool,host:h().object,handleModalToggle:h().func,rule:h().object,afterFn:h().func,hosts:h().array},w.defaultProps={isModalOpen:!1,handleModalToggle:function(){},system:void 0,rule:{},afterFn:function(){},host:void 0,hosts:[]};const P=w},95358:(e,t,n)=>{"use strict";n.d(t,{Z:()=>M});var r=n(15861),a=n(70885),s=n(87757),l=n.n(s),c=n(93264),i=n.n(c),o=n(30381),u=n(59303),m=n(6202),p=n(62410),d=n(71094),f=n(24561),g=n(78826),b=n(6234),v=n(45697),h=n.n(v),y=n(30893),E=n(71355),k=n(28216),Z=n(77647),O=n(86896),S=function(e){var t=e.handleModalToggle,n=e.isModalOpen,s=e.rule,v=e.afterFn,h=(0,O.Z)(),S=(0,k.useDispatch)(),M=[h.formatMessage(y.Z.systemName),h.formatMessage(y.Z.justificationNote),h.formatMessage(y.Z.dateDisabled),""],j=(0,c.useState)([]),w=(0,a.Z)(j,2),P=w[0],_=w[1],D=(0,c.useState)(!1),I=(0,a.Z)(D,2),C=I[0],T=I[1],x=(0,Z.u7)({rule_id:s.rule_id,limit:s.hosts_acked_count}),N=x.data,R=void 0===N?[]:N,F=x.isFetching,L=x.isLoading,B=x.refetch,q=function(){var e=(0,r.Z)(l().mark((function e(n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.Sp)("".concat(u._n,"/hostack/").concat(n.id,"/"));case 3:B(),T(!0),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),t(!1),r={variant:"danger",dismissable:!0,title:h.formatMessage(y.Z.error),description:"".concat(e.t0)},S((0,E.wN)(r));case 11:case"end":return e.stop()}var r}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){var e=null==R?void 0:R.map((function(e){return{cells:[e.display_name||e.system_uuid,e.justification||h.formatMessage(y.Z.none),{title:i().createElement(p.Z,{date:new Date(e.updated_at),type:"onlyDate"})},{title:i().createElement(m.Button,{key:e.system_uuid,isInline:!0,variant:"link",onClick:function(){return q(e)}},i().createElement(b.ZP,{size:"sm"})," ".concat(h.formatMessage(y.Z.enable)))}]}}));L||0!==R.length||(v(),t(!1)),_(e)}),[R]),i().createElement(g.u_,{width:"75%",title:h.formatMessage(y.Z.hostAckModalTitle),isOpen:n,onClose:function(){C&&v(),t(!1)}},F?i().createElement(o.Table,{"aria-label":"host-ack-table",rows:[{cells:[{props:{colSpan:3},title:i().createElement(f.aV,null)}]}],cells:M},i().createElement(o.TableHeader,null),i().createElement(o.TableBody,null)):i().createElement(o.Table,{"aria-label":"host-ack-table",rows:P,cells:M},i().createElement(o.TableHeader,null),i().createElement(o.TableBody,null)))};S.propTypes={isModalOpen:h().bool,handleModalToggle:h().func,rule:h().object,afterFn:h().func},S.defaultProps={isModalOpen:!1,handleModalToggle:function(){},rule:{},afterFn:function(){}};const M=S},87533:(e,t,n)=>{"use strict";n.d(t,{Z:()=>V});var r=n(4942),a=n(45987),s=n(25325),l=n.n(s),c=n(39693),i=n.n(c),o=n(59303),u=n(86896),m=n(29558),p=n(92506),d=n(88292),f=n(66197),g=n(50470),b=n(6497),v=n(75662),h=n(39563),y=n(45697),E=n.n(y),k=n(93264),Z=n.n(k),O=n(52202),S=n(15861),M=n(70885),j=n(87757),w=n.n(j),P=n(6202),_=n(49580),D=n(11239),I=n(90502),C=n(61088),T=n(30893),x=n(55140),N=function(e){var t=e.ruleId,n=e.ruleRating,r=e.updateRatingAction,a=(0,u.Z)(),s=(0,x.Z)().toggleFeedbackModal,l=(0,k.useState)(n),c=(0,M.Z)(l,2),i=c[0],o=c[1],m=(0,k.useState)(!1),p=(0,M.Z)(m,2),d=p[0],f=p[1],g=(0,k.useState)(a.formatMessage(T.Z.feedbackThankyou)),b=(0,M.Z)(g,2),v=b[0],h=b[1],y=function(){var e=(0,S.Z)(w().mark((function e(n){var a;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i===n?0:n,e.prev=1,e.next=4,r(t,a);case 4:o(a),f(!0),setTimeout((function(){return h("")}),3e3),s(!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Z().createElement("span",{className:"adv-rating-span"},a.formatMessage(T.Z.ruleHelpful),Z().createElement(P.Button,{variant:"plain","aria-label":"thumbs-up",onClick:function(){return y(1)},ouiaId:"thumbsUp"},1===i?Z().createElement(C.ZP,{className:"like",size:"sm"}):Z().createElement(D.ZP,{size:"sm"})),Z().createElement(P.Button,{variant:"plain","aria-label":"thumbs-down",onClick:function(){return y(-1)},ouiaId:"thumbsDown"},-1===i?Z().createElement(I.ZP,{className:"dislike",size:"sm"}):Z().createElement(_.ZP,{size:"sm"})),d&&v)};N.propTypes={ruleId:E().string.isRequired,ruleRating:E().number.isRequired,updateRatingAction:E().func.isRequired};const R=N;var F=n(24047);var L=n(68770),B=n(66451),q=n(28186),z=["intlProps","history"];function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var H=function(e){var t,n=e.children,r=e.rule,a=e.resolutionRisk,s=e.topics,c=e.header,m=e.isDetailsPage,y=e.onFeedbackChanged,E=e.isOpenShift,k=e.riskOfChangeDesc,S=e.messageDescriptors,M=(0,u.Z)(),j=function(){return s&&i()(s.map((function(e){return l()(e.tag.split(" "),r.tags.split(" ")).length&&Z().createElement(Z().Fragment,{key:e.slug},Z().createElement(v.Link,{to:"/topics/".concat(e.slug)},"".concat(e.name)))})))},w=function(e,t){return"string"==typeof e&&Boolean(e)&&Z().createElement("span",{className:t&&"genericOverride"},Z().createElement(h.Z,{rehypePlugins:[L.Z,B.Z]},e))};return Z().createElement(p.Split,{className:"ins-c-rule-details__split",hasGutter:!0},Z().createElement(p.SplitItem,null,Z().createElement(d.Stack,{hasGutter:!0},c&&Z().createElement(d.StackItem,null,c),Z().createElement(d.StackItem,null,E&&w(r.generic,!0),!E&&(m?w(r.generic,!0):w(r.summary))),r.node_id&&Z().createElement(d.StackItem,null,Z().createElement("a",{rel:"noopener noreferrer",target:"_blank",href:"https://access.redhat.com/node/".concat(r.node_id)},M.formatMessage(T.Z.knowledgebaseArticle)," ",Z().createElement(g.ZP,{size:"sm"}))),s&&r.tags&&j().length>0&&Z().createElement(d.StackItem,null,Z().createElement("strong",null,M.formatMessage(T.Z.topicRelatedToRule)),Z().createElement("br",null),(t=j()).map((function(e,n){return Z().createElement(Z().Fragment,{key:n},e,n+1!==t.length&&Z().createElement("strong",{className:"adv-verticalDivider"}," | "))}))),m&&y&&Z().createElement(R,{ruleId:r.rule_id,ruleRating:r.rating,updateRatingAction:y}),!m&&(null==r?void 0:r[E?"impacted_clusters_count":"impacted_systems_count"])>0&&Z().createElement(d.StackItem,null,Z().createElement(v.Link,{key:"".concat(r.rule_id,"-link"),to:"/recommendations/".concat(r.rule_id)},E?M.formatMessage(S.viewAffectedClusters,{clusters:r.impacted_clusters_count}):M.formatMessage(T.Z.viewAffectedSystems,{systems:r.impacted_systems_count}))))),Z().createElement(p.SplitItem,null,Z().createElement(d.Stack,{gutter:"sm"},n&&Z().createElement(d.StackItem,null,n),Z().createElement(d.StackItem,null,Z().createElement(d.Stack,{className:"adv-l-stack-rule-details"},Z().createElement(d.StackItem,null,Z().createElement("strong",null,M.formatMessage(T.Z.totalRisk))),Z().createElement(d.StackItem,{className:"pf-u-display-inline-flex alignCenterOverride pf-u-pb-sm pf-u-pt-sm"},Z().createElement("span",{className:"adv-l-stack-rule-details-item"},Z().createElement("span",null,Z().createElement(b.Z,{value:r.total_risk,isCompact:!0})),Z().createElement(d.Stack,{hasGutter:!0,className:"description-stack-override"},Z().createElement(d.StackItem,null,Z().createElement(f.TextContent,null,Z().createElement(f.Text,{component:f.TextVariants.p},M.formatMessage(T.Z.rulesDetailsTotalriskBody,{risk:o.Nq[r.total_risk]||M.formatMessage(T.Z.undefined),strong:function(e){return(0,q.f)(e)}})))),Z().createElement(d.Stack,null,Z().createElement(d.StackItem,null,Z().createElement(F.c,{className:"severity-line",title:M.formatMessage(T.Z.likelihoodLevel,{level:o.FV[r.likelihood]}),value:r.likelihood,tooltipMessage:M.formatMessage(T.Z.likelihoodDescription,{level:o.gm[r.likelihood]})})),Z().createElement(d.StackItem,null,Z().createElement(F.c,{className:"severity-line",title:M.formatMessage(T.Z.impactLevel,{level:o.dz[r.impact.impact]}),value:r.impact.impact,tooltipMessage:M.formatMessage(T.Z.impactDescription,{level:o.rs[r.impact.impact]})})))))),a&&k&&Z().createElement(Z().Fragment,null,Z().createElement("hr",null),Z().createElement(d.StackItem,null,Z().createElement("strong",null,M.formatMessage(T.Z.riskofchange))),Z().createElement(d.StackItem,{className:"pf-u-display-inline-flex alignCenterOverride pf-u-pb-sm pf-u-pt-sm"},Z().createElement("span",{className:"adv-l-stack-rule-detailsitem"},Z().createElement("span",null,Z().createElement(b.Z,{text:o.MS[a],value:a,hideIcon:!0,isCompact:!0})),Z().createElement(d.Stack,{hasGutter:!0,className:"description-stack-override"},Z().createElement(d.StackItem,null,Z().createElement(f.TextContent,null,Z().createElement(f.Text,{component:f.TextVariants.p},a?k:M.formatMessage(T.Z.undefined)))),!E&&Z().createElement(d.StackItem,null,(0,O.k)(r.reboot_required)))))))))))},G=function(e){var t=e.intlProps,n=e.history,s=(0,a.Z)(e,z),l=n?v.Router:Z().Fragment,c=t?m.Z:Z().Fragment;return Z().createElement(l,n&&{history:n},Z().createElement(c,t&&function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({locale:navigator.language.slice(0,2),messages:T.Z,onError:console.log},t),Z().createElement(H,s)))};G.propTypes={children:E().any.isRequired,rule:E().object.isRequired,topics:E().array,header:E().any.isRequired,isDetailsPage:E().bool.isRequired,resolutionRisk:E().number,riskOfChangeDesc:E().string,onFeedbackChanged:E().func,isOpenShift:E().bool.isRequired,intlProps:E().object,messageDescriptors:E().object,history:E().object};const V=G},70347:()=>{},32857:()=>{},90479:()=>{},78752:()=>{},25238:()=>{},16166:()=>{}}]);
//# sourceMappingURL=../sourcemaps/2831.1eb717e873766c6ee53ff6845c4d86b1.js.map