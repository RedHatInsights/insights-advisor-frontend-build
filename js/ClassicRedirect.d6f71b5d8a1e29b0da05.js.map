{"version":3,"sources":["webpack:///./src/PresentationalComponents/Loading/Loading.js","webpack:///./src/SmartComponents/Recs/ClassicRedirect.js"],"names":["Loading","ClassicRedirect","useState","fetchStatus","setFetchStatus","inventoryId","setInventoryId","intl","useIntl","dispatch","useDispatch","pathname","window","location","split","starting_index","some","val","id","classicId","useEffect","a","Api","get","data","results","addNotification","variant","dismissable","title","formatMessage","messages","error","description","Fragment","to","icon","TimesCircleIcon","inventoryIdNotFound"],"mappings":"2FAAA,+CAWeA,IAPC,kBAAM,oCAClB,kBAAC,OAAD,KACI,kBAAC,WAAD,KACI,kBAAC,OAAD,W,8MCoCGC,UA/BS,WAAM,MACYC,mBAAS,WADrB,WACnBC,EADmB,KACNC,EADM,OAEYF,qBAFZ,WAEnBG,EAFmB,KAENC,EAFM,KAGpBC,EAAOC,cACPC,EAAWC,wBACXC,EAAWC,OAAOC,SAASF,SAASG,MAAM,KAC1CC,EAAiBJ,EAASK,MAAK,SAAAC,GAAG,MAAY,SAARA,KAAkB,EAAI,EAC5DC,EAAKP,aAAH,EAAGA,EAAWI,GAChBI,EAAYR,aAAH,EAAGA,EAAWI,EAAiB,GAe9C,OAbAK,qBAAU,WACN,cAAC,sBAAAC,EAAA,2EAEOf,EAFP,SAE6BgB,IAAIC,IAAJ,8CAA+CJ,IAF5E,mBAE0FK,KAAKC,QAAQ,GAAGP,IAF1G,cAGOd,EAAe,aAHtB,gDAKOK,EAASiB,0BAAgB,CACrBC,QAAS,SAAUC,aAAa,EAAMC,MAAOtB,EAAKuB,cAAcC,IAASC,OAAQC,YAAa,GAAF,gBAChG7B,EAAe,YAPtB,wDAAD,KAUD,CAACE,EAAgBF,EAAgBe,EAAWZ,EAAME,IAE9C,kBAAC,IAAMyB,SAAP,KACc,YAAhB/B,GAA6B,kBAAC,IAAD,MACb,cAAhBA,GAA+B,kBAAC,IAAD,CAAUgC,GAAE,2BAAsBjB,EAAtB,YAA4Bb,EAA5B,OAC3B,aAAhBF,GAA8B,kBAAC,IAAD,CAC3BiC,KAAMC,IAAiBR,MAAOtB,EAAKuB,cAAcC,IAASO","file":"js/ClassicRedirect.d6f71b5d8a1e29b0da05.js","sourcesContent":["import { Card } from '@patternfly/react-core/dist/js/components/Card/Card';\nimport { CardBody } from '@patternfly/react-core/dist/js/components/Card/CardBody';\nimport { List } from 'react-content-loader';\nimport React from 'react';\nconst Loading = () => <>\n    <Card>\n        <CardBody>\n            <List />\n        </CardBody>\n    </Card></>;\n\nexport default Loading;\n","import React, { useEffect, useState } from 'react';\n\nimport Api from '../../Utilities/Api';\nimport Loading from '../../PresentationalComponents/Loading/Loading';\nimport MessageState from '../../PresentationalComponents/MessageState/MessageState';\nimport { Redirect } from 'react-router-dom';\nimport TimesCircleIcon from '@patternfly/react-icons/dist/js/icons/times-circle-icon';\nimport { addNotification } from '@redhat-cloud-services/frontend-components-notifications';\nimport messages from '../../Messages';\nimport { useDispatch } from 'react-redux';\nimport { useIntl } from 'react-intl';\n\nconst ClassicRedirect = () => {\n    const [fetchStatus, setFetchStatus] = useState('pending');\n    const [inventoryId, setInventoryId] = useState();\n    const intl = useIntl();\n    const dispatch = useDispatch();\n    const pathname = window.location.pathname.split('/');\n    const starting_index = pathname.some(val => val === 'beta') ? 6 : 5;\n    const id = pathname?.[starting_index];\n    const classicId = pathname?.[starting_index + 1];\n\n    useEffect(() => {\n        (async () => {\n            try {\n                setInventoryId((await Api.get(`/api/inventory/v1/hosts?insights_id=${classicId}`)).data.results[0].id);\n                setFetchStatus('fulfilled');\n            } catch (error) {\n                dispatch(addNotification({\n                    variant: 'danger', dismissable: true, title: intl.formatMessage(messages.error), description: `${error}` }));\n                setFetchStatus('rejected');\n            }\n        })();\n    }, [setInventoryId, setFetchStatus, classicId, intl, dispatch]);\n\n    return <React.Fragment>\n        {fetchStatus === 'pending' && <Loading/>}\n        {fetchStatus === 'fulfilled' && <Redirect to={`/recommendations/${id}/${inventoryId}/`}/>}\n        {fetchStatus === 'rejected' && <MessageState\n            icon={TimesCircleIcon} title={intl.formatMessage(messages.inventoryIdNotFound)}/>}\n    </React.Fragment>;\n};\n\nexport default ClassicRedirect;\n"],"sourceRoot":""}