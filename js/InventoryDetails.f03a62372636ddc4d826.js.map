{"version":3,"sources":["webpack:///./src/PresentationalComponents/Breadcrumbs/Breadcrumbs.js","webpack:///./src/PresentationalComponents/Inventory/InventoryDetails.js"],"names":["Breadcrumbs","current","fetchRule","match","ruleFetchStatus","rule","intl","useState","items","setItems","ruleDescriptionLoaded","setRuleDescription","buildBreadcrumbs","useCallback","crumbs","splitUrl","url","split","push","title","formatMessage","messages","insightsHeader","navigate","undefined","params","id","inventoryId","description","useEffect","rule_id","Fragment","length","map","oneLink","key","to","isActive","loading","propTypes","PropTypes","string","func","object","any","injectIntl","routerParams","connect","state","ownProps","AdvisorStore","dispatch","AppActions","InventoryDetails","entity","useIntl","InventoryDetail","setInventoryDetail","AppInfo","setAppInfo","InvWrapper","setInvWrapper","store","useStore","fetchInventoryDetails","a","insights","loadInventory","ReactRedux","react","React","reactRouterDom","pfReactTable","pfReact","reactCore","inventoryConnector","mergeWithDetail","INVENTORY_ACTION_TYPES","InventoryDetailHead","DetailWrapper","getRegistry","register","entitiesDetailsReducer","Wrapper","display_name","subnav","systems","defaultMessage","document","documentTitle","className","hideBack","hasGutter","span","contextTypes","history","addAlert","entityDetails","props"],"mappings":"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","file":"js/InventoryDetails.f03a62372636ddc4d826.js","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport * as AppActions from '../../AppActions';\n\nimport React, { useCallback, useEffect, useState } from 'react';\n\nimport { Breadcrumb } from '@patternfly/react-core/dist/js/components/Breadcrumb/Breadcrumb';\nimport { BreadcrumbItem } from '@patternfly/react-core/dist/js/components/Breadcrumb/BreadcrumbItem';\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { injectIntl } from 'react-intl';\nimport messages from '../../Messages';\nimport routerParams from '@redhat-cloud-services/frontend-components-utilities/files/RouterParams';\n\nconst Breadcrumbs = ({ current, fetchRule, match, ruleFetchStatus, rule, intl }) => {\n    const [items, setItems] = useState([]);\n    const [ruleDescriptionLoaded, setRuleDescription] = useState(false);\n    const buildBreadcrumbs = useCallback(() => {\n        const crumbs = [];\n        const splitUrl = match.url.split('/');\n\n        // add base\n        crumbs.push({ title: `${intl.formatMessage(messages.insightsHeader)} ${splitUrl[1]}`, navigate: `/${splitUrl[1]}` });\n\n        // if applicable, add :id breadcrumb\n        if (match.params.id !== undefined && match.params.inventoryId !== undefined) {\n            crumbs.push({\n                title: rule.description,\n                navigate: `/${match.url.split('/')[1]}/${match.params.id}`\n            });\n        }\n\n        setItems(crumbs);\n    }, [intl, match.params.id, match.params.inventoryId, match.url, rule.description]);\n\n    useEffect(() => {\n        const splitUrl = match.url.split('/');\n        match.params.inventoryId !== undefined && splitUrl[1] !== 'systems' ?\n            fetchRule({ rule_id: match.params.id })\n            : buildBreadcrumbs();\n    }, [buildBreadcrumbs, fetchRule, match.params.id, match.params.inventoryId, match.url]);\n\n    useEffect(() => {\n        if (ruleFetchStatus === 'fulfilled' && !ruleDescriptionLoaded) {\n            setRuleDescription(true);\n            buildBreadcrumbs();\n        }\n    }, [buildBreadcrumbs, ruleFetchStatus, ruleDescriptionLoaded]);\n\n    return (\n        <React.Fragment>\n            {(ruleFetchStatus === 'fulfilled' || items.length > 0) && (\n                <Breadcrumb>\n                    {items.map((oneLink, key) => (\n                        <BreadcrumbItem key={key}>\n                            <Link to={oneLink.navigate}>{oneLink.title}</Link>\n                        </BreadcrumbItem>\n                    ))}\n                    <BreadcrumbItem isActive>{current}</BreadcrumbItem>\n                </Breadcrumb>\n            )}\n            {ruleFetchStatus === 'pending' && intl.formatMessage(messages.loading)}\n        </React.Fragment>\n    );\n};\n\nBreadcrumbs.propTypes = {\n    current: PropTypes.string,\n    fetchRule: PropTypes.func,\n    match: PropTypes.object,\n    rule: PropTypes.object,\n    ruleFetchStatus: PropTypes.string,\n    intl: PropTypes.any\n};\n\nconst mapStateToProps = (state, ownProps) => ({\n    rule: state.AdvisorStore.rule,\n    ruleFetchStatus: state.AdvisorStore.ruleFetchStatus,\n    ...ownProps\n});\n\nconst mapDispatchToProps = dispatch => ({\n    fetchRule: (url) => dispatch(AppActions.fetchRule(url))\n});\n\nexport default injectIntl(routerParams(connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(Breadcrumbs)));\n","/* eslint-disable react-hooks/exhaustive-deps */\nimport '@redhat-cloud-services/frontend-components-inventory-insights/index.css';\n\nimport * as pfReactTable from '@patternfly/react-table';\nimport * as reactRouterDom from 'react-router-dom';\nimport * as ReactRedux from 'react-redux';\nimport { reactCore } from '@redhat-cloud-services/frontend-components-utilities/files/inventoryDependencies';\n\nimport { Grid, GridItem } from '@patternfly/react-core/dist/js/layouts/Grid/index';\nimport React, { useEffect, useState } from 'react';\n\nimport Breadcrumbs from '../../PresentationalComponents/Breadcrumbs/Breadcrumbs';\nimport { Main } from '@redhat-cloud-services/frontend-components/components/Main';\nimport { PageHeader } from '@redhat-cloud-services/frontend-components/components/PageHeader';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { entitiesDetailsReducer } from '../../AppReducer';\nimport { getRegistry } from '@redhat-cloud-services/frontend-components-utilities/files/Registry';\nimport routerParams from '@redhat-cloud-services/frontend-components-utilities/files/RouterParams';\nimport { useStore } from 'react-redux';\nimport messages from '../../Messages';\nimport { useIntl } from 'react-intl';\n\nconst InventoryDetails = ({ entity, match }) => {\n    const intl = useIntl();\n    const [InventoryDetail, setInventoryDetail] = useState();\n    const [AppInfo, setAppInfo] = useState();\n    const [InvWrapper, setInvWrapper] = useState();\n    const store = useStore();\n\n    const fetchInventoryDetails = async () => {\n        const { inventoryConnector, mergeWithDetail, INVENTORY_ACTION_TYPES } = await insights.loadInventory({\n            ReactRedux,\n            react: React,\n            reactRouterDom,\n            pfReactTable,\n            pfReact: reactCore\n        });\n        const { InventoryDetailHead, AppInfo, DetailWrapper } = inventoryConnector(store);\n\n        getRegistry().register({\n            ...mergeWithDetail(entitiesDetailsReducer(INVENTORY_ACTION_TYPES))\n        });\n        setInventoryDetail(() => InventoryDetailHead);\n        setAppInfo(() => AppInfo);\n        setInvWrapper(() => DetailWrapper);\n    };\n\n    useEffect(() => { fetchInventoryDetails(); }, []);\n    const Wrapper = InvWrapper || React.Fragment;\n\n    useEffect(() => {\n        if (entity && (entity.display_name || entity.id)) {\n            const subnav = `${entity.display_name || entity.id} - ${messages.systems.defaultMessage}`;\n            document.title = intl.formatMessage(messages.documentTitle, { subnav });\n        }\n    }, [entity]);\n\n    return <Wrapper>\n        <PageHeader className=\"pf-m-light ins-inventory-detail\">\n            {entity && <Breadcrumbs\n                current={entity.display_name || entity.id}\n                match={match}\n            />}\n            {InventoryDetail && <InventoryDetail hideBack />}\n        </PageHeader>\n        <Main>\n            <Grid hasGutter>\n                <GridItem span={12}>\n                    {AppInfo && <AppInfo />}\n                </GridItem>\n            </Grid>\n        </Main>\n    </Wrapper>;\n};\n\nInventoryDetails.contextTypes = {\n    store: PropTypes.object\n};\n\nInventoryDetails.propTypes = {\n    history: PropTypes.object,\n    entity: PropTypes.object,\n    addAlert: PropTypes.func,\n    match: PropTypes.any\n};\n\nconst mapStateToProps = ({ entityDetails, props }) => ({\n    entity: entityDetails && entityDetails.entity,\n    ...props\n});\n\nexport default routerParams(connect(mapStateToProps, null)(InventoryDetails));\n"],"sourceRoot":""}