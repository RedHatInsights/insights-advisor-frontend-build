(self.webpackChunkadvisor_frontend=self.webpackChunkadvisor_frontend||[]).push([[3993],{8292:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(94015),r=s.n(a),n=s(23645),i=s.n(n)()(r());i.push([e.id,".advisor .systemsPdfOverride{text-align:left !important;border-radius:0 !important}\n","",{version:3,sources:["webpack://./src/PresentationalComponents/Export/_Export.scss"],names:[],mappings:"AAAA,6BACoB,0BAA0B,CAAC,0BAA0B",sourcesContent:[".advisor{\n.systemsPdfOverride{text-align:left !important;border-radius:0 !important}\n\n}"],sourceRoot:""}]);const o=i},71467:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(94015),r=s.n(a),n=s(23645),i=s.n(n)()(r());i.push([e.id,".advisor .pf-c-table__sort-indicator{margin-left:var(--pf-global--spacer--xs)}.advisor .pf-c-table th,.advisor td{padding-right:0px !important}.advisor .pf-c-table tr>:last-child{padding-left:var(--pf-global--spacer--xs)}.advisor .pf-c-table .pf-c-table__sort{min-width:initial}.advisor table.ins-c-entity-table.pf-c-table .ins-composed-col *{font-size:var(--pf-global--FontSize--md)}\n","",{version:3,sources:["webpack://./src/PresentationalComponents/SystemsTable/SystemsTable.scss"],names:[],mappings:"AAAA,qCAC4B,wCAAwC,CADpE,oCACuF,4BAA4B,CADnH,oCAC+I,yCAAyC,CADxL,uCACuN,iBAAiB,CADxO,iEACiS,wCAAwC",sourcesContent:[".advisor{\n.pf-c-table__sort-indicator{margin-left:var(--pf-global--spacer--xs)}.pf-c-table th,td{padding-right:0px !important}.pf-c-table tr>:last-child{padding-left:var(--pf-global--spacer--xs)}.pf-c-table .pf-c-table__sort{min-width:initial}table.ins-c-entity-table.pf-c-table .ins-composed-col *{font-size:var(--pf-global--FontSize--md)}\n\n}"],sourceRoot:""}]);const o=i},96166:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>se});var a=s(59713),r=s.n(a),n=s(63038),i=s.n(n),o=(s(88777),s(64169)),l=s(83984),c=s(20999),f=s(97522),u=s.n(f),m=s(26042),p=s(59900),d=s(33739),y=s(82141),g=s(45697),v=s.n(g),b=s(87757),h=s.n(b),E=s(319),_=s.n(E),O=s(48926),S=s.n(O),w=(s(86496),s(58141)),A=s(89736),x=s(51634),C=s(39080),T=s(87119),P=s(75442),j=s(23992),Z=s(71712),k=s(32412),M=s(18623);function D(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function R(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?D(Object(s),!0).forEach((function(t){r()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):D(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var F=A.mM.create({bold:{fontWeight:j.default.value},link:{color:Z.ZP.value},text:{marginTop:k.ZP.value},nameColumn:{width:"220px"},header:{fontSize:9,color:P.ZP.value,paddingLeft:C.ZP.value,paddingBottom:x.ZP.value,paddingTop:T.ZP.value}}),I=function(e){var t=e.page,s=e.systems,a=e.intl,r=[{value:a.formatMessage(M.Z.name),style:F.nameColumn},{value:a.formatMessage(M.Z.recommendations),style:{width:"100px",textAlign:"center"}},{value:a.formatMessage(M.Z.critical),style:{width:"70px",textAlign:"center"}},{value:a.formatMessage(M.Z.important),style:{width:"70px",textAlign:"center"}},{value:a.formatMessage(M.Z.moderate),style:{width:"60px",textAlign:"center"}},{value:a.formatMessage(M.Z.low),style:{width:"90px",textAlign:"center"}},{value:a.formatMessage(M.Z.lastSeen),style:{marginLeft:"20px"}}],n=["hits","critical_hits","important_hits","moderate_hits","low_hits"],o=_()(s.map((function(e){var t=new Date(e.last_seen).toUTCString().split(" "),s=i()(t,5),a=s[1],r=s[2],o=s[3],l=s[4],c="".concat(a," ").concat(r," ").concat(o,", ").concat(l.split(":").slice(0,2).join(":")," UTC");return[u().createElement(A.xv,{key:e.system_uuid,style:F.nameColumn},u().createElement(A.rU,{style:F.link,src:"https://cloud.redhat.com/insights/advisor/systems/".concat(e.system_uuid,"/")},e.display_name))].concat(_()(n.map((function(t){return a=(s={style:{width:"10px"},value:e[t]}).value,r=s.style,u().createElement(A.xv,{style:r},a);var s,a,r}))),[u().createElement(A.xv,{key:e.last_seen,style:{width:"100px"}},"".concat(c))])})));return u().createElement(u().Fragment,{key:t},u().createElement(w.sg,null,u().createElement(w.iA,{withHeader:!0,rows:[r.map((function(e){return s=(t=e).value,a=t.style,u().createElement(A.xv,{style:R(R(R({},a),F.header),F.bold)},s);var t,s,a}))].concat(_()(o))})))};I.propTypes={systems:v().object,page:v().number,intl:v().any};var L=function(e){var t=e.systemsTotal,s=e.systems,a=e.filters,r=e.tags,n=e.intl;return delete a.offset,delete a.limit,u().createElement(u().Fragment,{key:"".concat(n.formatMessage(M.Z.insightsHeader),": ").concat(n.formatMessage(M.Z.systems))},u().createElement(A.xv,{key:"sys-count",style:F.text},n.formatMessage(M.Z.sysTableCount,{systems:u().createElement(A.xv,{key:"sys-count-count",style:F.bold},n.formatMessage(M.Z.execReportHeaderSystems,{systems:t}))})),u().createElement(A.xv,{key:"sys-filters",style:F.text},n.formatMessage(M.Z.filtersApplied)),u().createElement(A.xv,{key:"sys-filters-values",style:F.bold},Object.entries(a).map((function(e){return u().createElement(A.xv,{key:e},"".concat(e[0],": ").concat(e[1],"     "))}))),u().createElement(A.xv,{key:"sys-tags",style:F.text},n.formatMessage(M.Z.tagsApplied)),u().createElement(A.xv,{key:"sys-tags-values",style:F.bold},r?decodeURIComponent(r):n.formatMessage(M.Z.noTags)),u().createElement(w.$0,{key:"systems",title:"Systems"},I({systems:s,intl:n})))};L.propTypes={systems:v().object,systemsTotal:v().number,filters:v().object,tags:v().array,intl:v().any};var N=s(37802),B=s(86896);function Y(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function G(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(s),!0).forEach((function(t){r()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Y(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var H=function(e){var t=e.filters,s=e.selectedTags,a=e.systemsCount,r=(0,B.Z)(),n=(0,f.useState)(!1),o=i()(n,2),l=o[0],m=o[1],p=function(){var e=S()(h().mark((function e(){var n,o,l,f,u,p;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),n=s.length&&{tags:s},e.t0=Promise,e.next=5,N.Z.get(c.SYSTEMS_FETCH_URL,{},G(G(G({},t),n),{},{limit:a}));case 5:return e.t1=e.sent.data,e.t2=[e.t1],e.next=9,e.t0.all.call(e.t0,e.t2);case 9:return o=e.sent,l=i()(o,1),f=l[0],u=L({systemsTotal:f.meta.count,systems:f.data.slice(0,18),filters:t,tags:s,intl:r}),p=f.data.slice(18,f.data.length).reduce((function(e,t,s){var a=Math.floor(s/31);return!e[a]&&(e[a]=[]),e[a].push(t),e}),[]),m(!1),e.abrupt("return",[u].concat(_()(p.map((function(e,t){return I({page:t,systems:e,intl:r})})))));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,f.useMemo)((function(){return u().createElement(w.o6,{allPagesHaveTitle:!1,label:l?r.formatMessage(M.Z.loading):r.formatMessage(M.Z.exportPdf),asyncFunction:p,buttonProps:G({variant:"",component:"button",className:"pf-c-dropdown__menu-item systemsPdfOverride"},l?{isDisabled:!0}:null),reportName:"".concat(r.formatMessage(M.Z.insightsHeader),":"),type:r.formatMessage(M.Z.systems),fileName:"Advisor_systems--".concat((new Date).toUTCString().replace(/ /g,"-"),".pdf"),size:[841.89,595.28]})}),[l])};H.propTypes={filters:v().object,selectedTags:v().string,systemsCount:v().number};const U=H;var z=s(22005),V=s(86588),W=s(40050),q=s(24405),J=s(67336),K=s(36873),$=s(70856),Q=s(43707);function X(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function ee(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?X(Object(s),!0).forEach((function(t){r()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):X(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var te=function(e){var t,s,a,n=e.systemsFetchStatus,o=e.fetchSystems,g=e.systems,v=e.filters,b=e.setFilters,h=e.selectedTags,E=e.workloads,_=e.SID,O=(0,B.Z)(),S=(0,Q.T)("advisor",c.PERMS.export).hasAccess,w=(0,f.useRef)(null),A=g.meta?g.meta.count:0,x=(0,f.useState)(v.display_name||""),C=i()(x,2),T=C[0],P=C[1],j=(0,W.Z)(T,c.DEBOUNCE_DELAY),Z=(0,f.useState)(!0),k=i()(Z,2),D=k[0],R=k[1],F={0:"display_name",1:"hits",2:"critical_hits",3:"important_hits",4:"moderate_hits",5:"low_hits",6:"last_seen"},I=(0,f.useCallback)((function(){var e=h.length&&{tags:h};E&&(e=ee(ee({},e),(0,m.s0)(E,_))),o(ee(ee({},(0,m.qW)(v)),e))}),[o,v,h,E,_]),L=function(e){var t=ee(ee({},v),{},{offset:0});"text"===e&&P(""),delete t[e],"hits"===e&&void 0===t.hits&&(t.hits=["yes"]),b(t)},N=[{label:O.formatMessage(M.Z.name),filterValues:{key:"text-filter",onChange:function(e,t){return P(t)},value:T}},{label:c.SYSTEM_FILTER_CATEGORIES.hits.title,type:c.SYSTEM_FILTER_CATEGORIES.hits.type,id:c.SYSTEM_FILTER_CATEGORIES.hits.urlParam,value:"checkbox-".concat(c.SYSTEM_FILTER_CATEGORIES.hits.urlParam),filterValues:{key:"".concat(c.SYSTEM_FILTER_CATEGORIES.hits.urlParam,"-filter"),onChange:function(e,t){return function(e,t){"hits"===e&&t.length>1&&t.includes("yes")&&t.shift(),t.length>0?b(ee(ee({},v),{},{offset:0},r()({},e,t))):L(e)}(c.SYSTEM_FILTER_CATEGORIES.hits.urlParam,t)},value:v.hits,items:c.SYSTEM_FILTER_CATEGORIES.hits.values}}],Y={filters:(t=ee({},v),t.hits&&t.hits.includes("yes")&&delete t.hits,delete t.sort,delete t.offset,delete t.limit,(0,m.yK)(t,c.SYSTEM_FILTER_CATEGORIES)),onDelete:function(e,t,s){s?(P(""),b({sort:v.sort,limit:v.limit,offset:v.offset,hits:["yes"]})):t.map((function(e){var t=r()({},e.urlParam,Array.isArray(v[e.urlParam])?v[e.urlParam].filter((function(t){return String(t)!==String(e.chips[0].value)})):"");t[e.urlParam].length>0?b(ee(ee({},v),t)):L(e.urlParam)}))}};return(0,f.useEffect)((function(){void 0===v.display_name?P(""):P(v.display_name)}),[v.display_name]),(0,f.useEffect)((function(){if(!D&&"pending"!==n){var e=ee({},v);delete e.display_name,b(ee(ee(ee({},e),T.length?{display_name:T}:{}),{},{offset:0}))}}),[j]),(0,f.useEffect)((function(){if(window.location.search){var e=(0,m.yG)();delete e.tags,void 0!==e.sort&&(e.sort=e.sort[0]),void 0!==e.display_name&&(e.display_name=e.display_name[0]),void 0===e.hits&&(e.hits=["all"]),void 0===e.offset?e.offset=0:e.offset=Number(e.offset[0]),void 0===e.limit?e.limit=10:e.limit=Number(e.limit[0]),b(ee(ee({},v),e))}else void 0!==v.limit&&void 0!==v.offset&&void 0!==v.hits||b(ee(ee({},v),{},{offset:0,limit:10,hits:["all"]}));R(!1)}),[]),(0,f.useEffect)((function(){(0,m.Y4)(v,h,E)}),[v,h,E]),(0,f.useEffect)((function(){!D&&"pending"!==n&&null!==h&&I()}),[I,D,v,h]),"failed"!==n?u().createElement(d.Z,{ref:w,items:("pending"!==n&&g&&g.data||[]).map((function(e){return ee(ee({},e),{},{id:e.system_uuid})})),isFullView:!0,sortBy:(s=Number(Object.entries(F).find((function(e){return e[1]===v.sort||"-".concat(e[1])===v.sort}))[0]),a="-"===v.sort[0]?"desc":"asc",{index:s,key:6!==s?F[s]:"updated",direction:a}),onSort:function(e){var t=e.index,s=e.direction,a="".concat("asc"===s?"":"-").concat(F[t]);b(ee(ee({},v),{},{sort:a,offset:0}))},hasCheckbox:!1,page:v.offset/v.limit+1,total:A,isLoaded:"pending"!==n,perPage:Number(v.limit),onRefresh:function(e){if("fulfilled"===n){var t=v.offset,s=v.limit;e.page*e.per_page-e.per_page===t&&s===e.per_page||b(ee(ee({},v),{},{limit:e.per_page,offset:e.page*e.per_page-e.per_page}))}},filterConfig:{items:N},activeFiltersConfig:Y,exportConfig:{onSelect:function(e,t){return(0,q.Z)("systems",t,(0,m.Y4)(v,h))},extraItems:[u().createElement("li",{key:"download-pd",role:"menuitem"},u().createElement(U,{filters:ee({},(0,m.qW)(v)),selectedTags:h,systemsCount:g&&g.meta&&g.meta.count}))],isDisabled:!S,tooltipText:S?O.formatMessage(M.Z.exportData):O.formatMessage(M.Z.permsAction)},fallback:y.Z,onLoad:function(e){var t=e.mergeWithEntities,s=e.INVENTORY_ACTION_TYPES,a=[{title:O.formatMessage(M.Z.name),transforms:[l.sortable,l.cellWidth(80)],key:"display_name"},{title:O.formatMessage(M.Z.numberRuleHits),transforms:[l.sortable,l.wrappable],key:"hits"},{title:O.formatMessage(M.Z.critical),transforms:[l.sortable,l.wrappable],key:"critical_hits"},{title:O.formatMessage(M.Z.important),transforms:[l.sortable,l.wrappable],key:"important_hits"},{title:O.formatMessage(M.Z.moderate),transforms:[l.sortable,l.wrappable],key:"moderate_hits"},{title:O.formatMessage(M.Z.low),transforms:[l.sortable,l.wrappable],key:"low_hits"},{title:O.formatMessage(M.Z.lastSeen),transforms:[l.sortable,l.wrappable],key:"updated"}];(0,J.JH)().register(ee({},t((0,$.Vy)([].concat(a),s))))}}):"failed"===n&&u().createElement(p.Z,{message:O.formatMessage(M.Z.systemTableFetchError)})};te.propTypes={fetchSystems:v().func,systemsFetchStatus:v().string,systems:v().object,addNotification:v().func,filters:v().object,setFilters:v().func,selectedTags:v().array,workloads:v().object,SID:v().object};const se=(0,K.Z)((0,V.connect)((function(e){var t=e.AdvisorStore;return{systems:t.systems,systemsFetchStatus:t.systemsFetchStatus,filters:t.filtersSystems,selectedTags:t.selectedTags,workloads:t.workloads,SID:t.SID}}),(function(e){return{fetchSystems:function(t){return e(o.lc(t))},addNotification:function(t){return e((0,z.addNotification)(t))},setFilters:function(t){return e(o.aw(t))}}}))(te))},86496:(e,t,s)=>{"use strict";var a=s(93379),r=s.n(a),n=s(8292),i=r()(n.default,{insert:"head",singleton:!1});if(!n.default.locals||e.hot.invalidate){var o=n.default.locals;e.hot.accept(8292,(t=>{n=s(8292),function(e,t,s){if(!e&&t||e&&!t)return!1;var a;for(a in e)if(e[a]!==t[a])return!1;for(a in t)if(!e[a])return!1;return!0}(o,n.default.locals)?(o=n.default.locals,i(n.default)):e.hot.invalidate()}))}e.hot.dispose((function(){i()})),n.default.locals},88777:(e,t,s)=>{"use strict";var a=s(93379),r=s.n(a),n=s(71467),i=r()(n.default,{insert:"head",singleton:!1});if(!n.default.locals||e.hot.invalidate){var o=n.default.locals;e.hot.accept(71467,(t=>{n=s(71467),function(e,t,s){if(!e&&t||e&&!t)return!1;var a;for(a in e)if(e[a]!==t[a])return!1;for(a in t)if(!e[a])return!1;return!0}(o,n.default.locals)?(o=n.default.locals,i(n.default)):e.hot.invalidate()}))}e.hot.dispose((function(){i()})),n.default.locals}}]);
//# sourceMappingURL=SystemsTable.7b83331ab04ada6d89f8.js.map