{"version":3,"sources":["webpack:///./src/Utilities/Debounce.js","webpack:///./src/PresentationalComponents/TagsToolbar/_TagsToolbar.scss","webpack:///./src/PresentationalComponents/TagsToolbar/_TagsToolbar.scss?1dc4","webpack:///./src/PresentationalComponents/TagsToolbar/ManageTags.js","webpack:///./src/PresentationalComponents/TagsToolbar/Common.js","webpack:///./src/PresentationalComponents/TagsToolbar/TagsToolbar.js"],"names":["Debounce","value","delay","useState","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","exports","___CSS_LOADER_API_IMPORT___","push","module","i","content","options","transform","undefined","update","locals","hot","accept","newContent","a","b","key","idx","Error","dispose","ManageTags","toggleModal","fetchTags","selectedTags","setSelectedTags","isOpen","tags","setTags","loaded","setLoaded","selected","setSelected","perPage","setPerPage","page","setPage","searchText","setSearchText","intl","useIntl","debouncedSearchText","debounce","DEBOUNCE_DELAY","activeFiltersConfig","useMemo","filters","map","tag","namespace","filter","index","self","indexOf","category","chips","name","id","urlParam","buildFilterChips","total","data","populateSelected","length","split","decodeURIComponent","Fragment","TagModal","title","formatMessage","messages","tagsCount","count","pagination","rows","find","selection","cells","width","label","filterTagsInModal","placeholder","filterValues","onChange","event","onUpdateData","columns","tagsModalName","tagsModalValue","tagsModalSources","systems","onSelect","onApply","tableProps","canSelectAll","primaryToolbarProps","onDelete","e","items","isAll","ids","flatMap","item","chip","propTypes","PropTypes","func","isRequired","bool","array","connect","AdvisorStore","dispatch","tagUrlBuilder","tagsToSet","url","URL","window","location","params","URLSearchParams","search","set","join","history","replaceState","origin","pathname","toString","TagsToolbar","setIsOpen","setParams","manageTagsModalOpen","setManageTagsModalOpen","groupTags","Set","source","formatTags","formattedTags","API","get","INV_BASE_URL","toLowerCase","response","results","intersection","addNotification","variant","dismissable","error","description","urlParams","className","Select","SelectVariant","checkbox","aria-label","onToggle","includes","selections","placeholderText","filterResults","allSystems","noTags","ariaLabelledBy","isDisabled","InputGroup","TextInput","filterTagsInToolbar","Divider","group","tagIndex","isChecked","Tooltip","position","TooltipPosition","right","Badge","Button","onClick","countMoreTags","manageTags","any","state"],"mappings":"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","file":"js/TagsToolbar.f9407e9a9ce5f7ca8ec5.js","sourcesContent":["import { useEffect, useState } from 'react';\n\nconst Debounce = (value, delay) => {\n    const [debouncedValue, setDebouncedValue] = useState(value);\n    useEffect(() => {\n        const handler = setTimeout(() => {setDebouncedValue(value);}, delay);\n        return () => {\n            clearTimeout(handler);\n        };\n    }, [delay, value]);\n\n    return debouncedValue;\n};\n\nexport default Debounce;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \":root{--ins-color--orange: #ec7a08}button:focus{outline:none}.tagsToolbarContainer{background-color:var(--pf-global--BackgroundColor--100);border-bottom:var(--pf-global--BorderWidth--sm) solid var(--pf-global--BorderColor--light-100)}.tagsToolbarContainer .pf-c-dropdown__menu{top:36px !important}.tagsToolbarContainer .dropDownOverride{padding-left:var(--pf-global--spacer--md)}.tagsToolbarContainer .dropDownOverride button::before{border:none !important}.tagsToolbarContainer .tags-filter-group{display:flex;padding:var(--pf-global--spacer--sm) 0 var(--pf-global--spacer--md) var(--pf-global--spacer--md)}.tagsToolbarContainer .tags-filter-group .tags-filter-search-icon{position:relative;left:-30px;left:-1.875rem;top:10px;top:.625rem}.tagsToolbarContainer .tags-select-group{display:flex}.tagsToolbarContainer .tags-select-group:hover{background-color:var(--pf-c-select__menu-item--hover--BackgroundColor)}.tagsToolbarContainer .tags-select-group .tags-select-badge{position:relative;margin-top:var(--pf-global--spacer--md);left:-15px;left:-.9375rem;bottom:8px;bottom:.5rem}.tagsToolbarContainer .pf-c-select__toggle{width:220px;font-size:small}.tagsToolbarContainer .pf-c-select__toggle.pf-m-disabled,.tagsToolbarContainer .pf-c-select__toggle:disabled{background-color:var(--pf-global--BackgroundColor--100)}.tagsToolbarContainer .pf-c-select__toggle.pf-m-disabled .pf-c-select__toggle-arrow,.tagsToolbarContainer .pf-c-select__toggle:disabled .pf-c-select__toggle-arrow{color:var(--pf-global--BackgroundColor--100)}.tagsToolbarContainer .pf-c-select{max-width:400px !important}.tagsToolbarContainer .pf-c-check__label{max-width:400px !important;width:400px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tagsListContainer .pf-c-data-list{border:none}.tagsListContainer .pf-c-data-list__item{border:none}.tagsListContainer .pf-c-data-list__item .pf-c-data-list__item-control{padding:8px 0 8px !important}.tagsListContainer .pf-c-data-list__item .pf-c-data-list__item-content{padding-bottom:8px !important}.tagsListContainer .pf-c-data-list__item .pf-c-data-list__item-content .pf-c-data-list__cell{padding-top:8px !important}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./_TagsToolbar.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./_TagsToolbar.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./_TagsToolbar.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import React, { useEffect, useMemo, useState } from 'react';\n\nimport { DEBOUNCE_DELAY } from '../../AppConstants';\nimport PropTypes from 'prop-types';\nimport { TagModal } from '@redhat-cloud-services/frontend-components/components/TagModal';\nimport { connect } from 'react-redux';\nimport debounce from '../../Utilities/Debounce';\nimport messages from '../../Messages';\nimport { setSelectedTags } from '../../AppActions';\nimport { useIntl } from 'react-intl';\n\nconst buildFilterChips = (selected) => {\n    const filters = selected.map(tag => tag.namespace).filter(\n        (value, index, self) =>\n            self.indexOf(value) === index\n    ).map(category => ({\n        category,\n        chips: selected.filter(tag =>\n            tag.namespace === category\n        ).map(tag => ({\n            name: tag.value,\n            id: tag.id,\n            value: true\n        })),\n        urlParam: 'tags'\n    }));\n    return { filters };\n};\n\nconst ManageTags = ({ toggleModal, fetchTags, selectedTags, setSelectedTags, isOpen }) => {\n    const [tags, setTags] = useState({});\n    const [loaded, setLoaded] = useState(false);\n    const [selected, setSelected] = useState([]);\n    const [perPage, setPerPage] = useState(10);\n    const [page, setPage] = useState(1);\n    const [searchText, setSearchText] = useState();\n    const intl = useIntl();\n    const debouncedSearchText = debounce(searchText, DEBOUNCE_DELAY);\n    const activeFiltersConfig = useMemo(() => buildFilterChips(selected), [selected]);\n    const { total, data } = tags;\n\n    useEffect(() => {\n        (async () => {\n            setPage(1);\n            setTags(await fetchTags(perPage, 1, null, searchText));\n            setLoaded(true);\n        })();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [debouncedSearchText]);\n\n    useEffect(() => {\n        (async () => {\n            setTags(await fetchTags(perPage, page, null, debouncedSearchText));\n            setLoaded(true);\n        })();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [perPage, page]);\n\n    const populateSelected = () => selectedTags.length ?\n        selectedTags.map(id => ({\n            id,\n            namespace: id.split('/')[0],\n            key: decodeURIComponent(id.split('/')[1].split('=')[0]),\n            value: decodeURIComponent(id.split('/')[1].split('=')[1])\n        })) : [];\n\n    useEffect(() => {\n        setSelected(populateSelected());\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [selectedTags, setSelected]);\n\n    const onDelete = (e, items, isAll) => {\n        if (isAll) {\n            setSelected([]);\n        } else {\n            const ids = items.flatMap(item => item.chips.map(chip => chip.id));\n            setSelected(selected.filter(tag => ids.filter(id => id !== tag.id).length));\n        }\n    };\n\n    return <React.Fragment>\n        {data && <TagModal\n            title={intl.formatMessage(messages.tagsCount, { count: total })}\n            {...loaded && {\n                loaded,\n                pagination: {\n                    perPage,\n                    page,\n                    count: total\n                },\n                rows: data.map(tag => ({\n                    ...tag,\n                    selected: selected.find(selection => selection.id === tag.id),\n                    cells: [tag.key, tag.value, tag.namespace, tag.count]\n                }))\n            }}\n            loaded={ loaded }\n            width='50%'\n            isOpen={ isOpen }\n            toggleModal={() => {\n                setPerPage(10);\n                setPage(1);\n                setSearchText();\n                setSelected(populateSelected());\n                toggleModal();\n            }}\n            filters={[\n                {\n                    label: intl.formatMessage(messages.filterTagsInModal),\n                    placeholder: intl.formatMessage(messages.filterTagsInModal),\n                    value: 'tags-filter',\n                    filterValues: {\n                        key: 'text-filter',\n                        onChange: (event, value) => setSearchText(value),\n                        value: searchText\n                    }\n                }\n            ]}\n            onUpdateData={(data) => {\n                setLoaded(false);\n                setPerPage(data.perPage);\n                setPage(data.page);\n            }}\n            columns={ [\n                { title: intl.formatMessage(messages.tagsModalName) },\n                { title: intl.formatMessage(messages.tagsModalValue) },\n                { title: intl.formatMessage(messages.tagsModalSources) },\n                { title: intl.formatMessage(messages.systems) }\n            ] }\n            selected={selected}\n            onSelect={(selected) => setSelected(selected.map(tag => ({\n                id: tag.id,\n                namespace: tag.namespace,\n                value: tag.value,\n                selected: true\n            })))}\n            onApply={() => {\n                setSelectedTags(selected.map(tag => tag.id));\n            }}\n            tableProps={{ canSelectAll: false }}\n            primaryToolbarProps={{\n                activeFiltersConfig: {\n                    ...activeFiltersConfig,\n                    onDelete\n                }\n            }}\n        />}\n    </React.Fragment>;\n};\n\nManageTags.propTypes = {\n    toggleModal: PropTypes.func.isRequired,\n    fetchTags: PropTypes.func.isRequired,\n    isOpen: PropTypes.bool.isRequired,\n    selectedTags: PropTypes.array,\n    setSelectedTags: PropTypes.func\n};\n\nexport default connect(\n    ({ AdvisorStore }) => ({ selectedTags: AdvisorStore.selectedTags }),\n    dispatch => ({\n        setSelectedTags: (tags) => dispatch(setSelectedTags(tags))\n    }))(ManageTags);\n","const tagUrlBuilder = (tagsToSet) => {\n    if (tagsToSet !== null) {\n        const url = new URL(window.location);\n        let params = new URLSearchParams(url.search);\n        tagsToSet.length ? params.set('tags', tagsToSet.join()) : params.delete('tags');\n        window.history.replaceState(null, null, `${url.origin}${url.pathname}${params.toString().length ? '?' : ''}${params.toString()}`);\n    }\n};\n\nexport { tagUrlBuilder };\n","import './_TagsToolbar.scss';\n\nimport React, { useEffect, useState } from 'react';\nimport { Select, SelectGroup, SelectOption, SelectVariant } from '@patternfly/react-core/dist/js/components/Select/index';\nimport { Tooltip, TooltipPosition } from '@patternfly/react-core/dist/js/components/Tooltip/Tooltip';\n\nimport API from '../../Utilities/Api';\nimport { Badge } from '@patternfly/react-core/dist/js/components/Badge/Badge';\nimport { Button } from '@patternfly/react-core/dist/js/components/Button/Button';\nimport { DEBOUNCE_DELAY } from '../../AppConstants';\nimport { Divider } from '@patternfly/react-core/dist/js/components/Divider/Divider';\nimport { INV_BASE_URL } from '../../AppConstants';\nimport { InputGroup } from '@patternfly/react-core/dist/js/components/InputGroup/InputGroup';\nimport ManageTags from './ManageTags';\nimport PropTypes from 'prop-types';\nimport SearchIcon from '@patternfly/react-icons/dist/js/icons/search-icon';\nimport TagIcon from '@patternfly/react-icons/dist/js/icons/tag-icon';\nimport { TextInput } from '@patternfly/react-core/dist/js/components/TextInput/TextInput';\nimport { addNotification } from '@redhat-cloud-services/frontend-components-notifications';\nimport { connect } from 'react-redux';\nimport debounce from '../../Utilities/Debounce';\nimport intersection from 'lodash/intersection';\nimport messages from '../../Messages';\nimport { setSelectedTags } from '../../AppActions';\nimport { tagUrlBuilder } from './Common';\nimport { useIntl } from 'react-intl';\n\nconst TagsToolbar = ({ selectedTags, setSelectedTags }) => {\n    const intl = useIntl();\n    const [isOpen, setIsOpen] = useState(false);\n    const [tags, setTags] = useState({});\n    const [searchText, setSearchText] = useState();\n    const [params, setParams] = useState();\n    const debouncedSearchText = debounce(searchText, DEBOUNCE_DELAY);\n    const [manageTagsModalOpen, setManageTagsModalOpen] = useState(false);\n    const showMoreCount = 20;\n    const { total, count, data } = tags;\n\n    const groupTags = (tags) => {\n        return {\n            total: tags.total,\n            count: tags.count,\n            data: [...new Set(tags.data.map(tag => tag.namespace))].map(source => ({\n                source,\n                data: tags.data.filter(tag => tag.namespace === source)\n            }))\n        };\n    };\n\n    const formatTags = (tags, total, count) => {\n        return {\n            total,\n            count,\n            data: tags.map(item => {\n                const { namespace, key, value } = item.tag;\n                return {\n                    ...item.tag,\n                    count: item.count,\n                    id: `${namespace}/${key}=${value}`\n                };\n            })\n        };\n    };\n\n    const fetchTags = async (perPage, page, params, filter) => {\n        let formattedTags = [];\n        try {\n            const response = (filter === '' || !filter) ?\n                await API.get(`${INV_BASE_URL}/tags?per_page=${perPage}&page=${page}&registered_with=insights`) :\n                await API.get(`${INV_BASE_URL}/tags?per_page=${perPage}&page=${page}&search=${filter.toLowerCase()}&registered_with=insights`);\n            formattedTags = formatTags(response.data.results, response.data.total, response.data.count);\n            params === null && selectedTags === null && setSelectedTags([]);\n            if (params.length) {\n                const tagsToSet = intersection(params.split(','), selectedTags);\n                tagUrlBuilder(tagsToSet);\n                setSelectedTags(tagsToSet);\n            }\n        } catch (error) {\n            addNotification({ variant: 'danger', dismissable: true, title: intl.formatMessage(messages.error), description: `${error}` });\n        }\n\n        return formattedTags;\n    };\n\n    // Force triggers the debounce function on mount (i.e. deleting this will break things)\n    useEffect(() => {\n        setSearchText('');\n    }, []);\n\n    useEffect(() => {\n        const url = new URL(window.location);\n        let params = new URLSearchParams(url.search);\n        setParams(params.get('tags'));\n    }, [selectedTags]);\n\n    useEffect(() => {\n        const url = new URL(window.location);\n        let urlParams = new URLSearchParams(url.search);\n        urlParams.get('tags') === params ?\n            (async () => setTags(groupTags(await fetchTags(showMoreCount, 1, null, searchText))))() :\n            (async () => setTags(groupTags(await fetchTags(showMoreCount, 1, urlParams, searchText))))();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [debouncedSearchText]);\n\n    useEffect(() => {\n        tagUrlBuilder(selectedTags);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [window.location]);\n\n    const titleFn = () => <React.Fragment>\n        <TagIcon />&nbsp;\n        {data && data.length > 0 ?\n            <React.Fragment>\n                {intl.formatMessage(messages.filterResults)} {selectedTags.length === 0 && intl.formatMessage(messages.allSystems)}\n            </React.Fragment>\n            : intl.formatMessage(messages.noTags)}\n    </React.Fragment>;\n\n    const onToggle = isOpen => {\n        setSearchText('');\n        setIsOpen(isOpen);\n    };\n\n    const onSelect = (e, selection) => {\n        const tagsToSet = selectedTags.includes(selection) ? selectedTags.filter(item => item !== selection)\n            : [...selectedTags, selection];\n        setSelectedTags(tagsToSet);\n        tagUrlBuilder(tagsToSet);\n    };\n\n    return selectedTags !== null && <div className='tagsToolbarContainer'>\n        {<ManageTags\n            toggleModal={() => setManageTagsModalOpen(!manageTagsModalOpen)}\n            isOpen={manageTagsModalOpen}\n            fetchTags={fetchTags}\n        />}\n        {data && <Select\n            className='dropDownOverride'\n            variant={SelectVariant.checkbox}\n            aria-label='Select Group Input'\n            onToggle={onToggle}\n            onSelect={onSelect}\n            selections={selectedTags}\n            isOpen={isOpen}\n            placeholderText={titleFn()}\n            ariaLabelledBy='select-group-input'\n            isDisabled={data.length === 0}\n        >\n            <InputGroup className='tags-filter-group'>\n                <TextInput\n                    aria-label='tags-filter-input'\n                    placeholder={intl.formatMessage(messages.filterTagsInToolbar)}\n                    value={searchText}\n                    onChange={setSearchText}\n                />\n                <SearchIcon className='tags-filter-search-icon'/>\n            </InputGroup>\n            <Divider key=\"inline-filter-divider\"/>\n            {data.map((group, index) =>\n                <SelectGroup key={`group${index}`} label={group.source}>\n                    {group.data.map((tag, tagIndex) =>\n                        <span key={tagIndex} className='tags-select-group'>\n                            <SelectOption value={tag.id} isChecked={\n                                selectedTags.find(selection => selection === tag.id)\n                            }>\n                                <Tooltip content={`${decodeURIComponent(tag.id)}`} position={TooltipPosition.right}>\n                                    <span>{`${decodeURIComponent(tag.key + '=' + tag.value)}`}</span>\n                                </Tooltip>\n                            </SelectOption>\n                            <Badge className='tags-select-badge'> {tag.count} </Badge>\n                        </span>\n                    )}\n                </SelectGroup>\n            )}\n            <Button key='manage all tags'\n                variant='link' onClick={() => setManageTagsModalOpen(true)}>\n                {(showMoreCount > 0 && count >= showMoreCount) ?\n                    intl.formatMessage(\n                        messages.countMoreTags, {\n                            count: total - count\n                        }) : intl.formatMessage(messages.manageTags)\n                }\n            </Button>\n        </Select>}\n    </div >;\n};\n\nTagsToolbar.propTypes = {\n    selectedTags: PropTypes.array,\n    addNotification: PropTypes.func,\n    intl: PropTypes.any,\n    setSelectedTags: PropTypes.func,\n    history: PropTypes.any\n};\n\nexport default connect(\n    state => ({ selectedTags: state.AdvisorStore.selectedTags }),\n    dispatch => ({\n        addNotification: data => dispatch(addNotification(data)),\n        setSelectedTags: (tags) => dispatch(setSelectedTags(tags))\n    }))(TagsToolbar);\n"],"sourceRoot":""}