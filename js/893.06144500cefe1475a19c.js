"use strict";(self.webpackChunkadvisor_frontend=self.webpackChunkadvisor_frontend||[]).push([[893],{44788:(e,t,n)=>{n.d(t,{Z:()=>S});var a=n(4942),r=n(15861),s=n(29439),i=n(87757),o=n.n(i),l=n(93264),c=n.n(l),u=n(59303),d=n(6202),f=n(32752),m=n(4853),p=n(23811),b=n(78826),g=n(71094),y=n(45697),h=n.n(y),v=n(12282),Z=n(71355),M=n(30893),k=n(88931),O=n(86896),E=n(77647);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(e){var t=e.handleModalToggle,n=e.isModalOpen,a=e.host,i=e.hosts,y=e.rule,h=e.afterFn,j=(0,O.Z)(),_=(0,k.useDispatch)(),S=function(e){return _((0,Z.wN)(e))},T=(0,l.useState)(""),D=(0,s.Z)(T,2),x=D[0],P=D[1],C=(0,l.useState)(void 0!==a||i.length>0),F=(0,s.Z)(C,2),B=F[0],I=F[1],N=(0,E.om)(),R=(0,s.Z)(N,2),H=R[0],L=(R[1].isLoading,function(){var e=(0,r.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={systems:i,justification:x},e.prev=1,e.next=4,(0,g.SO)("".concat(u._n,"/rule/").concat(y.rule_id,"/ack_hosts/"),{},t);case 4:!B&&S({variant:"success",dismissable:!0,timeout:!0,title:j.formatMessage(M.Z.recSuccessfullyDisabledForSystem)}),h&&h(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),S({variant:"danger",dismissable:!0,title:j.formatMessage(M.Z.error),description:"".concat(e.t0)});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}()),z=function(){var e=(0,r.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("enabled"!==y.rule_status||i.length){e.next=15;break}return n=B?{type:"HOST",options:{rule:y.rule_id,system_uuid:a.id,justification:x}}:{type:"RULE",options:w({rule_id:y.rule_id},x&&{justification:x})},e.prev=2,e.next=5,H(n).unwrap();case 5:S(B?{variant:"success",timeout:!0,dismissable:!0,title:j.formatMessage(M.Z.recSuccessfullyDisabledForSystem)}:{variant:"success",timeout:!0,dismissable:!0,title:j.formatMessage(M.Z.recSuccessfullyDisabled)}),P(""),h&&h(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),S({variant:"danger",dismissable:!0,title:j.formatMessage(M.Z.error),description:"".concat(e.t0)});case 13:e.next=16;break;case 15:L();case 16:t(!1);case 17:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();return c().createElement(b.u_,{variant:"small",title:j.formatMessage(M.Z.disableRule),isOpen:n,onClose:function(){t(!1),P("")},actions:[c().createElement(d.Button,{key:"confirm",variant:"primary",onClick:function(){return z()},ouiaId:"confirm"},j.formatMessage(M.Z.save)),c().createElement(d.Button,{key:"cancel",variant:"link",onClick:function(){t(!1),P("")},ouiaId:"cancel"},j.formatMessage(M.Z.cancel))]},j.formatMessage(M.Z.disableRuleBody),c().createElement(m.l,null,c().createElement(p.c,{fieldId:"blank-form"}),(void 0!==a||i.length>0)&&c().createElement(p.c,{fieldId:"disable-rule-one-system"},c().createElement(f.X,{isChecked:B,onChange:function(){I(!B)},label:i.length?j.formatMessage(M.Z.disableRuleForSystems):j.formatMessage(M.Z.disableRuleSingleSystem),id:"disable-rule-one-system",name:"disable-rule-one-system"})),c().createElement(p.c,{label:j.formatMessage(M.Z.justificationNote),fieldId:"disable-rule-justification"},c().createElement(v.oi,{type:"text",id:"disable-rule-justification","aria-describedby":"disable-rule-justification",value:x,onChange:function(e){return P(e)},onKeyDown:function(e){return"Enter"===e.key&&(e.preventDefault(),z())}}))))};_.propTypes={isModalOpen:h().bool,host:h().object,handleModalToggle:h().func,rule:h().object,afterFn:h().func,hosts:h().array},_.defaultProps={isModalOpen:!1,handleModalToggle:function(){},system:void 0,rule:{},afterFn:function(){},host:void 0,hosts:[]};const S=_},95358:(e,t,n)=>{n.d(t,{Z:()=>j});var a=n(15861),r=n(29439),s=n(87757),i=n.n(s),o=n(93264),l=n.n(o),c=n(27577),u=n(59303),d=n(6202),f=n(62410),m=n(71094),p=n(24561),b=n(78826),g=n(6234),y=n(45697),h=n.n(y),v=n(30893),Z=n(71355),M=n(88931),k=n(77647),O=n(86896),E=function(e){var t=e.handleModalToggle,n=e.isModalOpen,s=e.rule,y=e.afterFn,h=(0,O.Z)(),E=(0,M.useDispatch)(),j=[h.formatMessage(v.Z.systemName),h.formatMessage(v.Z.justificationNote),h.formatMessage(v.Z.dateDisabled),""],w=(0,o.useState)([]),_=(0,r.Z)(w,2),S=_[0],T=_[1],D=(0,o.useState)(!1),x=(0,r.Z)(D,2),P=x[0],C=x[1],F=(0,k.u7)({rule_id:s.rule_id,limit:s.hosts_acked_count}),B=F.data,I=void 0===B?[]:B,N=F.isFetching,R=F.isLoading,H=F.refetch,L=function(){var e=(0,a.Z)(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,m.Sp)("".concat(u._n,"/hostack/").concat(n.id,"/"));case 3:H(),C(!0),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),t(!1),a={variant:"danger",dismissable:!0,title:h.formatMessage(v.Z.error),description:"".concat(e.t0)},E((0,Z.wN)(a));case 11:case"end":return e.stop()}var a}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){var e=null==I?void 0:I.map((function(e){return{cells:[e.display_name||e.system_uuid,e.justification||h.formatMessage(v.Z.none),{title:l().createElement(f.Z,{date:new Date(e.updated_at),type:"onlyDate"})},{title:l().createElement(d.Button,{key:e.system_uuid,isInline:!0,variant:"link",onClick:function(){return L(e)}},l().createElement(g.ZP,{size:"sm"})," ".concat(h.formatMessage(v.Z.enable)))}]}}));R||0!==I.length||(y(),t(!1)),T(e)}),[I]),l().createElement(b.u_,{width:"75%",title:h.formatMessage(v.Z.hostAckModalTitle),isOpen:n,onClose:function(){P&&y(),t(!1)}},N?l().createElement(c.Table,{"aria-label":"host-ack-table",rows:[{cells:[{props:{colSpan:3},title:l().createElement(p.aV,null)}]}],cells:j},l().createElement(c.TableHeader,null),l().createElement(c.TableBody,null)):l().createElement(c.Table,{"aria-label":"host-ack-table",rows:S,cells:j},l().createElement(c.TableHeader,null),l().createElement(c.TableBody,null)))};E.propTypes={isModalOpen:h().bool,handleModalToggle:h().func,rule:h().object,afterFn:h().func},E.defaultProps={isModalOpen:!1,handleModalToggle:function(){},rule:{},afterFn:function(){}};const j=E}}]);
//# sourceMappingURL=../sourcemaps/893.3169ad40f8a50a6de5af9078d250362e.js.map