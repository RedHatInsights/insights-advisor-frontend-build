{"version":3,"sources":["webpack:///./src/Utilities/Debounce.js","webpack:///./src/PresentationalComponents/Common/DownloadHelper.js","webpack:///./src/PresentationalComponents/SystemsTable/SystemsTable.js","webpack:///./src/PresentationalComponents/Common/Tables.js"],"names":["Debounce","value","delay","useState","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","fileName","exportTable","defaultParams","date","Date","toISOString","replace","split","downloadHelper","format","params","a","API","get","BASE_URL","payload","data","JSON","stringify","downloadFile","SystemsTable","sortIndex","sortDirection","systemsFetchStatus","fetchSystems","systems","intl","filters","setFilters","selectedTags","inventory","useRef","InventoryTable","setInventory","store","useStore","results","meta","count","display_name","searchText","setSearchText","debouncedSearchText","debounce","filterBuilding","setFilterBuilding","sortIndices","0","1","2","3","4","5","6","fetchSystemsFn","useCallback","options","length","tags","join","filterConfigItems","label","formatMessage","messages","name","filterValues","key","onChange","event","activeFiltersConfig","category","chips","onDelete","insights","loadInventory","react","React","reactRouterDom","pfReactTable","inventoryConnector","mergeWithEntities","INVENTORY_ACTION_TYPES","getRegistry","register","systemReducer","title","transforms","numberRuleHits","critical","important","moderate","low","lastSeen","undefined","copyFilters","offset","window","location","search","paramsObject","paramParser","sort","Number","limit","offest","urlBuilder","ref","items","map","system","id","system_uuid","sortBy","Object","entries","find","item","index","direction","onSort","orderParam","hasCheckbox","page","total","isLoaded","perPage","onRefresh","per_page","filterConfig","exportConfig","exportCsv","exportJson","_e","fileType","downloadReport","message","systemTableFetchError","propTypes","PropTypes","func","string","object","addNotification","any","array","injectIntl","routerParams","connect","AdvisorStore","filtersSystems","dispatch","url","AppActions","URL","queryString","keys","Array","isArray","URLSearchParams","set","history","replaceState","origin","pathname","toString","filterFetchBuilder","assign","filterName","filterValue","searchParams","from","reduce","acc","parse","capitalize","toUpperCase","substring"],"mappings":"yHAceA,IAZE,SAACC,EAAOC,GAAU,MACaC,mBAASF,GADtB,WACxBG,EADwB,KACRC,EADQ,KAS/B,OAPAC,qBAAU,WACN,IAAMC,EAAUC,YAAW,WAAOH,EAAkBJ,KAAUC,GAC9D,OAAO,WACHO,aAAaF,MAElB,CAACL,EAAOD,IAEJG,I,mGCPLM,EAAW,SAACC,GACd,IAAMC,EAAgB,CAClBC,MAAM,IAAIC,MAAOC,cAAcC,QAAQ,QAAS,KAAKC,MAAM,KAAK,GAAK,QAGzE,iCAA2BN,EAA3B,aAA2CC,EAAcC,OAGvDK,EAAc,+BAAG,WAAOP,EAAaQ,EAAQC,GAA5B,iBAAAC,EAAA,+EAEOC,IAAIC,IAAJ,UAAWC,WAAX,mBAA8Bb,EAA9B,YAAwD,SAAXQ,EAAoB,OAAS,OAA1E,OAAkFC,IAFzF,OAETK,EAFS,OAGXC,EAAkB,SAAXP,EAAoBQ,KAAKC,UAAUH,EAAQC,MAAQD,EAAQC,KACtEG,uBAAaH,EAAMhB,EAASC,GAAcQ,GAJ3B,+HAAH,0DAULD,O,s3BCDf,IAAMY,EAAe,SAAC,GAA2F,MA0DnGC,EACAC,EA3DUC,EAAyF,EAAzFA,mBAAoBC,EAAqE,EAArEA,aAAcC,EAAuD,EAAvDA,QAASC,EAA8C,EAA9CA,KAAMC,EAAwC,EAAxCA,QAASC,EAA+B,EAA/BA,WAAYC,EAAmB,EAAnBA,aACpFC,EAAYC,iBAAO,MADoF,EAEtEtC,qBAFsE,WAEtGuC,EAFsG,KAEtFC,EAFsF,KAGvGC,EAAQC,qBACRC,EAAUX,EAAQY,KAAOZ,EAAQY,KAAKC,MAAQ,EAJyD,EAKzE7C,mBAASkC,EAAQY,cAAgB,IALwC,WAKtGC,EALsG,KAK1FC,EAL0F,KAMvGC,EAAsBC,YAASH,EAAY,KAN4D,EAOjE/C,oBAAS,GAPwD,WAOtGmD,EAPsG,KAOtFC,EAPsF,KAQvGC,EAAc,CAChBC,EAAG,eACHC,EAAG,OACHC,EAAG,gBACHC,EAAG,iBACHC,EAAG,gBACHC,EAAG,WACHC,EAAG,aAQDC,EAAiBC,uBAAY,WAC/B,IAAMC,EAAU3B,EAAa4B,QAAW,CAAEC,KAAM7B,EAAa8B,QAC7DnC,EAAa,EAAD,KAAMG,GAAY6B,MAE/B,CAAChC,EAAcG,EAASE,IAErB+B,EAAoB,CAAC,CACvBC,MAAOnC,EAAKoC,cAAcC,IAASC,MACnCC,aAAc,CACVC,IAAK,cACLC,SAAU,SAACC,EAAO7E,GAAR,OAAkBkD,EAAclD,IAC1CA,MAAOiD,KAIT6B,EAAsB,CACxB1C,QAASa,EAAWiB,OAAS,GAAK,CAAE,CAAEa,SAAU,cAAeC,MAAO,CAAC,CAAEP,KAAMxB,OAAqB,GACpGgC,SAAU,kBAAM/B,EAAc,MAsGlC,OA3EA7C,qBAAU,WACN,cAAC,sCAAAe,EAAA,sEAEa8D,SAASC,cAAc,CAC7BC,MAAOC,IACPC,iBACAC,iBALP,gBACWC,EADX,EACWA,mBAAoBC,EAD/B,EAC+BA,kBAAmBC,EADlD,EACkDA,uBAM/CC,wBAAcC,SAAd,KACOH,EACCI,YACI,CACI,CAAEC,MAAO3D,EAAKoC,cAAcC,IAASC,MAAOsB,WAAY,CAACR,KAAwBZ,IAAK,gBACtF,CACImB,MAAO3D,EAAKoC,cAAcC,IAASwB,gBAAiBD,WAAY,CAACR,IAAuBA,IAAuB,KAC/GZ,IAAK,QAET,CAAEmB,MAAO3D,EAAKoC,cAAcC,IAASyB,UAAWtB,IAAK,iBACrD,CAAEmB,MAAO3D,EAAKoC,cAAcC,IAAS0B,WAAYvB,IAAK,kBACtD,CAAEmB,MAAO3D,EAAKoC,cAAcC,IAAS2B,UAAWxB,IAAK,iBACrD,CAAEmB,MAAO3D,EAAKoC,cAAcC,IAAS4B,KAAMzB,IAAK,YAChD,CAAEmB,MAAO3D,EAAKoC,cAAcC,IAAS6B,UAAWN,WAAY,CAACR,KAAwBZ,IAAK,YAE9Fe,MAtBf,EA2B8BF,EAAmB7C,GAAtCF,EA3BX,EA2BWA,eACRC,GAAa,kBAAMD,KA5BtB,0CAAD,KA8BD,CAACN,EAAMQ,IAEVtC,qBAAU,gBACmBiG,IAAzBlE,EAAQY,aAA6BE,EAAc,IAAMA,EAAcd,EAAQY,gBAChF,CAACZ,EAAQY,eAEZ3C,qBAAU,WACN,IAAMkG,EAAc,EAAH,GAAQnE,UAClBmE,EAAYvD,aACnBX,EAAW,EAAD,OACHkE,GACCtD,EAAWiB,OAAS,CAAElB,aAAcC,GAAe,IAFjD,IAGNuD,OAAQ,OAIb,CAACrD,IAEJ9C,qBAAU,WACN,GAAIoG,OAAOC,SAASC,OAAQ,CACxB,IAAMC,EAAeC,qBACdD,EAAazC,UACEmC,IAAtBM,EAAaE,OAAuBF,EAAaE,KAAOF,EAAaE,KAAK,SAC5CR,IAA9BM,EAAa5D,eAA+B4D,EAAa5D,aAAe4D,EAAa5D,aAAa,SAC1EsD,IAAxBM,EAAaJ,OAAuBI,EAAaJ,OAAS,EAAII,EAAaJ,OAASO,OAAOH,EAAaJ,OAAO,SACxFF,IAAvBM,EAAaI,MAAsBJ,EAAaI,MAAQ,GAAKJ,EAAaI,MAAQD,OAAOH,EAAaI,MAAM,IAC5G3E,EAAW,EAAD,KAAMD,GAAYwE,cACHN,IAAlBlE,EAAQ4E,YAA0CV,IAAnBlE,EAAQ6E,QAC9C5E,EAAW,EAAD,KAAMD,GAAN,IAAeoE,OAAQ,EAAGQ,MAAO,MAG/C1D,GAAkB,KAEnB,IAEHjD,qBAAU,WACN6G,YAAW9E,EAASE,KACrB,CAACF,EAASE,IAEbjC,qBAAU,YACLgD,GAAyC,YAAvBrB,GAAqD,OAAjBM,GAAyByB,MAEjF,CAACA,EAAgBV,EAAgBjB,EAASE,IAEtCG,EACoB,WAAvBT,EACI,kBAACS,EAAD,CACI0E,IAAK5E,EACL6E,OAAgC,YAAvBpF,GAAoCE,GAAWA,EAAQT,MAAS,IAAI4F,KAAI,SAACC,GAAD,cAC1EA,GAD0E,IAE7EC,GAAID,EAAOE,iBAEfC,QA5FF3F,EAAYiF,OAAOW,OAAOC,QAAQpE,GAAaqE,MAAK,SAAAC,GAAI,OAAIA,EAAK,KAAOzF,EAAQ0E,MAAQ,WAAIe,EAAK,MAASzF,EAAQ0E,QAAM,IACxH/E,EAAoC,MAApBK,EAAQ0E,KAAK,GAAa,OAAS,MAClD,CACHgB,MAAOhG,EACP6C,IAAmB,IAAd7C,EAAkByB,EAAYzB,GAAa,UAChDiG,UAAWhG,IAwFPiG,OArIG,SAAC,GAAyB,IAAvBF,EAAuB,EAAvBA,MAAOC,EAAgB,EAAhBA,UACfE,EAAa,GAAH,OAAoB,QAAdF,EAAsB,GAAK,KAAjC,OAAuCxE,EAAYuE,IACnEzF,EAAW,EAAD,KAAMD,GAAN,IAAe0E,KAAMmB,EAAYzB,OAAQ,MAoI3C0B,aAAa,EACbC,KAAM/F,EAAQoE,OAASpE,EAAQ4E,MAAQ,EACvCoB,MAAOvF,EACPwF,SAAiC,YAAvBrG,EACVsG,QAASvB,OAAO3E,EAAQ4E,OACxBuB,UAlHU,SAACtE,GACnB,GAA2B,cAAvBjC,EAAoC,KAC5BwE,EAAkBpE,EAAlBoE,OAAQQ,EAAU5E,EAAV4E,MACG/C,EAAQkE,KAAOlE,EAAQuE,SAAYvE,EAAQuE,WAC5ChC,GAAUQ,IAAU/C,EAAQuE,UAC1CnG,EAAW,EAAD,KACHD,GADG,IAEN4E,MAAO/C,EAAQuE,SACfhC,OAASvC,EAAQkE,KAAOlE,EAAQuE,SAAYvE,EAAQuE,cA2GxDC,aAAc,CAAErB,MAAO/C,GACvBS,oBAAqBA,EACrB4D,cAAY,GACRpE,MAAOnC,EAAKoC,cAAcC,IAASmE,YAD3B,cAGDxG,EAAKoC,cAAcC,IAASoE,aAH3B,kBAIE,SAACC,EAAIC,GAAL,OAAkBC,YAAe,UAAWD,EAAU5B,YAAW9E,EAASE,OAJ5E,KAOS,WAAvBN,GAAoC,kBAAC,IAAD,CAAQgH,QAAS7G,EAAKoC,cAAcC,IAASyE,yBACrF,kBAAC,IAAD,OAGVpH,EAAaqH,UAAY,CACrBjH,aAAckH,IAAUC,KACxBpH,mBAAoBmH,IAAUE,OAC9BnH,QAASiH,IAAUG,OACnBC,gBAAiBJ,IAAUC,KAC3BjH,KAAMgH,IAAUK,IAChBpH,QAAS+G,IAAUG,OACnBjH,WAAY8G,IAAUC,KACtB9G,aAAc6G,IAAUM,OAgBbC,sBAAWC,IAAaC,mBAbf,SAAC,GAAD,IAAGC,EAAH,EAAGA,aAAH,MAAuB,CAC3C3H,QAAS2H,EAAa3H,QACtBF,mBAAoB6H,EAAa7H,mBACjCI,QAASyH,EAAaC,eACtBxH,aAAcuH,EAAavH,iBAGJ,SAAAyH,GAAQ,MAAK,CACpC9H,aAAc,SAAC+H,GAAD,OAASD,EAASE,IAAwBD,KACxDT,gBAAiB,SAAA9H,GAAI,OAAIsI,EAASR,0BAAgB9H,KAClDY,WAAY,SAACD,GAAD,OAAa2H,EAASE,IAA6B7H,QAG5BwH,CAA6C/H,M,oyBCvN7E,IAAMqF,EAAa,SAAC9E,EAASE,GAChC,IAAM0H,EAAM,IAAIE,IAAIzD,OAAOC,UACrByD,EAAc,GAAH,OAAMzC,OAAO0C,KAAKhI,GAASiF,KAAI,SAAA1C,GAAG,gBAAOA,EAAP,YAAc0F,MAAMC,QAAQlI,EAAQuC,IAAQvC,EAAQuC,GAAKP,OAAShC,EAAQuC,OAAQP,KAAK,MACpIjD,EAAS,IAAIoJ,gBAAgBJ,GAGnC,OAFiB,OAAjB7H,GAAyBA,EAAa4B,OAAS/C,EAAOqJ,IAAI,OAAQlI,EAAa8B,QAAUjD,EAAM,OAAQ,QACvGsF,OAAOgE,QAAQC,aAAa,KAAM,KAAlC,UAA2CV,EAAIW,QAA/C,OAAwDX,EAAIY,SAA5D,YAAwEzJ,EAAO0J,aAC/E,WAAWV,IAIFW,EAAqB,SAAC1I,GAAD,OAAasF,OAAOqD,OAAP,MAAArD,OAAM,CAAQ,IAAR,WAC9CA,OAAOC,QAAQvF,GAASiF,KAAI,2BAAE2D,EAAF,KAAcC,EAAd,YAA+BZ,MAAMC,QAAQW,IACnD,SAAnBA,EAAY,IAAsC,UAAnBA,EAAY,KAAoBA,EAAY/G,OAAS,EAAI,KAA1F,OACS8G,EAAaC,EAAY7G,QAFwB,OAGrD4G,EAAaC,UAIbpE,EAAc,WACvB,IAAMqE,EAAe,IAAIX,gBAAgB9D,OAAOC,SAASC,QACzD,OAAO0D,MAAMc,KAAKD,GAAcE,QAAO,SAACC,EAAD,kBAAO1G,EAAP,KAAY3E,EAAZ,mBAChCqL,GADgC,UAC1B1G,EAAiB,SAAV3E,GAA8B,UAAVA,EAAqB0B,KAAK4J,MAAMtL,GAASA,EAAMgB,MAAM,SACzF,KAIKuK,EAAa,SAAClC,GAAD,OAAYA,EAAO,GAAGmC,cAAgBnC,EAAOoC,UAAU","file":"js/SystemsTable.js","sourcesContent":["import { useEffect, useState } from 'react';\n\nconst Debounce = (value, delay) => {\n    const [debouncedValue, setDebouncedValue] = useState(value);\n    useEffect(() => {\n        const handler = setTimeout(() => {setDebouncedValue(value);}, delay);\n        return () => {\n            clearTimeout(handler);\n        };\n    }, [delay, value]);\n\n    return debouncedValue;\n};\n\nexport default Debounce;\n","import API from '../../Utilities/Api';\nimport { BASE_URL } from '../../AppConstants';\nimport { downloadFile } from '@redhat-cloud-services/frontend-components-utilities/files/helpers';\n\nconst fileName = (exportTable) => {\n    const defaultParams = {\n        date: new Date().toISOString().replace(/[T:]/g, '-').split('.')[0] + '-utc'\n    };\n\n    return `Insights-Advisor_${exportTable}--${defaultParams.date}`;\n};\n\nconst downloadHelper = async (exportTable, format, params) => {\n    try {\n        const payload = await API.get(`${BASE_URL}/export/${exportTable}.${format === 'json' ? 'json' : 'csv'}${params}`);\n        let data = format === 'json' ? JSON.stringify(payload.data) : payload.data;\n        downloadFile(data, fileName(exportTable), format);\n    } catch (error) {\n        throw `${error}`;\n    }\n};\n\nexport default downloadHelper;\n","/* eslint camelcase: 0 */\nimport * as AppActions from '../../AppActions';\nimport * as pfReactTable from '@patternfly/react-table';\nimport * as reactRouterDom from 'react-router-dom';\n\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { connect, useStore } from 'react-redux';\nimport { paramParser, urlBuilder } from '../Common/Tables';\n\nimport Failed from '../Loading/Failed';\nimport Loading from '../Loading/Loading';\nimport PropTypes from 'prop-types';\nimport { addNotification } from '@redhat-cloud-services/frontend-components-notifications';\nimport debounce from '../../Utilities/Debounce';\nimport downloadReport from '../Common/DownloadHelper';\nimport { getRegistry } from '@redhat-cloud-services/frontend-components-utilities/files/Registry';\nimport { injectIntl } from 'react-intl';\nimport messages from '../../Messages';\nimport routerParams from '@redhat-cloud-services/frontend-components-utilities/files/RouterParams';\nimport { systemReducer } from '../../AppReducer';\n\nconst SystemsTable = ({ systemsFetchStatus, fetchSystems, systems, intl, filters, setFilters, selectedTags }) => {\n    const inventory = useRef(null);\n    const [InventoryTable, setInventory] = useState();\n    const store = useStore();\n    const results = systems.meta ? systems.meta.count : 0;\n    const [searchText, setSearchText] = useState(filters.display_name || '');\n    const debouncedSearchText = debounce(searchText, 800);\n    const [filterBuilding, setFilterBuilding] = useState(true);\n    const sortIndices = {\n        0: 'display_name',\n        1: 'hits',\n        2: 'critical_hits',\n        3: 'important_hits',\n        4: 'moderate_hits',\n        5: 'low_hits',\n        6: 'last_seen'\n    };\n\n    const onSort = ({ index, direction }) => {\n        const orderParam = `${direction === 'asc' ? '' : '-'}${sortIndices[index]}`;\n        setFilters({ ...filters, sort: orderParam, offset: 0 });\n    };\n\n    const fetchSystemsFn = useCallback(() => {\n        const options = selectedTags.length && ({ tags: selectedTags.join() });\n        fetchSystems({ ...filters, ...options });\n\n    }, [fetchSystems, filters, selectedTags]);\n\n    const filterConfigItems = [{\n        label: intl.formatMessage(messages.name),\n        filterValues: {\n            key: 'text-filter',\n            onChange: (event, value) => setSearchText(value),\n            value: searchText\n        }\n    }];\n\n    const activeFiltersConfig = {\n        filters: searchText.length > 0 && [({ category: 'Description', chips: [{ name: searchText }] })] || [],\n        onDelete: () => setSearchText('')\n    };\n\n    const handleRefresh = (options) => {\n        if (systemsFetchStatus === 'fulfilled') {\n            const { offset, limit } = filters;\n            const newOffset = (options.page * options.per_page) - options.per_page;\n            if (newOffset !== offset || limit !== options.per_page) {\n                setFilters({\n                    ...filters,\n                    limit: options.per_page,\n                    offset: (options.page * options.per_page) - options.per_page\n                });\n            }\n        }\n    };\n\n    const calculateSort = () => {\n        const sortIndex = Number(Object.entries(sortIndices).find(item => item[1] === filters.sort || `-${item[1]}` === filters.sort)[0]);\n        const sortDirection = filters.sort[0] === '-' ? 'desc' : 'asc';\n        return {\n            index: sortIndex,\n            key: sortIndex !== 2 ? sortIndices[sortIndex] : 'updated',\n            direction: sortDirection\n        };\n    };\n\n    useEffect(() => {\n        (async () => {\n            const { inventoryConnector, mergeWithEntities, INVENTORY_ACTION_TYPES\n            } = await insights.loadInventory({\n                react: React,\n                reactRouterDom,\n                pfReactTable\n            });\n            getRegistry().register({\n                ...mergeWithEntities(\n                    systemReducer(\n                        [\n                            { title: intl.formatMessage(messages.name), transforms: [pfReactTable.sortable], key: 'display_name' },\n                            {\n                                title: intl.formatMessage(messages.numberRuleHits), transforms: [pfReactTable.sortable, pfReactTable.cellWidth(15)],\n                                key: 'hits'\n                            },\n                            { title: intl.formatMessage(messages.critical), key: 'critical_hits' },\n                            { title: intl.formatMessage(messages.important), key: 'important_hits' },\n                            { title: intl.formatMessage(messages.moderate), key: 'moderate_hits' },\n                            { title: intl.formatMessage(messages.low), key: 'low_hits' },\n                            { title: intl.formatMessage(messages.lastSeen), transforms: [pfReactTable.sortable], key: 'updated' }\n                        ],\n                        INVENTORY_ACTION_TYPES\n                    )\n                )\n            });\n\n            const { InventoryTable } = inventoryConnector(store);\n            setInventory(() => InventoryTable);\n        })();\n    }, [intl, store]);\n\n    useEffect(() => {\n        filters.display_name === undefined ? setSearchText('') : setSearchText(filters.display_name);\n    }, [filters.display_name]);\n\n    useEffect(() => {\n        const copyFilters = { ...filters };\n        delete copyFilters.display_name;\n        setFilters({\n            ...copyFilters,\n            ...(searchText.length ? { display_name: searchText } : {}),\n            offset: 0\n        });\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [debouncedSearchText]);\n\n    useEffect(() => {\n        if (window.location.search) {\n            const paramsObject = paramParser();\n            delete paramsObject.tags;\n            paramsObject.sort !== undefined && (paramsObject.sort = paramsObject.sort[0]);\n            paramsObject.display_name !== undefined && (paramsObject.display_name = paramsObject.display_name[0]);\n            paramsObject.offset === undefined ? paramsObject.offset = 0 : paramsObject.offset = Number(paramsObject.offset[0]);\n            paramsObject.limit === undefined ? paramsObject.limit = 10 : paramsObject.limit = Number(paramsObject.limit[0]);\n            setFilters({ ...filters, ...paramsObject });\n        } else if (filters.limit === undefined || filters.offest === undefined) {\n            setFilters({ ...filters, offset: 0, limit: 10 });\n        }\n\n        setFilterBuilding(false);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    useEffect(() => {\n        urlBuilder(filters, selectedTags);\n    }, [filters, selectedTags]);\n\n    useEffect(() => {\n        !filterBuilding && systemsFetchStatus !== 'pending' && selectedTags !== null && fetchSystemsFn();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [fetchSystemsFn, filterBuilding, filters, selectedTags]);\n\n    return InventoryTable ?\n        systemsFetchStatus !== 'failed' ?\n            <InventoryTable\n                ref={inventory}\n                items={((systemsFetchStatus !== 'pending' && systems && systems.data) || []).map((system) => ({\n                    ...system,\n                    id: system.system_uuid\n                }))}\n                sortBy={calculateSort()}\n                onSort={onSort}\n                hasCheckbox={false}\n                page={filters.offset / filters.limit + 1}\n                total={results}\n                isLoaded={systemsFetchStatus !== 'pending'}\n                perPage={Number(filters.limit)}\n                onRefresh={handleRefresh}\n                filterConfig={{ items: filterConfigItems }}\n                activeFiltersConfig={activeFiltersConfig}\n                exportConfig={{\n                    label: intl.formatMessage(messages.exportCsv),\n                    // eslint-disable-next-line no-dupe-keys\n                    label: intl.formatMessage(messages.exportJson),\n                    onSelect: (_e, fileType) => downloadReport('systems', fileType, urlBuilder(filters, selectedTags))\n                }}\n            />\n            : systemsFetchStatus === 'failed' && (<Failed message={intl.formatMessage(messages.systemTableFetchError)} />)\n        : <Loading />;\n};\n\nSystemsTable.propTypes = {\n    fetchSystems: PropTypes.func,\n    systemsFetchStatus: PropTypes.string,\n    systems: PropTypes.object,\n    addNotification: PropTypes.func,\n    intl: PropTypes.any,\n    filters: PropTypes.object,\n    setFilters: PropTypes.func,\n    selectedTags: PropTypes.array\n};\n\nconst mapStateToProps = ({ AdvisorStore }) => ({\n    systems: AdvisorStore.systems,\n    systemsFetchStatus: AdvisorStore.systemsFetchStatus,\n    filters: AdvisorStore.filtersSystems,\n    selectedTags: AdvisorStore.selectedTags\n});\n\nconst mapDispatchToProps = dispatch => ({\n    fetchSystems: (url) => dispatch(AppActions.fetchSystems(url)),\n    addNotification: data => dispatch(addNotification(data)),\n    setFilters: (filters) => dispatch(AppActions.setFiltersSystems(filters))\n});\n\nexport default injectIntl(routerParams(connect(mapStateToProps, mapDispatchToProps)(SystemsTable)));\n","// Builds returns url params from table filters, pushes to url if history object is passed\nexport const urlBuilder = (filters, selectedTags) => {\n    const url = new URL(window.location);\n    const queryString = `${Object.keys(filters).map(key => `${key}=${Array.isArray(filters[key]) ? filters[key].join() : filters[key]}`).join('&')}`;\n    const params = new URLSearchParams(queryString);\n    selectedTags !== null && selectedTags.length ? params.set('tags', selectedTags.join()) : params.delete('tags');\n    window.history.replaceState(null, null, `${url.origin}${url.pathname}?${params.toString()}`);\n    return `?${queryString}`;\n};\n\n// transforms array of strings -> comma seperated strings, required by advisor api\nexport const filterFetchBuilder = (filters) => Object.assign({},\n    ...Object.entries(filters).map(([filterName, filterValue]) => Array.isArray(filterValue) ?\n        ((filterValue[0] === 'true') || (filterValue[0] === 'false')) && filterValue.length > 1 ? null\n            : { [filterName]: filterValue.join() }\n        : { [filterName]: filterValue })\n);\n\n// parses url params for use in table/filter chips\nexport const paramParser = () => {\n    const searchParams = new URLSearchParams(window.location.search);\n    return Array.from(searchParams).reduce((acc, [key, value]) => ({\n        ...acc, [key]: (value === 'true' || value === 'false') ? JSON.parse(value) : value.split(',')\n    }), {});\n};\n\n// capitalizes text string\nexport const capitalize = (string) => string[0].toUpperCase() + string.substring(1);\n"],"sourceRoot":""}