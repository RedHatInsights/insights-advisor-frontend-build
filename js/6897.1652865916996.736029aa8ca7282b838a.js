(self.webpackChunkadvisor_frontend=self.webpackChunkadvisor_frontend||[]).push([[6897],{58921:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n(4942),a=n(15861),s=n(87757),o=n.n(s),c=n(53446),i=n(35240),l=n(59303),u=n(71094),f=n(97109);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(e){var t={date:(new Date).toISOString().replace(/[T:]/g,"-").split(".")[0]+"-utc"};return"Insights-Advisor_".concat(e,"--").concat(t.date)};const b=function(){var e=(0,a.Z)(o().mark((function e(t,n,r,a,s,d,b){var g,v,y;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g=(null==a?void 0:a.length)&&{tags:a},s&&(g=p(p({},g),(0,f.s0)(s,d))),b((0,c.addNotification)(l.LH.pending)),e.next=6,(0,u.dX)("".concat(l._n,"/export/").concat(t,".").concat("json"===n?"json":"csv"),{},p(p({},r),g)).then((function(e){return b((0,c.addNotification)(l.LH.success)),e})).catch((function(){return b((0,c.addNotification)(l.LH.error))}));case 6:v=e.sent.data,y="json"===n?JSON.stringify(v):v,(0,i.Sv)(y,m(t),n),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),"".concat(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n,r,a,s,o,c){return e.apply(this,arguments)}}()},66584:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(63732),a=n(15914),s=n(42293),o=n(26407),c=n(99332),i=n(69507),l=n(45697),u=n.n(l),f=n(93264),d=n.n(f),p=n(30893),m=n(86896),b=function(e){var t,n=e.labelList,l=e.isCompact,u=(0,m.Z)(),f=(t=n.map((function(e){return e.id})),Object.entries(t.reduce((function(e,t){return e[t]=(e[t]||0)+1,e}),{})).sort((function(e,t){return t[1]-e[1]}))),b=function(e,t){return d().createElement(s.Label,{icon:e,variant:"outline",color:"blue",isCompact:l},t)};return d().createElement(o.e,{numLabels:1,isCompact:l},f.map((function(e){return function(e,t){return 1===e?b(d().createElement(r.ZP,null),u.formatMessage(p.Z.availability)):2===e?b(d().createElement(c.ZP,null),u.formatMessage(p.Z.security)):3===e?b(d().createElement(a.ZP,null),u.formatMessage(p.Z.stability)):4===e?b(d().createElement(i.ZP,null),u.formatMessage(p.Z.performance)):void 0}(Number(e[0]))})))};b.propTypes={labelList:u().array,isCompact:u().bool},b.defaultProps={isCompact:!1};const g=b},76341:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(2095),a=n(85962),s=n(21015),o=n(62965),c=n(93264),i=n.n(c),l=n(45697),u=function(e){var t=e.message;return i().createElement(i().Fragment,null,i().createElement(r.Card,{className:"adv-c-card-empty-rule"},i().createElement(s.CardHeader,null,i().createElement(o.ZP,{size:"lg"})),i().createElement(a.CardBody,null,t)))};const f=u;u.propTypes={message:n.n(l)().string}},44788:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var r=n(4942),a=n(15861),s=n(70885),o=n(87757),c=n.n(o),i=n(93264),l=n.n(i),u=n(59303),f=n(6202),d=n(32752),p=n(4853),m=n(23811),b=n(78826),g=n(71094),v=n(45697),y=n.n(v),h=n(12282),Z=n(71355),O=n(30893),j=n(28216),E=n(86896),M=n(77647);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=function(e){var t=e.handleModalToggle,n=e.isModalOpen,r=e.host,o=e.hosts,v=e.rule,y=e.afterFn,k=(0,E.Z)(),P=(0,j.useDispatch)(),_=function(e){return P((0,Z.wN)(e))},S=(0,i.useState)(""),T=(0,s.Z)(S,2),C=T[0],D=T[1],x=(0,i.useState)(void 0!==r||o.length>0),N=(0,s.Z)(x,2),L=N[0],F=N[1],I=(0,M.om)(),B=(0,s.Z)(I,2),H=B[0],R=(B[1].isLoading,function(){var e=(0,a.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={systems:o,justification:C},e.prev=1,e.next=4,(0,g.SO)("".concat(u._n,"/rule/").concat(v.rule_id,"/ack_hosts/"),{},t);case 4:!L&&_({variant:"success",dismissable:!0,timeout:!0,title:k.formatMessage(O.Z.recSuccessfullyDisabled)}),y&&y(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),_({variant:"danger",dismissable:!0,title:k.formatMessage(O.Z.error),description:"".concat(e.t0)});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}()),z=function(){var e=(0,a.Z)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("enabled"!==v.rule_status||o.length){e.next=15;break}return n=L?{type:"HOST",options:{rule:v.rule_id,system_uuid:r.id,justification:C}}:{type:"RULE",options:w({rule_id:v.rule_id},C&&{justification:C})},e.prev=2,e.next=5,H(n).unwrap();case 5:_({variant:"success",timeout:!0,dismissable:!0,title:k.formatMessage(O.Z.recSuccessfullyDisabled)}),D(""),y&&y(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),_({variant:"danger",dismissable:!0,title:k.formatMessage(O.Z.error),description:"".concat(e.t0)});case 13:e.next=16;break;case 15:R();case 16:t(!1);case 17:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();return l().createElement(b.u_,{variant:"small",title:k.formatMessage(O.Z.disableRule),isOpen:n,onClose:function(){t(!1),D("")},actions:[l().createElement(f.Button,{key:"confirm",variant:"primary",onClick:function(){return z()},ouiaId:"confirm"},k.formatMessage(O.Z.save)),l().createElement(f.Button,{key:"cancel",variant:"link",onClick:function(){t(!1),D("")},ouiaId:"cancel"},k.formatMessage(O.Z.cancel))]},k.formatMessage(O.Z.disableRuleBody),l().createElement(p.l,null,l().createElement(m.c,{fieldId:"blank-form"}),(void 0!==r||o.length>0)&&l().createElement(m.c,{fieldId:"disable-rule-one-system"},l().createElement(d.X,{isChecked:L,onChange:function(){F(!L)},label:o.length?k.formatMessage(O.Z.disableRuleForSystems):k.formatMessage(O.Z.disableRuleSingleSystem),id:"disable-rule-one-system",name:"disable-rule-one-system"})),l().createElement(m.c,{label:k.formatMessage(O.Z.justificationNote),fieldId:"disable-rule-justification"},l().createElement(h.oi,{type:"text",id:"disable-rule-justification","aria-describedby":"disable-rule-justification",value:C,onChange:function(e){return D(e)},onKeyDown:function(e){return"Enter"===e.key&&(e.preventDefault(),z())}}))))};P.propTypes={isModalOpen:y().bool,host:y().object,handleModalToggle:y().func,rule:y().object,afterFn:y().func,hosts:y().array},P.defaultProps={isModalOpen:!1,handleModalToggle:function(){},system:void 0,rule:{},afterFn:function(){},host:void 0,hosts:[]};const _=P},95358:(e,t,n)=>{"use strict";n.d(t,{Z:()=>k});var r=n(15861),a=n(70885),s=n(87757),o=n.n(s),c=n(93264),i=n.n(c),l=n(30381),u=n(59303),f=n(6202),d=n(62410),p=n(71094),m=n(24561),b=n(78826),g=n(6234),v=n(45697),y=n.n(v),h=n(30893),Z=n(71355),O=n(28216),j=n(77647),E=n(86896),M=function(e){var t=e.handleModalToggle,n=e.isModalOpen,s=e.rule,v=e.afterFn,y=(0,E.Z)(),M=(0,O.useDispatch)(),k=[y.formatMessage(h.Z.systemName),y.formatMessage(h.Z.justificationNote),y.formatMessage(h.Z.dateDisabled),""],w=(0,c.useState)([]),P=(0,a.Z)(w,2),_=P[0],S=P[1],T=(0,c.useState)(!1),C=(0,a.Z)(T,2),D=C[0],x=C[1],N=(0,j.u7)({rule_id:s.rule_id,limit:s.hosts_acked_count}),L=N.data,F=void 0===L?[]:L,I=N.isFetching,B=N.isLoading,H=N.refetch,R=function(){var e=(0,r.Z)(o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,p.Sp)("".concat(u._n,"/hostack/").concat(n.id,"/"));case 3:H(),x(!0),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),t(!1),r={variant:"danger",dismissable:!0,title:y.formatMessage(h.Z.error),description:"".concat(e.t0)},M((0,Z.wN)(r));case 11:case"end":return e.stop()}var r}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){var e=null==F?void 0:F.map((function(e){return{cells:[e.display_name||e.system_uuid,e.justification||y.formatMessage(h.Z.none),{title:i().createElement(d.Z,{date:new Date(e.updated_at),type:"onlyDate"})},{title:i().createElement(f.Button,{key:e.system_uuid,isInline:!0,variant:"link",onClick:function(){return R(e)}},i().createElement(g.ZP,{size:"sm"})," ".concat(y.formatMessage(h.Z.enable)))}]}}));B||0!==F.length||(v(),t(!1)),S(e)}),[F]),i().createElement(b.u_,{width:"75%",title:y.formatMessage(h.Z.hostAckModalTitle),isOpen:n,onClose:function(){D&&v(),t(!1)}},I?i().createElement(l.Table,{"aria-label":"host-ack-table",rows:[{cells:[{props:{colSpan:3},title:i().createElement(m.aV,null)}]}],cells:k},i().createElement(l.TableHeader,null),i().createElement(l.TableBody,null)):i().createElement(l.Table,{"aria-label":"host-ack-table",rows:_,cells:k},i().createElement(l.TableHeader,null),i().createElement(l.TableBody,null)))};M.propTypes={isModalOpen:y().bool,handleModalToggle:y().func,rule:y().object,afterFn:y().func},M.defaultProps={isModalOpen:!1,handleModalToggle:function(){},rule:{},afterFn:function(){}};const k=M},70347:()=>{},32857:()=>{},90479:()=>{},78752:()=>{},25238:()=>{}}]);
//# sourceMappingURL=../sourcemaps/6897.a443bba7fcd9d93b0e457dd053ef391c.js.map