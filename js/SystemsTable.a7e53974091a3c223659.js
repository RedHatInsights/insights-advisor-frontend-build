(self.webpackChunkadvisor_frontend=self.webpackChunkadvisor_frontend||[]).push([[3993],{87211:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(94015),r=s.n(a),n=s(23645),i=s.n(n)()(r());i.push([e.id,".advisor .systemsPdfOverride{text-align:left !important;border-radius:0 !important}\n","",{version:3,sources:["webpack://./src/PresentationalComponents/Export/_Export.scss"],names:[],mappings:"AAAA,6BAA6B,0BAA0B,CAAC,0BAA0B",sourcesContent:[".advisor .systemsPdfOverride{text-align:left !important;border-radius:0 !important}\n"],sourceRoot:""}]);const o=i},11860:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(94015),r=s.n(a),n=s(23645),i=s.n(n)()(r());i.push([e.id,".advisor .pf-c-table__sort-indicator{margin-left:var(--pf-global--spacer--xs)}.pf-c-table th,td{padding-right:0px !important}.pf-c-table tr>:last-child{padding-left:var(--pf-global--spacer--xs)}.pf-c-table .pf-c-table__sort{min-width:initial}table.ins-c-entity-table.pf-c-table .ins-composed-col *{font-size:var(--pf-global--FontSize--md)}\n","",{version:3,sources:["webpack://./src/PresentationalComponents/SystemsTable/SystemsTable.scss"],names:[],mappings:"AAAA,qCAAqC,wCAAwC,CAAC,kBAAkB,4BAA4B,CAAC,2BAA2B,yCAAyC,CAAC,8BAA8B,iBAAiB,CAAC,wDAAwD,wCAAwC",sourcesContent:[".advisor .pf-c-table__sort-indicator{margin-left:var(--pf-global--spacer--xs)}.pf-c-table th,td{padding-right:0px !important}.pf-c-table tr>:last-child{padding-left:var(--pf-global--spacer--xs)}.pf-c-table .pf-c-table__sort{min-width:initial}table.ins-c-entity-table.pf-c-table .ins-composed-col *{font-size:var(--pf-global--FontSize--md)}\n"],sourceRoot:""}]);const o=i},96166:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ae});var a=s(59713),r=s.n(a),n=s(63038),i=s.n(n),o=(s(14704),s(64169)),l=s(33237),c=s(20999),f=s(97522),u=s.n(f),m=s(86588),p=s(26042),d=s(59900),y=s(82141),g=s(45697),b=s.n(g),v=s(87757),h=s.n(v),E=s(319),_=s.n(E),A=s(48926),O=s.n(A),S=(s(6972),s(58141)),w=s(89736),x=s(51634),T=s(39080),C=s(87119),P=s(75442),k=s(23992),j=s(71712),M=s(32412),Z=s(18623);function R(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function D(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?R(Object(s),!0).forEach((function(t){r()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):R(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var F=w.mM.create({bold:{fontWeight:k.default.value},link:{color:j.ZP.value},text:{marginTop:M.ZP.value},nameColumn:{width:"220px"},header:{fontSize:9,color:P.ZP.value,paddingLeft:T.ZP.value,paddingBottom:x.ZP.value,paddingTop:C.ZP.value}}),I=function(e){var t=e.page,s=e.systems,a=e.intl,r=[{value:a.formatMessage(Z.Z.name),style:F.nameColumn},{value:a.formatMessage(Z.Z.recommendations),style:{width:"100px",textAlign:"center"}},{value:a.formatMessage(Z.Z.critical),style:{width:"70px",textAlign:"center"}},{value:a.formatMessage(Z.Z.important),style:{width:"70px",textAlign:"center"}},{value:a.formatMessage(Z.Z.moderate),style:{width:"60px",textAlign:"center"}},{value:a.formatMessage(Z.Z.low),style:{width:"90px",textAlign:"center"}},{value:a.formatMessage(Z.Z.lastSeen),style:{marginLeft:"20px"}}],n=["hits","critical_hits","important_hits","moderate_hits","low_hits"],o=_()(s.map((function(e){var t=new Date(e.last_seen).toUTCString().split(" "),s=i()(t,5),a=s[1],r=s[2],o=s[3],l=s[4],c="".concat(a," ").concat(r," ").concat(o,", ").concat(l.split(":").slice(0,2).join(":")," UTC");return[u().createElement(w.xv,{key:e.system_uuid,style:F.nameColumn},u().createElement(w.rU,{style:F.link,src:"https://cloud.redhat.com/insights/advisor/systems/".concat(e.system_uuid,"/")},e.display_name))].concat(_()(n.map((function(t){return a=(s={style:{width:"10px"},value:e[t]}).value,r=s.style,u().createElement(w.xv,{style:r},a);var s,a,r}))),[u().createElement(w.xv,{key:e.last_seen,style:{width:"100px"}},"".concat(c))])})));return u().createElement(u().Fragment,{key:t},u().createElement(S.sg,null,u().createElement(S.iA,{withHeader:!0,rows:[r.map((function(e){return s=(t=e).value,a=t.style,u().createElement(w.xv,{style:D(D(D({},a),F.header),F.bold)},s);var t,s,a}))].concat(_()(o))})))};I.propTypes={systems:b().object,page:b().number,intl:b().any};var B=function(e){var t=e.systemsTotal,s=e.systems,a=e.filters,r=e.tags,n=e.intl;return delete a.offset,delete a.limit,u().createElement(u().Fragment,{key:"".concat(n.formatMessage(Z.Z.insightsHeader),": ").concat(n.formatMessage(Z.Z.systems))},u().createElement(w.xv,{key:"sys-count",style:F.text},n.formatMessage(Z.Z.sysTableCount,{systems:u().createElement(w.xv,{key:"sys-count-count",style:F.bold},n.formatMessage(Z.Z.execReportHeaderSystems,{systems:t}))})),u().createElement(w.xv,{key:"sys-filters",style:F.text},n.formatMessage(Z.Z.filtersApplied)),u().createElement(w.xv,{key:"sys-filters-values",style:F.bold},Object.entries(a).map((function(e){return u().createElement(w.xv,{key:e},"".concat(e[0],": ").concat(e[1],"     "))}))),u().createElement(w.xv,{key:"sys-tags",style:F.text},n.formatMessage(Z.Z.tagsApplied)),u().createElement(w.xv,{key:"sys-tags-values",style:F.bold},r?decodeURIComponent(r):n.formatMessage(Z.Z.noTags)),u().createElement(S.$0,{key:"systems",title:"Systems"},I({systems:s,intl:n})))};B.propTypes={systems:b().object,systemsTotal:b().number,filters:b().object,tags:b().array,intl:b().any};var L=s(37802),N=s(86896);function Y(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function G(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(s),!0).forEach((function(t){r()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Y(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var H=function(e){var t=e.filters,s=e.selectedTags,a=e.systemsCount,r=(0,N.Z)(),n=(0,f.useState)(!1),o=i()(n,2),l=o[0],m=o[1],p=function(){var e=O()(h().mark((function e(){var n,o,l,f,u,p;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),n=s.length&&{tags:s},e.t0=Promise,e.next=5,L.Z.get(c.SYSTEMS_FETCH_URL,{},G(G(G({},t),n),{},{limit:a}));case 5:return e.t1=e.sent.data,e.t2=[e.t1],e.next=9,e.t0.all.call(e.t0,e.t2);case 9:return o=e.sent,l=i()(o,1),f=l[0],u=B({systemsTotal:f.meta.count,systems:f.data.slice(0,18),filters:t,tags:s,intl:r}),p=f.data.slice(18,f.data.length).reduce((function(e,t,s){var a=Math.floor(s/31);return!e[a]&&(e[a]=[]),e[a].push(t),e}),[]),m(!1),e.abrupt("return",[u].concat(_()(p.map((function(e,t){return I({page:t,systems:e,intl:r})})))));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,f.useMemo)((function(){return u().createElement(S.o6,{allPagesHaveTitle:!1,label:l?r.formatMessage(Z.Z.loading):r.formatMessage(Z.Z.exportPdf),asyncFunction:p,buttonProps:G({variant:"",component:"button",className:"pf-c-dropdown__menu-item systemsPdfOverride"},l?{isDisabled:!0}:null),reportName:"".concat(r.formatMessage(Z.Z.insightsHeader),":"),type:r.formatMessage(Z.Z.systems),fileName:"Advisor_systems--".concat((new Date).toUTCString().replace(/ /g,"-"),".pdf"),size:[841.89,595.28]})}),[l])};H.propTypes={filters:b().object,selectedTags:b().string,systemsCount:b().number};const U=H;var z=s(6904),V=s(40050),W=s(24405),q=s(29071),K=s(50448),$=s.n(K),J=s(70856),Q=s(78641),X=s(58135);function ee(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function te(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(s),!0).forEach((function(t){r()(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ee(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var se=function(e){var t,s,a,n=e.systemsFetchStatus,o=e.fetchSystems,m=e.systems,g=e.filters,b=e.setFilters,v=e.selectedTags,h=e.workloads,E=e.SID,_=(0,N.Z)(),A=(0,Q.usePermissions)("advisor",c.PERMS.export).hasAccess,O=(0,f.useRef)(null),S=m.meta?m.meta.count:0,w=(0,f.useState)(g.display_name||""),x=i()(w,2),T=x[0],C=x[1],P=(0,V.Z)(T,c.DEBOUNCE_DELAY),k=(0,f.useState)(!0),j=i()(k,2),M=j[0],R=j[1],D={0:"display_name",1:"hits",2:"critical_hits",3:"important_hits",4:"moderate_hits",5:"low_hits",6:"last_seen"},F=(0,f.useCallback)((function(){var e=v.length&&{tags:v};h&&(e=te(te({},e),(0,p.s0)(h,E))),o(te(te({},(0,p.qW)(g)),e))}),[o,g,v,h,E]),I=function(e){var t=te(te({},g),{},{offset:0});"text"===e&&C(""),delete t[e],"hits"===e&&void 0===t.hits&&(t.hits=["yes"]),b(t)},B=[{label:_.formatMessage(Z.Z.name),filterValues:{key:"text-filter",onChange:function(e,t){return C(t)},value:T}},{label:c.SYSTEM_FILTER_CATEGORIES.hits.title,type:c.SYSTEM_FILTER_CATEGORIES.hits.type,id:c.SYSTEM_FILTER_CATEGORIES.hits.urlParam,value:"checkbox-".concat(c.SYSTEM_FILTER_CATEGORIES.hits.urlParam),filterValues:{key:"".concat(c.SYSTEM_FILTER_CATEGORIES.hits.urlParam,"-filter"),onChange:function(e,t){return function(e,t){"hits"===e&&t.length>1&&t.includes("yes")&&t.shift(),t.length>0?b(te(te({},g),{},{offset:0},r()({},e,t))):I(e)}(c.SYSTEM_FILTER_CATEGORIES.hits.urlParam,t)},value:g.hits,items:c.SYSTEM_FILTER_CATEGORIES.hits.values}}],L={filters:(t=te({},g),t.hits&&t.hits.includes("yes")&&delete t.hits,delete t.sort,delete t.offset,delete t.limit,(0,p.yK)(t,c.SYSTEM_FILTER_CATEGORIES)),onDelete:function(e,t,s){s?(C(""),b({sort:g.sort,limit:g.limit,offset:g.offset,hits:["yes"]})):t.map((function(e){var t=r()({},e.urlParam,Array.isArray(g[e.urlParam])?g[e.urlParam].filter((function(t){return String(t)!==String(e.chips[0].value)})):"");t[e.urlParam].length>0?b(te(te({},g),t)):I(e.urlParam)}))}};return(0,f.useEffect)((function(){void 0===g.display_name?C(""):C(g.display_name)}),[g.display_name]),(0,f.useEffect)((function(){if(!M&&"pending"!==n){var e=te({},g);delete e.display_name,b(te(te(te({},e),T.length?{display_name:T}:{}),{},{offset:0}))}}),[P]),(0,f.useEffect)((function(){if(window.location.search){var e=(0,p.yG)();delete e.tags,void 0!==e.sort&&(e.sort=e.sort[0]),void 0!==e.display_name&&(e.display_name=e.display_name[0]),void 0===e.hits&&(e.hits=["all"]),void 0===e.offset?e.offset=0:e.offset=Number(e.offset[0]),void 0===e.limit?e.limit=10:e.limit=Number(e.limit[0]),b(te(te({},g),e))}else void 0!==g.limit&&void 0!==g.offset&&void 0!==g.hits||b(te(te({},g),{},{offset:0,limit:10,hits:["all"]}));R(!1)}),[]),(0,f.useEffect)((function(){(0,p.Y4)(g,v,h)}),[g,v,h]),(0,f.useEffect)((function(){!M&&"pending"!==n&&null!==v&&F()}),[F,M,g,v]),"failed"!==n?u().createElement(X.e_,{ref:O,items:("pending"!==n&&m&&m.data||[]).map((function(e){return te(te({},e),{},{id:e.system_uuid})})),isFullView:!0,sortBy:(s=Number(Object.entries(D).find((function(e){return e[1]===g.sort||"-".concat(e[1])===g.sort}))[0]),a="-"===g.sort[0]?"desc":"asc",{index:s,key:6!==s?D[s]:"updated",direction:a}),onSort:function(e){var t=e.index,s=e.direction,a="".concat("asc"===s?"":"-").concat(D[t]);b(te(te({},g),{},{sort:a,offset:0}))},hasCheckbox:!1,page:g.offset/g.limit+1,total:S,isLoaded:"pending"!==n,perPage:Number(g.limit),onRefresh:function(e){if("fulfilled"===n){var t=g.offset,s=g.limit;e.page*e.per_page-e.per_page===t&&s===e.per_page||b(te(te({},g),{},{limit:e.per_page,offset:e.page*e.per_page-e.per_page}))}},filterConfig:{items:B},activeFiltersConfig:L,exportConfig:{onSelect:function(e,t){return(0,W.Z)("systems",t,(0,p.Y4)(g,v))},extraItems:[u().createElement("li",{key:"download-pd",role:"menuitem"},u().createElement(U,{filters:te({},(0,p.qW)(g)),selectedTags:v,systemsCount:m&&m.meta&&m.meta.count}))],isDisabled:!A,tooltipText:A?_.formatMessage(Z.Z.exportData):_.formatMessage(Z.Z.permsAction)},fallback:y.Z,onLoad:function(e){var t=e.mergeWithEntities,s=e.INVENTORY_ACTION_TYPES,a=[{title:_.formatMessage(Z.Z.name),transforms:[l.sortable,l.cellWidth(80)],key:"display_name"},{title:_.formatMessage(Z.Z.numberRuleHits),transforms:[l.sortable,l.wrappable],key:"hits"},{title:_.formatMessage(Z.Z.critical),transforms:[l.sortable,l.wrappable],key:"critical_hits"},{title:_.formatMessage(Z.Z.important),transforms:[l.sortable,l.wrappable],key:"important_hits"},{title:_.formatMessage(Z.Z.moderate),transforms:[l.sortable,l.wrappable],key:"moderate_hits"},{title:_.formatMessage(Z.Z.low),transforms:[l.sortable,l.wrappable],key:"low_hits"},{title:_.formatMessage(Z.Z.lastSeen),transforms:[l.sortable,l.wrappable],key:"updated"}];(0,q.getRegistry)().register(te({},t((0,J.Vy)([].concat(a),s))))}}):"failed"===n&&u().createElement(d.Z,{message:_.formatMessage(Z.Z.systemTableFetchError)})};se.propTypes={fetchSystems:b().func,systemsFetchStatus:b().string,systems:b().object,addNotification:b().func,filters:b().object,setFilters:b().func,selectedTags:b().array,workloads:b().object,SID:b().object};const ae=$()((0,m.connect)((function(e){var t=e.AdvisorStore;return{systems:t.systems,systemsFetchStatus:t.systemsFetchStatus,filters:t.filtersSystems,selectedTags:t.selectedTags,workloads:t.workloads,SID:t.SID}}),(function(e){return{fetchSystems:function(t){return e(o.lc(t))},addNotification:function(t){return e((0,z.addNotification)(t))},setFilters:function(t){return e(o.aw(t))}}}))(se))},6972:(e,t,s)=>{"use strict";var a=s(93379),r=s.n(a),n=s(87211),i=r()(n.default,{insert:"head",singleton:!1});if(!n.default.locals||e.hot.invalidate){var o=n.default.locals;e.hot.accept(87211,(t=>{n=s(87211),function(e,t,s){if(!e&&t||e&&!t)return!1;var a;for(a in e)if(e[a]!==t[a])return!1;for(a in t)if(!e[a])return!1;return!0}(o,n.default.locals)?(o=n.default.locals,i(n.default)):e.hot.invalidate()}))}e.hot.dispose((function(){i()})),n.default.locals},14704:(e,t,s)=>{"use strict";var a=s(93379),r=s.n(a),n=s(11860),i=r()(n.default,{insert:"head",singleton:!1});if(!n.default.locals||e.hot.invalidate){var o=n.default.locals;e.hot.accept(11860,(t=>{n=s(11860),function(e,t,s){if(!e&&t||e&&!t)return!1;var a;for(a in e)if(e[a]!==t[a])return!1;for(a in t)if(!e[a])return!1;return!0}(o,n.default.locals)?(o=n.default.locals,i(n.default)):e.hot.invalidate()}))}e.hot.dispose((function(){i()})),n.default.locals}}]);
//# sourceMappingURL=SystemsTable.a7e53974091a3c223659.js.map