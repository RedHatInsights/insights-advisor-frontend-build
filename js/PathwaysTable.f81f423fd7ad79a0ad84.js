"use strict";(self.webpackChunkadvisor_frontend=self.webpackChunkadvisor_frontend||[]).push([[573],{79930:(e,t,r)=>{r.r(t),r.d(t,{default:()=>j});var a=r(87462),n=r(29439),o=r(4942),i=r(59303),l=r(75662),s=r(13877),c=r(93264),u=r.n(c),f=r(27577),m=r(97109),d=r(82041),g=r(66584),b=r(76341),p=r(46891),y=r(34702),v=r(66031),P=r(24130),h=r(87516),Z=r(71070),W=r(40609),E=r(30893),k=r(28672),S=r(8377),O=r(86896);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const j=function(){var e,t,r=(0,O.Z)(),w=(0,d.useDispatch)(),j=(0,l.useLocation)().search,x=(0,d.useSelector)((function(e){return e.filters.selectedTags})),C=(0,d.useSelector)((function(e){return e.filters.workloads})),_=(0,d.useSelector)((function(e){return e.filters.SID})),L=(0,d.useSelector)((function(e){return e.filters.pathState})),D=function(e){return w((0,k.lW)(e))},T={};(null==x?void 0:x.length)&&(T=M(M({},T),{tags:x.join(",")})),C&&(T=M(M({},T),(0,m.s0)(C,_)));var F,A=(0,S.Lv)(M(M({},(0,m.qW)(L)),T)),N=A.data,V=void 0===N?[]:N,q=A.isFetching,B=A.isLoading,I=A.isError,R=[{title:r.formatMessage(E.Z.pathway),transforms:[f.sortable,(0,f.cellWidth)(45)]},{title:r.formatMessage(E.Z.category)},{title:r.formatMessage(E.Z.systems),transforms:[f.sortable,(0,f.cellWidth)(10)]},{title:r.formatMessage(E.Z.reboot)},{title:r.formatMessage(E.Z.reclvl),transforms:[(0,f.cellWidth)(20),f.fitContent,(0,f.info)({tooltip:r.formatMessage(E.Z.reclvldetails),tooltipProps:{isContentLeftAligned:!0}})]}],H={0:"name",2:"impacted_systems_count"},G=(0,c.useState)({}),K=(0,n.Z)(G,2),Y=K[0],$=K[1],z=(0,c.useState)(!0),J=(0,n.Z)(z,2),Q=J[0],U=J[1],X=(0,c.useState)((null==L?void 0:L.text)||""),ee=(0,n.Z)(X,2),te=ee[0],re=ee[1],ae=(0,W.Z)(te,i.$x),ne=function(e){var t=e*L.limit-L.limit;D(M(M({},L),{},{offset:t}))},oe=function(e){var t=M(M({},L),{},{offset:0});"text"===e&&re(""),delete t[e],D(t)},ie=function(e,t){t.length>0?D(M(M({},L),{},{offset:0},(0,o.Z)({},e,t))):oe(e)},le=[{label:r.formatMessage(E.Z.name).toLowerCase(),filterValues:{key:"text-filter",onChange:function(e,t){return re(t)},value:te,placeholder:r.formatMessage(E.Z.filterBy)}},{label:i.W2.category.title,type:i.W2.category.type,id:i.W2.category.urlParam,value:"checkbox-".concat(i.W2.category.urlParam),filterValues:{key:"".concat(i.W2.category.urlParam,"-filter"),onChange:function(e,t){return ie(i.W2.category.urlParam,t)},value:L.category,items:i.W2.category.values}},{label:i.W2.incident.title,type:i.W2.incident.type,id:i.W2.incident.urlParam,value:"checkbox-".concat(i.W2.incident.urlParam),filterValues:{key:"".concat(i.W2.incident.urlParam,"-filter"),onChange:function(e,t){return ie(i.W2.incident.urlParam,t)},value:L.incident,items:i.W2.incident.values}},{label:i.W2.reboot.title,type:i.W2.reboot.type,id:i.W2.reboot.urlParam,value:"checkbox-".concat(i.W2.reboot.urlParam),filterValues:{key:"".concat(i.W2.reboot.urlParam,"-filter"),onChange:function(e,t){return ie(i.W2.reboot.urlParam,t)},value:L.reboot,items:i.W2.reboot.values}}],se={deleteTitle:r.formatMessage(E.Z.resetFilters),filters:(F=M({},L),delete F.sort,delete F.offset,delete F.limit,(0,m.yK)(F,i.W2)),onDelete:function(e,t,r){r?(re(""),D({limit:L.limit,offset:L.offset})):t.map((function(e){var t=(0,o.Z)({},e.urlParam,Array.isArray(L[e.urlParam])?L[e.urlParam].filter((function(t){return String(t)!==String(e.chips[0].value)})):"");t[e.urlParam].length>0?D(M(M({},L),t)):oe(e.urlParam)}))}};return(0,c.useEffect)((function(){Q||null===x||(0,m.Y4)(L,x)}),[L,x,C,_]),(0,c.useEffect)((function(){if(j&&Q){var e=(0,m.yG)();delete e.tags,void 0===e.text?re(""):re(e.text),e.sort=void 0===e.sort?"-impacted_systems_count":e.sort[0],void 0===e.offset?e.offset=0:e.offset=Number(e.offset[0]),void 0===e.limit?e.limit=20:e.limit=Number(e.limit[0]),void 0!==e.reboot&&!Array.isArray(e.reboot)&&(e.reboot=["".concat(e.reboot)]),D(M(M({},L),e))}U(!1)}),[]),(0,c.useEffect)((function(){if(void 0!==L.sort&&H){var e=L.sort,t=Number(Object.entries(H).find((function(t){return t[1]===e||"-".concat(t[1])===e}))[0]),r="-"===L.sort[0]?"desc":"asc";$({index:t,direction:r})}}),[L.sort]),(0,c.useEffect)((function(){if(!Q&&!B){var e=M({},L),t=te.length?{text:te}:{};delete e.text,D(M(M(M({},e),t),{},{offset:0}))}}),[ae]),u().createElement(u().Fragment,null,u().createElement(v.Z,{pagination:{itemCount:(null==V||null===(e=V.meta)||void 0===e?void 0:e.count)||0,page:L.offset/L.limit+1,perPage:Number(L.limit),onSetPage:function(e,t){ne(t)},onPerPageSelect:function(e,t){D(M(M({},L),{},{limit:t,offset:0}))},isCompact:!0},filterConfig:{items:le},activeFiltersConfig:se}),q?u().createElement(p.Z,null):I?u().createElement(b.Z,{message:r.formatMessage(E.Z.rulesTableFetchRulesError)}):u().createElement(f.Table,{"aria-label":"pathways-table",variant:f.TableVariant.compact,sortBy:Y,onSort:function(e,t,r){var a="".concat("asc"===r?"":"-").concat(H[t]);$({index:t,direction:r}),D(M(M({},L),{},{sort:a,offset:0}))},cells:R,rows:function(e){return 0===e.length?[{cells:[{title:u().createElement(y.Z,{icon:Z.ZP,title:r.formatMessage(E.Z.noResults),text:r.formatMessage(E.Z.adjustFilters)}),props:{colSpan:6}}]}]:e.flatMap((function(e,t){return[{cells:[{title:u().createElement("span",{key:t},u().createElement(l.Link,{key:t,to:"/recommendations/pathways/".concat(e.slug)}," ",e.name," "),e.has_incident&&u().createElement(h.Z,{rule:{tags:"incident"}}))},{title:u().createElement(g.Z,{key:t,labelList:e.categories})},{title:u().createElement("div",{key:t},"".concat(e.impacted_systems_count.toLocaleString()))},{title:u().createElement("span",{key:t},r.formatMessage(e.reboot_required?E.Z.required:E.Z.notRequired))},{title:u().createElement(P.Z,(0,a.Z)({key:t},e))}]}]}))}(null==V?void 0:V.data),isStickyHeader:!0},u().createElement(f.TableHeader,null),u().createElement(f.TableBody,null)),u().createElement(s.tl,{ouiaId:"page",itemCount:(null==V||null===(t=V.meta)||void 0===t?void 0:t.count)||0,page:L.offset/L.limit+1,perPage:Number(L.limit),onSetPage:function(e,t){ne(t)},onPerPageSelect:function(e,t){D(M(M({},L),{},{limit:t,offset:0}))},widgetId:"pagination-options-menu-bottom",variant:s.aM.bottom}))}}}]);
//# sourceMappingURL=../sourcemaps/PathwaysTable.429d3deb41855fc0994fc2a4a021cb98.js.map