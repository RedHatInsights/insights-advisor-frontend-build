(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{1118:function(e,t,a){var n=a(870);"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},o=a(13)(n,r);n.locals&&(e.exports=n.locals),e.hot.accept(870,(function(){var t=a(870);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var a,n=0;for(a in e){if(!t||e[a]!==t[a])return!1;n++}for(a in t)n--;return 0===n}(n.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");o(t)})),e.hot.dispose((function(){o()}))},1166:function(e,t,a){"use strict";a.r(t);var n=a(264),r=a.n(n),o=a(179),c=a.n(o),s=a(262),i=a.n(s),l=a(129),u=a.n(l),p=a(261),f=a.n(p),g=(a(1118),a(0)),d=a.n(g),m=a(785),b=a(30),v=a(813),O=a(185),h=a(43),w=a(10),j=a(373),T=a(786),y=a(266),_=a.n(y),S=a(12),C=a.n(S),x=a(783),E=a(67),k=a(844),M=a(11),P=a(816),R=a(281);function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){u()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var U=function(e){var t=e.toggleModal,a=e.fetchTags,n=e.selectedTags,r=e.setSelectedTags,o=e.totalTags,s=e.isOpen,l=Object(g.useState)(),u=f()(l,2),p=u[0],m=u[1],b=Object(g.useState)(!1),v=f()(b,2),O=v[0],h=v[1],j=Object(g.useState)([]),T=f()(j,2),y=T[0],S=T[1],C=Object(g.useState)(10),E=f()(C,2),P=E[0],D=E[1],U=Object(g.useState)(1),I=f()(U,2),N=I[0],B=I[1],A=Object(g.useState)(),V=f()(A,2),q=V[0],F=V[1],G=Object(R.a)(),J=Object(k.a)(q,w.DEBOUNCE_DELAY),Y=Object(g.useMemo)((function(){return function(e){return{filters:e.map((function(e){return e.namespace})).filter((function(e,t,a){return a.indexOf(e)===t})).map((function(t){return{category:t,chips:e.filter((function(e){return e.namespace===t})).map((function(e){return{name:e.value,id:e.id,value:!0}})),urlParam:"tags"}}))}}(y)}),[y]);Object(g.useEffect)((function(){i()(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B(1),e.t0=m,e.next=4,a(P,1,null,q);case 4:e.t1=e.sent,(0,e.t0)(e.t1),h(!0);case 7:case"end":return e.stop()}}),e)})))()}),[J]),Object(g.useEffect)((function(){i()(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=m,e.next=3,a(P,N,null,J);case 3:e.t1=e.sent,(0,e.t0)(e.t1),h(!0);case 6:case"end":return e.stop()}}),e)})))()}),[P,N]),Object(g.useEffect)((function(){S(n.length?n.map((function(e){return{id:e,namespace:e.split("/")[0],key:decodeURIComponent(e.split("/")[1].split("=")[0]),value:decodeURIComponent(e.split("/")[1].split("=")[1])}})):[])}),[n,S]);return d.a.createElement(x.TagModal,_()({title:G.formatMessage(M.a.tagsCount,{count:o})},O&&{loaded:O,pagination:{perPage:P,page:N,count:o},rows:p.map((function(e){return L(L({},e),{},{selected:y.find((function(t){return t.id===e.id})),cells:[e.key,e.value,e.namespace,e.count]})}))},{loaded:O,width:"50%",isOpen:s,toggleModal:function(){D(10),B(1),F(),S([]),t()},filters:[{label:G.formatMessage(M.a.filterTagsInModal),placeholder:G.formatMessage(M.a.filterTagsInModal),value:"tags-filter",filterValues:{key:"text-filter",onChange:function(e,t){return F(t)},value:q}}],onUpdateData:function(e){h(!1),D(e.perPage),B(e.page)},columns:[{title:G.formatMessage(M.a.tagsModalName)},{title:G.formatMessage(M.a.tagsModalValue)},{title:G.formatMessage(M.a.tagsModalSources)},{title:G.formatMessage(M.a.systems)}],selected:y,onSelect:function(e){return S(e.map((function(e){return{id:e.id,namespace:e.namespace,value:e.value,selected:!0}})))},onApply:function(){r(y.map((function(e){return e.id}))),S([])},tableProps:{canSelectAll:!1},primaryToolbarProps:{activeFiltersConfig:L(L({},Y),{},{onDelete:function(e,t,a){if(a)S([]);else{var n=t.flatMap((function(e){return e.chips.map((function(e){return e.id}))}));S(y.filter((function(e){return n.filter((function(t){return t!==e.id})).length})))}}})}}))};U.propTypes={toggleModal:C.a.func.isRequired,fetchTags:C.a.func.isRequired,totalTags:C.a.number.isRequired,isOpen:C.a.bool.isRequired,selectedTags:C.a.array,setSelectedTags:C.a.func};var I=Object(E.connect)((function(e){return{selectedTags:e.AdvisorStore.selectedTags}}),(function(e){return{setSelectedTags:function(t){return e(Object(P.n)(t))}}}))(U),N=a(268),B=a.n(N),A=a(784),V=a.n(A),q=a(180),F=a(68),G=a(892),J=a.n(G),Y=function(e){if(null!==e){var t=new URL(window.location),a=new URLSearchParams(t.search);e.length?a.set("tags",e.join()):a.delete("tags"),window.history.replaceState(null,null,"".concat(t.origin).concat(t.pathname).concat(a.toString().length?"?":"").concat(a.toString()))}};function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(Object(a),!0).forEach((function(t){u()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var W=function(e){var t=e.selectedTags,a=e.setSelectedTags,n=Object(R.a)(),o=Object(g.useState)(!1),s=f()(o,2),l=s[0],u=s[1],p=Object(g.useState)(),y=f()(p,2),_=y[0],S=y[1],C=Object(g.useState)([]),x=f()(C,2),E=x[0],P=x[1],D=Object(g.useState)(),L=f()(D,2),U=L[0],N=L[1],A=Object(g.useState)(),G=f()(A,2),z=G[0],W=G[1],K=Object(g.useState)(),Q=f()(K,2),X=Q[0],Z=Q[1],$=Object(k.a)(U,w.DEBOUNCE_DELAY),ee=Object(g.useState)(!1),te=f()(ee,2),ae=te[0],ne=te[1],re=function(e){return e.map((function(e){return e.namespace})).filter((function(e,t,a){return a.indexOf(e)===t})).map((function(t){return{source:t,data:e.filter((function(e){return e.namespace===t}))}}))},oe=function(e){var t=[];return e.map((function(e){var a=e.tag,n=a.namespace,r=a.key,o=a.value;t.push(H(H({},e.tag),{},{count:e.count,id:"".concat(n,"/").concat(encodeURIComponent(r),"=").concat(encodeURIComponent(o))}))})),t},ce=function(){var e=i()(c.a.mark((function e(r,o,s,i){var l,u,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=[],e.prev=1,""!==i&&i){e.next=8;break}return e.next=5,v.a.get("".concat(w.INV_BASE_URL,"/tags?per_page=").concat(r,"&page=").concat(o,"&registered_with=insights"));case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,v.a.get("".concat(w.INV_BASE_URL,"/tags?per_page=").concat(r,"&page=").concat(o,"&search=").concat(i.toLowerCase(),"&registered_with=insights"));case 10:e.t0=e.sent;case 11:u=e.t0,S(u.data.total),l=oe(u.data.results),null===s&&null===t&&a([]),s.length&&(p=J()(s.split(","),t),Y(p),a(p)),e.next=21;break;case 18:e.prev=18,e.t1=e.catch(1),Object(F.addNotification)({variant:"danger",dismissable:!0,title:n.formatMessage(M.a.error),description:"".concat(e.t1)});case 21:return e.abrupt("return",l);case 22:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t,a,n,r){return e.apply(this,arguments)}}();Object(g.useEffect)((function(){N("")}),[]),Object(g.useEffect)((function(){Z(E.flatMap((function(e){return e.data})).length)}),[E]),Object(g.useEffect)((function(){var e=new URL(window.location),t=new URLSearchParams(e.search);W(t.get("tags"))}),[t]),Object(g.useEffect)((function(){var e=new URL(window.location),t=new URLSearchParams(e.search);t.get("tags")===z?i()(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=P,e.t1=re,e.next=4,ce(20,1,null,U);case 4:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.abrupt("return",(0,e.t0)(e.t3));case 7:case"end":return e.stop()}}),e)})))():i()(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=P,e.t1=re,e.next=4,ce(20,1,t,U);case 4:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.abrupt("return",(0,e.t0)(e.t3));case 7:case"end":return e.stop()}}),e)})))()}),[$]),Object(g.useEffect)((function(){Y(t)}),[window.location]);return null!==t&&d.a.createElement("div",{className:"tagsToolbarContainer"},d.a.createElement(I,{totalTags:_,toggleModal:function(){return ne(!ae)},isOpen:ae,fetchTags:ce}),d.a.createElement(m.Select,{className:"dropDownOverride",variant:m.SelectVariant.checkbox,"aria-label":"Select Group Input",onToggle:function(e){N(""),u(e)},onSelect:function(e,n){var o=t.includes(n)?t.filter((function(e){return e!==n})):[].concat(r()(t),[n]);a(o),Y(o)},selections:t,isOpen:l,placeholderText:d.a.createElement(d.a.Fragment,null,d.a.createElement(V.a,null),"Â ",E.length>0?d.a.createElement(d.a.Fragment,null,n.formatMessage(M.a.filterResults)," ",0===t.length&&n.formatMessage(M.a.allSystems)):n.formatMessage(M.a.noTags)),ariaLabelledBy:"select-group-input",isDisabled:0===E.length},d.a.createElement(T.InputGroup,{className:"tags-filter-group",value:""},d.a.createElement(q.TextInput,{"aria-label":"tags-filter-input",placeholder:n.formatMessage(M.a.filterTagsInToolbar),value:U,onChange:N}),d.a.createElement(B.a,{className:"tags-filter-search-icon"})),d.a.createElement(j.Divider,{key:"inline-filter-divider",value:""}),E.map((function(e,a){return d.a.createElement(m.SelectGroup,{key:"group".concat(a),label:e.source,value:""},e.data.map((function(e,a){return d.a.createElement("span",{key:a,className:"tags-select-group"},d.a.createElement(m.SelectOption,{value:e.id,isChecked:t.find((function(t){return t===e.id}))},d.a.createElement(b.Tooltip,{content:"".concat(decodeURIComponent(e.id)),position:b.TooltipPosition.right},d.a.createElement("span",null,"".concat(decodeURIComponent(e.key+"="+e.value))))),d.a.createElement(O.Badge,{className:"tags-select-badge"}," ",e.count," "))})))})),d.a.createElement(h.Button,{key:"manage all tags",value:"",variant:"link",onClick:function(){return ne(!0)}},X>=20?n.formatMessage(M.a.countMoreTags,{count:_-X}):n.formatMessage(M.a.manageTags))))};W.propTypes={selectedTags:C.a.array,addNotification:C.a.func,intl:C.a.any,setSelectedTags:C.a.func,history:C.a.any};t.default=Object(E.connect)((function(e){return{selectedTags:e.AdvisorStore.selectedTags}}),(function(e){return{addNotification:function(t){return e(Object(F.addNotification)(t))},setSelectedTags:function(t){return e(Object(P.n)(t))}}}))(W)},870:function(e,t,a){(t=a(9)(!1)).push([e.i,":root{--ins-color--orange: #ec7a08}button:focus{outline:none}.tagsToolbarContainer{background-color:var(--pf-global--BackgroundColor--100);border-bottom:var(--pf-global--BorderWidth--sm) solid var(--pf-global--BorderColor--light-100)}.tagsToolbarContainer .pf-c-dropdown__menu{top:36px !important}.tagsToolbarContainer .dropDownOverride{padding-left:var(--pf-global--spacer--md)}.tagsToolbarContainer .dropDownOverride button::before{border:none !important}.tagsToolbarContainer .tags-filter-group{display:flex;padding:var(--pf-global--spacer--sm) 0 var(--pf-global--spacer--md) var(--pf-global--spacer--md)}.tagsToolbarContainer .tags-filter-group .tags-filter-search-icon{position:relative;left:-30px;left:-1.875rem;top:10px;top:.625rem}.tagsToolbarContainer .tags-select-group{display:flex}.tagsToolbarContainer .tags-select-group:hover{background-color:var(--pf-c-select__menu-item--hover--BackgroundColor)}.tagsToolbarContainer .tags-select-group .tags-select-badge{position:relative;margin-top:var(--pf-global--spacer--md);left:-15px;left:-.9375rem;bottom:8px;bottom:.5rem}.tagsToolbarContainer .pf-c-select__toggle{width:220px;font-size:small}.tagsToolbarContainer .pf-c-select__toggle.pf-m-disabled,.tagsToolbarContainer .pf-c-select__toggle:disabled{background-color:var(--pf-global--BackgroundColor--100)}.tagsToolbarContainer .pf-c-select__toggle.pf-m-disabled .pf-c-select__toggle-arrow,.tagsToolbarContainer .pf-c-select__toggle:disabled .pf-c-select__toggle-arrow{color:var(--pf-global--BackgroundColor--100)}.tagsToolbarContainer .pf-c-select{max-width:400px !important}.tagsToolbarContainer .pf-c-check__label{max-width:400px !important;width:400px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tagsListContainer .pf-c-data-list{border:none}.tagsListContainer .pf-c-data-list__item{border:none}.tagsListContainer .pf-c-data-list__item .pf-c-data-list__item-control{padding:8px 0 8px !important}.tagsListContainer .pf-c-data-list__item .pf-c-data-list__item-content{padding-bottom:8px !important}.tagsListContainer .pf-c-data-list__item .pf-c-data-list__item-content .pf-c-data-list__cell{padding-top:8px !important}\n",""]),e.exports=t}}]);
//# sourceMappingURL=24.js.map