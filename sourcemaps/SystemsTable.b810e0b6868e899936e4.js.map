{"version":3,"sources":["webpack:///./src/PresentationalComponents/Export/SystemsPdfBuild.js","webpack:///./src/PresentationalComponents/Export/SystemsPdf.js","webpack:///./src/PresentationalComponents/SystemsTable/SystemsTable.js"],"names":["styles","StyleSheet","bold","fontWeight","global_FontWeight_bold","link","color","global_link_Color","text","marginTop","global_spacer_md","nameColumn","width","header","fontSize","chart_global_Fill_Color_700","paddingLeft","c_table_m_compact_cell_PaddingLeft","paddingBottom","c_table_m_compact_cell_PaddingBottom","paddingTop","c_table_m_compact_cell_PaddingTop","tablePage","page","systems","intl","value","formatMessage","messages","style","textAlign","marginLeft","hitColumns","rows","map","system","Date","last_seen","toUTCString","split","date","month","year","time","sysDate","slice","join","key","system_uuid","src","display_name","item","withHeader","propTypes","PropTypes","leadPage","systemsTotal","filters","tags","offset","limit","Object","entries","decodeURIComponent","title","SystemsPdf","useIntl","useState","loading","setLoading","selectedTags","useSelector","AdvisorStore","workloads","SID","dataFetch","options","length","workloadQueryBuilder","API","BASE_URL","data","firstPage","otherPages","reduce","resultArray","index","chunkIndex","Math","floor","push","pageSystems","useMemo","groupName","allPagesHaveTitle","label","asyncFunction","buttonProps","variant","component","className","isDisabled","reportName","type","fileName","replace","size","systemsCount","localFilters","dispatch","useDispatch","search","useLocation","systemsFetchStatus","filtersSystems","setFilters","AppActions","permsExport","usePermissions","PERMS","hasAccess","inventory","useRef","results","meta","count","searchText","setSearchText","debouncedSearchText","debounce","DEBOUNCE_DELAY","filterBuilding","setFilterBuilding","sortIndices","0","2","3","4","5","6","7","columns","transforms","sortable","wrappable","fetchSystemsFn","urlBuilder","url","filterFetchBuilder","removeFilterParam","param","filter","undefined","hits","filterConfigItems","toLowerCase","filterValues","onChange","event","SFC","id","values","includes","shift","addFilterParam","items","activeFiltersConfig","deleteTitle","sort","pruneFilters","onDelete","itemsToRemove","isAll","newFilter","urlParam","Array","isArray","String","chips","useEffect","copyFilters","paramsObject","paramParser","Number","sortIndex","sortDirection","find","direction","InventoryTable","disableDefaultColumns","defaultColumns","lastSeenColumn","displayName","systemProfile","props","isStatic","createColumns","onLoad","mergeWithEntities","INVENTORY_ACTION_TYPES","mergeWithDetail","getRegistry","register","systemReducer","perPage","tableProps","isStickyHeader","TableVariant","ref","isFullView","sortBy","onSort","orderParam","hasCheckbox","total","isLoaded","filterConfig","exportConfig","onSelect","_e","fileType","downloadReport","extraItems","role","tooltipText","fallback","Loading","Failed","message"],"mappings":"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","file":"js/SystemsTable.8ae009511e1a897e151e.js","sourcesContent":["/* eslint-disable react/prop-types */\n\nimport {\n  Column,\n  Section,\n  Table,\n} from '@redhat-cloud-services/frontend-components-pdf-generator/dist/esm/index';\nimport { Link, StyleSheet, Text } from '@react-pdf/renderer';\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport c_table_m_compact_cell_PaddingBottom from '@patternfly/react-tokens/dist/js/c_table_m_compact_cell_PaddingBottom';\nimport c_table_m_compact_cell_PaddingLeft from '@patternfly/react-tokens/dist/js/c_table_m_compact_cell_PaddingLeft';\nimport c_table_m_compact_cell_PaddingTop from '@patternfly/react-tokens/dist/js/c_table_m_compact_cell_PaddingTop';\nimport chart_global_Fill_Color_700 from '@patternfly/react-tokens/dist/js/chart_global_Fill_Color_700';\nimport global_FontWeight_bold from '@patternfly/react-tokens/dist/js/global_FontWeight_bold';\nimport global_link_Color from '@patternfly/react-tokens/dist/js/global_link_Color';\nimport global_spacer_md from '@patternfly/react-tokens/dist/js/global_spacer_md';\nimport messages from '../../Messages';\n\nconst styles = StyleSheet.create({\n  bold: { fontWeight: global_FontWeight_bold.value },\n  link: { color: global_link_Color.value },\n  text: { marginTop: global_spacer_md.value },\n  nameColumn: { width: '220px' },\n  header: {\n    fontSize: 9,\n    color: chart_global_Fill_Color_700.value,\n    paddingLeft: c_table_m_compact_cell_PaddingLeft.value,\n    paddingBottom: c_table_m_compact_cell_PaddingBottom.value,\n    paddingTop: c_table_m_compact_cell_PaddingTop.value,\n  },\n});\n\nexport const tablePage = ({ page, systems, intl }) => {\n  const header = [\n    { value: intl.formatMessage(messages.name), style: styles.nameColumn },\n    {\n      value: intl.formatMessage(messages.recommendations),\n      style: { width: '100px', textAlign: 'center' },\n    },\n    {\n      value: intl.formatMessage(messages.critical),\n      style: { width: '70px', textAlign: 'center' },\n    },\n    {\n      value: intl.formatMessage(messages.important),\n      style: { width: '70px', textAlign: 'center' },\n    },\n    {\n      value: intl.formatMessage(messages.moderate),\n      style: { width: '60px', textAlign: 'center' },\n    },\n    {\n      value: intl.formatMessage(messages.low),\n      style: { width: '90px', textAlign: 'center' },\n    },\n    {\n      value: intl.formatMessage(messages.lastSeen),\n      style: { marginLeft: '20px' },\n    },\n  ];\n  const hitColumns = [\n    'hits',\n    'critical_hits',\n    'important_hits',\n    'moderate_hits',\n    'low_hits',\n  ];\n  const headerBuilder = ({ value, style }) => (\n    <Text style={{ ...style, ...styles.header, ...styles.bold }}>{value}</Text>\n  );\n  const rowBuilder = ({ value, style }) => <Text style={style}>{value}</Text>;\n  const rows = [\n    ...systems.map((system) => {\n      const [, date, month, year, time] = new Date(system.last_seen)\n        .toUTCString()\n        .split(' ');\n      const sysDate = `${date} ${month} ${year}, ${time\n        .split(':')\n        .slice(0, 2)\n        .join(':')} UTC`;\n      return [\n        <Text key={system.system_uuid} style={styles.nameColumn}>\n          <Link\n            style={styles.link}\n            src={`https://cloud.redhat.com/insights/advisor/systems/${system.system_uuid}/`}\n          >\n            {system.display_name}\n          </Link>\n        </Text>,\n        ...hitColumns.map((item) =>\n          rowBuilder({ style: { width: '10px' }, value: system[item] })\n        ),\n        <Text\n          key={system.last_seen}\n          style={{ width: '100px' }}\n        >{`${sysDate}`}</Text>,\n      ];\n    }),\n  ];\n\n  return (\n    <React.Fragment key={page}>\n      <Column>\n        <Table\n          withHeader\n          rows={[header.map((item) => headerBuilder(item)), ...rows]}\n        />\n      </Column>\n    </React.Fragment>\n  );\n};\n\ntablePage.propTypes = {\n  systems: PropTypes.object,\n  page: PropTypes.number,\n  intl: PropTypes.any,\n};\n\nexport const leadPage = ({ systemsTotal, systems, filters, tags, intl }) => {\n  delete filters.offset;\n  delete filters.limit;\n  return (\n    <React.Fragment\n      key={`${intl.formatMessage(\n        messages.insightsHeader\n      )}: ${intl.formatMessage(messages.systems)}`}\n    >\n      <Text key=\"sys-count\" style={styles.text}>\n        {intl.formatMessage(messages.sysTableCount, {\n          systems: (\n            <Text key=\"sys-count-count\" style={styles.bold}>\n              {intl.formatMessage(messages.execReportHeaderSystems, {\n                systems: systemsTotal,\n              })}\n              {systemsTotal > 1000 && intl.formatMessage(messages.dueTo)}\n            </Text>\n          ),\n        })}\n      </Text>\n      <Text key=\"sys-filters\" style={styles.text}>\n        {intl.formatMessage(messages.filtersApplied)}\n      </Text>\n      <Text key=\"sys-filters-values\" style={styles.bold}>\n        {Object.entries(filters).map((value) => (\n          <Text key={value}>{`${value[0]}: ${value[1]}     `}</Text>\n        ))}\n      </Text>\n      <Text key=\"sys-tags\" style={styles.text}>\n        {intl.formatMessage(messages.tagsApplied)}\n      </Text>\n      <Text key=\"sys-tags-values\" style={styles.bold}>\n        {tags ? decodeURIComponent(tags) : intl.formatMessage(messages.noTags)}\n      </Text>\n      <Section key=\"systems\" title=\"Systems\">\n        {tablePage({ systems, intl })}\n      </Section>\n    </React.Fragment>\n  );\n};\n\nleadPage.propTypes = {\n  systems: PropTypes.object,\n  systemsTotal: PropTypes.number,\n  filters: PropTypes.object,\n  tags: PropTypes.array,\n  intl: PropTypes.any,\n};\n","import './_Export.scss';\n\nimport React, { useMemo, useState } from 'react';\nimport { leadPage, tablePage } from './SystemsPdfBuild';\n\nimport API from '../../Utilities/Api';\nimport { BASE_URL } from '../../AppConstants';\nimport { DownloadButton } from '@redhat-cloud-services/frontend-components-pdf-generator/dist/esm/index';\nimport PropTypes from 'prop-types';\nimport messages from '../../Messages';\nimport { useIntl } from 'react-intl';\nimport { useSelector } from 'react-redux';\nimport { workloadQueryBuilder } from '../Common/Tables';\n\nconst SystemsPdf = ({ filters }) => {\n  const intl = useIntl();\n  const [loading, setLoading] = useState(false);\n  const selectedTags = useSelector(\n    ({ AdvisorStore }) => AdvisorStore.selectedTags\n  );\n  const workloads = useSelector(({ AdvisorStore }) => AdvisorStore.workloads);\n  const SID = useSelector(({ AdvisorStore }) => AdvisorStore.SID);\n\n  const dataFetch = async () => {\n    setLoading(true);\n    let options = selectedTags.length && { tags: selectedTags };\n    workloads &&\n      (options = { ...options, ...workloadQueryBuilder(workloads, SID) });\n    const systems = (\n      await API.get(\n        `${BASE_URL}/export/systems/`,\n        {},\n        { ...filters, ...options }\n      )\n    ).data;\n\n    const firstPage = leadPage({\n      systemsTotal: systems?.length,\n      systems: systems.slice(0, 18),\n      filters,\n      tags: selectedTags,\n      intl,\n    });\n\n    const otherPages = systems\n      .slice(18, 982)\n      .reduce((resultArray, item, index) => {\n        const chunkIndex = Math.floor(index / 31);\n        !resultArray[chunkIndex] && (resultArray[chunkIndex] = []);\n        resultArray[chunkIndex].push(item);\n\n        return resultArray;\n      }, []);\n\n    setLoading(false);\n\n    return [\n      firstPage,\n      ...otherPages.map((pageSystems, index) =>\n        tablePage({ page: index, systems: pageSystems, intl })\n      ),\n    ];\n  };\n\n  return useMemo(() => {\n    return (\n      <DownloadButton\n        groupName={intl.formatMessage(messages.redHatInsights)}\n        allPagesHaveTitle={false}\n        label={\n          loading\n            ? intl.formatMessage(messages.loading)\n            : intl.formatMessage(messages.exportPdf)\n        }\n        asyncFunction={dataFetch}\n        buttonProps={{\n          variant: '',\n          component: 'button',\n          className: 'pf-c-dropdown__menu-item systemsPdfOverride',\n          ...(loading ? { isDisabled: true } : null),\n        }}\n        reportName={`${intl.formatMessage(messages.insightsHeader)}:`}\n        type={intl.formatMessage(messages.systems)}\n        fileName={`Advisor_systems--${new Date()\n          .toUTCString()\n          .replace(/ /g, '-')}.pdf`}\n        size={[841.89, 595.28]}\n      />\n    );\n  }, [loading]);\n};\n\nSystemsPdf.propTypes = {\n  filters: PropTypes.object,\n  systemsCount: PropTypes.number,\n};\n\nexport default SystemsPdf;\n","import './SystemsTable.scss';\n\nimport * as AppActions from '../../AppActions';\n\nimport {\n  DEBOUNCE_DELAY,\n  PERMS,\n  SYSTEM_FILTER_CATEGORIES as SFC,\n} from '../../AppConstants';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { TableVariant, sortable, wrappable } from '@patternfly/react-table';\nimport {\n  filterFetchBuilder,\n  paramParser,\n  pruneFilters,\n  urlBuilder,\n  workloadQueryBuilder,\n} from '../Common/Tables';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport Failed from '../Loading/Failed';\nimport { InventoryTable } from '@redhat-cloud-services/frontend-components/Inventory';\nimport Loading from '../Loading/Loading';\nimport SystemsPdf from '../Export/SystemsPdf';\nimport debounce from '../../Utilities/Debounce';\nimport downloadReport from '../Common/DownloadHelper';\nimport { getRegistry } from '@redhat-cloud-services/frontend-components-utilities/Registry';\nimport messages from '../../Messages';\nimport { systemReducer } from '../../AppReducer';\nimport { useIntl } from 'react-intl';\nimport { useLocation } from 'react-router-dom';\nimport { usePermissions } from '@redhat-cloud-services/frontend-components-utilities/RBACHook';\n\nconst SystemsTable = () => {\n  const intl = useIntl();\n  const dispatch = useDispatch();\n  const { search } = useLocation();\n\n  const systems = useSelector(({ AdvisorStore }) => AdvisorStore.systems);\n  const systemsFetchStatus = useSelector(\n    ({ AdvisorStore }) => AdvisorStore.systemsFetchStatus\n  );\n  const filters = useSelector(\n    ({ AdvisorStore }) => AdvisorStore.filtersSystems\n  );\n  const selectedTags = useSelector(\n    ({ AdvisorStore }) => AdvisorStore.selectedTags\n  );\n  const workloads = useSelector(({ AdvisorStore }) => AdvisorStore.workloads);\n  const SID = useSelector(({ AdvisorStore }) => AdvisorStore.SID);\n\n  const setFilters = (filters) =>\n    dispatch(AppActions.setFiltersSystems(filters));\n\n  const permsExport = usePermissions('advisor', PERMS.export).hasAccess;\n  const inventory = useRef(null);\n  const results = systems.meta ? systems.meta.count : 0;\n  const [searchText, setSearchText] = useState(filters.display_name || '');\n  const debouncedSearchText = debounce(searchText, DEBOUNCE_DELAY);\n  const [filterBuilding, setFilterBuilding] = useState(true);\n  const sortIndices = {\n    0: 'display_name',\n    2: 'hits',\n    3: 'critical_hits',\n    4: 'important_hits',\n    5: 'moderate_hits',\n    6: 'low_hits',\n    7: 'last_seen',\n  };\n\n  const columns = [\n    {\n      title: intl.formatMessage(messages.numberRuleHits),\n      transforms: [sortable, wrappable],\n      key: 'hits',\n    },\n    {\n      title: intl.formatMessage(messages.critical),\n      transforms: [sortable, wrappable],\n      key: 'critical_hits',\n    },\n    {\n      title: intl.formatMessage(messages.important),\n      transforms: [sortable, wrappable],\n      key: 'important_hits',\n    },\n    {\n      title: intl.formatMessage(messages.moderate),\n      transforms: [sortable, wrappable],\n      key: 'moderate_hits',\n    },\n    {\n      title: intl.formatMessage(messages.low),\n      transforms: [sortable, wrappable],\n      key: 'low_hits',\n    },\n  ];\n\n  const onSort = ({ index, direction }) => {\n    const orderParam = `${direction === 'asc' ? '' : '-'}${sortIndices[index]}`;\n    setFilters({ ...filters, sort: orderParam, offset: 0 });\n  };\n\n  const fetchSystemsFn = () => {\n    const fetchSystemsAction = (url) => dispatch(AppActions.fetchSystems(url));\n    urlBuilder(filters, selectedTags);\n    let options = selectedTags.length && { tags: selectedTags };\n    workloads &&\n      (options = { ...options, ...workloadQueryBuilder(workloads, SID) });\n\n    return fetchSystemsAction({ ...filterFetchBuilder(filters), ...options });\n  };\n\n  const removeFilterParam = (param) => {\n    const filter = { ...filters, offset: 0 };\n    param === 'text' && setSearchText('');\n    delete filter[param];\n    param === 'hits' && filter.hits === undefined && (filter.hits = ['yes']);\n    setFilters(filter);\n  };\n\n  const addFilterParam = (param, values) => {\n    // remove 'yes' from the hits filter if the user chooses any other filters (its always the first item)\n    param === 'hits' &&\n      values.length > 1 &&\n      values.includes('yes') &&\n      values.shift();\n    values.length > 0\n      ? setFilters({ ...filters, offset: 0, ...{ [param]: values } })\n      : removeFilterParam(param);\n  };\n\n  const filterConfigItems = [\n    {\n      label: intl.formatMessage(messages.name).toLowerCase(),\n      filterValues: {\n        key: 'text-filter',\n        onChange: (event, value) => setSearchText(value),\n        value: searchText,\n      },\n    },\n    {\n      label: SFC.hits.title.toLowerCase(),\n      type: SFC.hits.type,\n      id: SFC.hits.urlParam,\n      value: `checkbox-${SFC.hits.urlParam}`,\n      filterValues: {\n        key: `${SFC.hits.urlParam}-filter`,\n        onChange: (event, values) => addFilterParam(SFC.hits.urlParam, values),\n        value: filters.hits,\n        items: SFC.hits.values,\n      },\n    },\n  ];\n\n  const buildFilterChips = () => {\n    const localFilters = { ...filters };\n    localFilters.hits &&\n      localFilters.hits.includes('yes') &&\n      delete localFilters.hits;\n    delete localFilters.sort;\n    delete localFilters.offset;\n    delete localFilters.limit;\n\n    return pruneFilters(localFilters, SFC);\n  };\n\n  const activeFiltersConfig = {\n    deleteTitle: intl.formatMessage(messages.resetFilters),\n    filters: buildFilterChips(),\n    onDelete: (event, itemsToRemove, isAll) => {\n      if (isAll) {\n        setSearchText('');\n        setFilters({\n          sort: filters.sort,\n          limit: filters.limit,\n          offset: filters.offset,\n          hits: ['yes'],\n        });\n      } else {\n        itemsToRemove.map((item) => {\n          const newFilter = {\n            [item.urlParam]: Array.isArray(filters[item.urlParam])\n              ? filters[item.urlParam].filter(\n                  (value) => String(value) !== String(item.chips[0].value)\n                )\n              : '',\n          };\n          newFilter[item.urlParam].length > 0\n            ? setFilters({ ...filters, ...newFilter })\n            : removeFilterParam(item.urlParam);\n        });\n      }\n    },\n  };\n\n  // const handleRefresh = ({ page, per_page }) => {\n  //   if (systemsFetchStatus === 'fulfilled') {\n  //     const { offset, limit } = filters;\n  //     const newOffset = page * per_page - per_page;\n  //     if (newOffset !== offset || limit !== per_page) {\n  //       setFilters({\n  //         ...filters,\n  //         limit: per_page,\n  //         offset: page * per_page - per_page,\n  //       });\n  //     }\n  //   }\n  // };\n\n  const calculateSort = () => {\n    const sortIndex = Number(\n      Object.entries(sortIndices)?.find(\n        (item) => item[1] === filters.sort || `-${item[1]}` === filters.sort\n      )[0]\n    );\n    const sortDirection = filters.sort[0] === '-' ? 'desc' : 'asc';\n    return {\n      index: sortIndex,\n      key: sortIndex !== 7 ? sortIndices[sortIndex] : 'updated',\n      direction: sortDirection,\n    };\n  };\n\n  const createColumns = (defaultColumns) => {\n    let lastSeenColumn = defaultColumns.filter(({ key }) => key === 'updated');\n    let displayName = defaultColumns.filter(\n      ({ key }) => key === 'display_name'\n    );\n    let systemProfile = defaultColumns.filter(\n      ({ key }) => key === 'system_profile'\n    );\n\n    displayName = {\n      ...displayName[0],\n      transforms: [sortable, wrappable],\n      props: { isStatic: true },\n    };\n\n    lastSeenColumn = {\n      ...lastSeenColumn[0],\n      transforms: [sortable, wrappable],\n      props: { width: 20 },\n    };\n\n    systemProfile = {\n      ...systemProfile[0],\n      transforms: [wrappable],\n    };\n\n    return [displayName, systemProfile, ...columns, lastSeenColumn];\n  };\n\n  useEffect(() => {\n    filters.display_name === undefined\n      ? setSearchText('')\n      : setSearchText(filters.display_name);\n  }, [filters.display_name]);\n\n  useEffect(() => {\n    if (!filterBuilding && systemsFetchStatus !== 'pending') {\n      const copyFilters = { ...filters };\n      delete copyFilters.display_name;\n      setFilters({\n        ...copyFilters,\n        ...(searchText.length ? { display_name: searchText } : {}),\n        offset: 0,\n      });\n    }\n  }, [debouncedSearchText]);\n\n  useEffect(() => {\n    if (search && filterBuilding) {\n      const paramsObject = paramParser();\n      delete paramsObject.tags;\n\n      paramsObject.sort !== undefined &&\n        (paramsObject.sort = paramsObject.sort[0]);\n      paramsObject.display_name !== undefined &&\n        (paramsObject.display_name = paramsObject.display_name[0]);\n      paramsObject.hits === undefined && (paramsObject.hits = ['all']);\n      paramsObject.offset === undefined\n        ? (paramsObject.offset = 0)\n        : (paramsObject.offset = Number(paramsObject.offset[0]));\n      paramsObject.limit === undefined\n        ? (paramsObject.limit = 20)\n        : (paramsObject.limit = Number(paramsObject.limit[0]));\n      setFilters({ ...filters, ...paramsObject });\n    } else if (\n      filters.limit === undefined ||\n      filters.offset === undefined ||\n      filters.hits === undefined\n    ) {\n      setFilters({ ...filters, offset: 0, limit: 20, hits: ['all'] });\n    }\n\n    setFilterBuilding(false);\n    fetchSystemsFn();\n  }, []);\n\n  useEffect(() => {\n    if (systemsFetchStatus !== 'pending') {\n      fetchSystemsFn();\n    }\n  }, [filters, selectedTags, workloads, SID]);\n\n  const page = filters.offset / filters.limit + 1;\n  const sort = calculateSort();\n  return systemsFetchStatus !== 'failed' ? (\n    <InventoryTable\n      disableDefaultColumns\n      columns={(defaultColumns) => createColumns(defaultColumns)}\n      onLoad={({\n        mergeWithEntities,\n        INVENTORY_ACTION_TYPES,\n        mergeWithDetail,\n      }) => {\n        getRegistry().register({\n          ...mergeWithEntities(systemReducer(columns, INVENTORY_ACTION_TYPES), {\n            page: page || 1,\n            perPage: filters.limit || 20,\n            ...sort,\n          }),\n          ...mergeWithDetail(),\n        });\n      }}\n      // getEntities={(_items, { per_page, itemsPage }) => {\n      //   handleRefresh({ page: itemsPage, per_page });\n      //   return Promise.resolve({\n      //     results: systems?.data?.map((system) => ({\n      //       ...system,\n      //       id: system.system_uuid,\n      //     })),\n      //     total: results,\n      //   });\n      // }}\n      tableProps={{\n        isStickyHeader: true,\n        variant: TableVariant.compact,\n      }}\n      ref={inventory}\n      items={((systemsFetchStatus !== 'pending' && systems?.data) || []).map(\n        (system) => ({\n          ...system,\n          id: system.system_uuid,\n        })\n      )}\n      isFullView\n      sortBy={sort}\n      onSort={onSort}\n      hasCheckbox={false}\n      page={page}\n      total={results}\n      isLoaded={systemsFetchStatus === 'fulfilled'}\n      perPage={Number(filters.limit)}\n      filterConfig={{ items: filterConfigItems }}\n      activeFiltersConfig={activeFiltersConfig}\n      exportConfig={{\n        onSelect: (_e, fileType) =>\n          downloadReport(\n            'systems',\n            fileType,\n            filters,\n            selectedTags,\n            workloads,\n            SID\n          ),\n        extraItems: [\n          <li key=\"download-pd\" role=\"menuitem\">\n            <SystemsPdf filters={{ ...filterFetchBuilder(filters) }} />\n          </li>,\n        ],\n        isDisabled: !permsExport,\n        tooltipText: permsExport\n          ? intl.formatMessage(messages.exportData)\n          : intl.formatMessage(messages.permsAction),\n      }}\n      fallback={Loading}\n    />\n  ) : (\n    systemsFetchStatus === 'failed' && (\n      <Failed message={intl.formatMessage(messages.systemTableFetchError)} />\n    )\n  );\n};\n\nexport default SystemsTable;\n"],"sourceRoot":""}