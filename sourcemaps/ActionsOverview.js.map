{"version":3,"sources":["webpack:///./src/SmartComponents/Actions/ActionsOverview.js"],"names":["SummaryChart","asyncComponent","__webpack_require__","e","then","bind","SummaryChartItem","ConditionalLink","ActionsOverviewDonut","ActionsOverview","props","_this","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default","this","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default","call","state","severity","total","category","sevNames","fetchStats","setBreadcrumbs","title","navigate","prevProps","stats","rules","setState","Info","Warn","Error","Critical","Availability","Security","Stability","Performance","_this2","statsFetchStatus","SummaryChartItems","map","value","key","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","condition","wrap","children","react_router_dom__WEBPACK_IMPORTED_MODULE_7__","to","concat","toLowerCase","name","numIssues","totalIssues","Fragment","_red_hat_insights_insights_frontend_components__WEBPACK_IMPORTED_MODULE_16__","_patternfly_react_core__WEBPACK_IMPORTED_MODULE_11__","gutter","xl","sm","_patternfly_react_core__WEBPACK_IMPORTED_MODULE_12__","_patternfly_react_core__WEBPACK_IMPORTED_MODULE_13__","className","_patternfly_react_core__WEBPACK_IMPORTED_MODULE_14__","_patternfly_react_core__WEBPACK_IMPORTED_MODULE_15__","_PresentationalComponents_Loading_Loading__WEBPACK_IMPORTED_MODULE_18__","Component","propTypes","breadcrumbs","PropTypes","array","func","string","object","routerParams","connect","ownProps","_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_0___default","AdvisorStore","dispatch","url","AppActions","obj"],"mappings":"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","file":"js/ActionsOverview.js","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport asyncComponent from '../../Utilities/asyncComponent';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Card, CardBody, CardHeader, Grid, GridItem } from '@patternfly/react-core';\nimport { Main, PageHeader, PageHeaderTitle, routerParams } from '@red-hat-insights/insights-frontend-components';\n\nimport * as AppActions from '../../AppActions';\nimport Loading from '../../PresentationalComponents/Loading/Loading';\nimport '../../App.scss';\n\nconst SummaryChart = asyncComponent(() => import('../../PresentationalComponents/SummaryChart/SummaryChart'));\nconst SummaryChartItem = asyncComponent(() => import('../../PresentationalComponents/SummaryChartItem/SummaryChartItem'));\nconst ConditionalLink = asyncComponent(() => import('../../PresentationalComponents/ConditionalLink/ConditionalLink'));\nconst ActionsOverviewDonut = asyncComponent(() => import('../../PresentationalComponents/Charts/ActionsOverviewDonut'));\n\nclass ActionsOverview extends Component {\n    constructor (props) {\n        super(props);\n        this.state = {\n            severity: [],\n            total: 0,\n            category: [],\n            sevNames: [ 'Low', 'Medium', 'High', 'Critical' ]\n        };\n    }\n\n    componentDidMount () {\n        this.props.fetchStats();\n        this.props.setBreadcrumbs([{ title: 'Actions', navigate: '/actions' }]);\n    }\n\n    componentDidUpdate (prevProps) {\n        if (this.props.stats !== prevProps.stats) {\n            const rules = this.props.stats.rules;\n            this.setState({ severity: [ rules.severity.Info, rules.severity.Warn, rules.severity.Error, rules.severity.Critical ]});\n            this.setState({\n                category: [ rules.category.Availability, rules.category.Security, rules.category.Stability, rules.category.Performance ]\n            });\n            this.setState({ total: rules.total });\n        }\n    }\n\n    render () {\n        const {\n            statsFetchStatus\n        } = this.props;\n\n        const SummaryChartItems = this.state.severity.map((value, key) =>\n            <ConditionalLink\n                key={ key }\n                condition={ value }\n                wrap={ children =>\n                    <Link to={ `/actions/${this.state.sevNames[key].toLowerCase()}-risk` }>\n                        { children }\n                    </Link>\n                }>\n                <SummaryChartItem\n                    name={ this.state.sevNames[key] }\n                    numIssues={ value }\n                    totalIssues={ this.state.total }/>\n            </ConditionalLink>\n        );\n\n        return (\n            <React.Fragment>\n                <PageHeader>\n                    <PageHeaderTitle title='Actions'/>\n                </PageHeader>\n                <Main>\n                    <Grid gutter='md' xl={ 4 } sm={ 6 }>\n                        <GridItem>\n                            <Card className='pf-t-light  pf-m-opaque-100'>\n                                <CardHeader>Category Summary</CardHeader>\n                                <CardBody>\n                                    { statsFetchStatus === 'fulfilled' && (\n                                        <ActionsOverviewDonut category={ this.state.category }/>\n                                    ) }\n                                    { statsFetchStatus === 'pending' && (<Loading/>) }\n                                </CardBody>\n                            </Card>\n                        </GridItem>\n                        <GridItem>\n                            <Card className='pf-t-light  pf-m-opaque-100'>\n                                <CardHeader>Risk Summary</CardHeader>\n                                <CardBody>\n                                    { statsFetchStatus === 'fulfilled' && (\n                                        <SummaryChart>\n                                            { SummaryChartItems }\n                                        </SummaryChart>\n                                    ) }\n                                    { statsFetchStatus === 'pending' && (<Loading/>) }\n                                </CardBody>\n                            </Card>\n                        </GridItem>\n                    </Grid>\n                </Main>\n            </React.Fragment>\n        );\n    }\n}\n\nActionsOverview.propTypes = {\n    breadcrumbs: PropTypes.array,\n    fetchStats: PropTypes.func,\n    setBreadcrumbs: PropTypes.func,\n    statsFetchStatus: PropTypes.string,\n    stats: PropTypes.object\n};\n\nconst mapStateToProps = (state, ownProps) => ({\n    breadcrumbs: state.AdvisorStore.breadcrumbs,\n    stats: state.AdvisorStore.stats,\n    statsFetchStatus: state.AdvisorStore.statsFetchStatus,\n    ...ownProps\n});\n\nconst mapDispatchToProps = dispatch => ({\n    fetchStats: (url) => dispatch(AppActions.fetchStats(url)),\n    setBreadcrumbs: (obj) => dispatch(AppActions.setBreadcrumbs(obj))\n});\n\nexport default routerParams(connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(ActionsOverview));\n"],"sourceRoot":""}