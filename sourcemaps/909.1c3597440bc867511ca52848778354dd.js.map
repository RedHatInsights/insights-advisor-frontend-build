{"version":3,"file":"js/909.5304c8daf612afab3daf.js","mappings":"+8BA2BA,IAAMA,EAAY,SAAC,GAQb,UAkIIC,EA6LiB,EAtUzBC,EAOI,EAPJA,WACAC,EAMI,EANJA,KACAC,EAKI,EALJA,eACAC,EAII,EAJJA,QACAC,EAGI,EAHJA,aACAC,EAEI,EAFJA,UACAC,EACI,EADJA,IAEMC,GAAQC,EAAAA,EAAAA,YACRC,GAAOC,EAAAA,EAAAA,KACPC,GAAWC,EAAAA,EAAAA,eACjB,GAAgCC,EAAAA,EAAAA,UAAS,IAAzC,eAAOC,EAAP,KAAiBC,EAAjB,KACA,GAA8BF,EAAAA,EAAAA,UAAS,CACrCG,MAAO,GACPC,OAAQ,EACRC,KAAM,aACNC,KAAM,KAJR,eAAOC,EAAP,KAAgBC,EAAhB,KAMMC,GAAWC,EAAAA,EAAAA,cAAY,qBAAGD,UAA2B,MACrDE,EAAe,SAACC,EAAIX,GAAL,OACnBH,EAAS,CAAEe,KAAM,gBAAiBC,QAAS,CAAEF,GAAAA,EAAIX,SAAAA,MAC7Cc,EAAkB,SAACC,GAAD,OAAUlB,GAASmB,EAAAA,EAAAA,IAAaD,KACxD,GAAwDhB,EAAAA,EAAAA,WAAS,GAAjE,eAAOkB,EAAP,KAA6BC,EAA7B,KACA,GAAoCnB,EAAAA,EAAAA,YAApC,gBAAOoB,GAAP,MAAmBC,GAAnB,MA0BMC,GAAoB,SAACJ,GACzBC,EAAwBD,IAGpBK,GAAe,WACnBF,IAAc,GACdV,EAAa,GAAG,IAGZa,GAAyB,wBAC7BJ,GACIC,IAAc,GACdnB,EACEO,MAAAA,GADS,UACTA,EAAUgB,YADD,aACT,EACIC,QAAO,SAACC,GAAD,OAAgC,IAApBA,EAAO1B,YAC3B2B,KAAI,SAACD,GAAD,OAAYA,EAAOf,QAgC5BiB,GAAgB,SAACC,GACrB,IAAQxB,EAAuBwB,EAAvBxB,KAAMyB,EAAiBD,EAAjBC,aACRC,EAAmB,EAAH,OACjBF,GACCxB,GAAQ,CACVA,KAAAA,IAEEyB,GAAgB,CAClBA,aAAAA,KAGJE,EAAAA,EAAAA,IAAWD,EAAkBzC,IAEzB2C,GAAoB,SAACC,GACzB,IAAMT,EAAS,EAAH,KAAQnB,GAAR,IAAiBH,OAAQ,WAC9BsB,EAAOS,GACd3B,EAAWkB,IAOPU,GAAoB,CACxB,CACEC,MAAOC,EAAAA,GAAAA,aAAAA,MAAAA,cACPzB,KAAMyB,EAAAA,GAAAA,aAAAA,KACN1B,GAAI0B,EAAAA,GAAAA,aAAAA,SACJC,MAAO,YAAF,OAAcD,EAAAA,GAAAA,aAAAA,UACnBE,aAAc,CACZC,IAAK,GAAF,OAAKH,EAAAA,GAAAA,aAAAA,SAAL,WACHI,SAAU,SAACC,EAAIC,IAbE,SAACT,EAAOS,GAC7BA,EAAOC,OAAS,EACZrC,EAAW,EAAD,KAAMD,GAAN,IAAeH,OAAQ,IAAvB,UAAgC+B,EAAQS,KAClDV,GAAkBC,GAWhBW,CAAeR,EAAAA,GAAAA,aAAAA,SAA2BM,IAE5CL,MAAOhC,EAAQwC,aACfC,MAAOV,EAAAA,GAAAA,aAAAA,UAcPW,GAAsB,CAC1BC,YAAatD,EAAKuD,cAAcC,EAAAA,EAAAA,cAChC7C,SAVMrB,EAAe,EAAH,GAAQqB,UACnBrB,EAAamB,YACbnB,EAAakB,cACblB,EAAaiB,OAEbkD,EAAAA,EAAAA,IAAanE,EAAcoD,EAAAA,KAMlCgB,SAAU,SAACX,EAAIY,EAAeC,GACxBA,EACFhD,EAAW,CACTH,KAAME,EAAQF,KACdF,MAAOI,EAAQJ,MACfC,OAAQG,EAAQH,SAGlBmD,EAAc3B,KAAI,SAAC6B,GACjB,IAAMC,GAAY,UACfD,EAAKE,SAAWC,MAAMC,QAAQtD,EAAQkD,EAAKE,WACxCpD,EAAQkD,EAAKE,UAAUjC,QACrB,SAACa,GAAD,OAAWuB,OAAOvB,KAAWuB,OAAOL,EAAKM,MAAM,GAAGxB,UAEpD,IAENmB,EAAUD,EAAKE,UAAUd,OAAS,EAC9BrC,EAAW,EAAD,KAAMD,GAAYmD,IAC5BxB,GAAkBuB,EAAKE,eAWnC,OALAK,EAAAA,EAAAA,YAAU,WAAM,OACdvD,MAAAA,GAAA,UAAAA,EAAUgB,YAAV,eAAgBoB,SAAUrB,GAAuBf,EAASgB,QAEzD,CAAChB,MAAAA,OAAD,EAACA,EAAUgB,OAGZ,kBAAC,aAAD,KACGP,GACC,kBAAC,IAAD,CACEI,kBAAmBA,GACnB2C,YAAa/C,EACb9B,KAAMA,EACN8E,QAAS7E,EACT8E,MAAOlE,IAGX,kBAAC,IAAD,CACEmE,aAAW,EACXC,gBAAc,EACdC,aAAW,EACXC,YAAa,CAAEC,KAAK,EAAMlE,MAAM,GAChCmE,aAAc,CAAEzB,MAAOZ,IACvBa,oBAAqBA,GACrByB,QAAS,SAACC,GAAD,OAhIO,SAACA,GACrB,IAAIC,EAAiBD,EAAejD,QAAO,kBAAqB,YAArB,EAAGe,OAC1CoC,EAAcF,EAAejD,QAC/B,kBAAqB,iBAArB,EAAGe,OAEDqC,EAAgBH,EAAejD,QACjC,kBAAqB,mBAArB,EAAGe,OAoBL,OAjBAoC,EAAc,EAAH,KACNA,EAAY,IADN,IAETE,WAAY,CAACC,EAAAA,SAAUC,EAAAA,WACvBC,MAAO,CAAEC,UAAU,KAGrBP,EAAiB,EAAH,KACTA,EAAe,IADN,IAEZG,WAAY,CAACC,EAAAA,SAAUC,EAAAA,WACvBC,MAAO,CAAEE,MAAO,MAQX,CAACP,EALRC,EAAgB,EAAH,KACRA,EAAc,IADN,IAEXC,WAAY,CAACE,EAAAA,aAGqBL,GAsGHS,CAAcV,IAC3CxF,WAAU,GACRmG,QAASC,EAAAA,aAAAA,SACNpG,GAELqG,cAAe,CACbC,eAAgBlF,EAChBhB,aAAAA,EACAC,UAAAA,EACAC,IAAAA,GAEFiG,YAAW,mCAAE,WAAOC,EAAQC,EAAQC,EAAUC,GAAjC,0GAETC,EAQEH,EARFG,SACAC,EAOEJ,EAPFI,KACAC,EAMEL,EANFK,QACAC,EAKEN,EALFM,eACAT,EAIEG,EAJFH,eACAlG,EAGEqG,EAHFrG,aACAC,EAEEoG,EAFFpG,UACAC,EACEmG,EADFnG,IAEIY,EAXK,UAWwB,QAAnB6F,EAA2B,GAAK,KAXrC,OAYG,YAAZD,EAAwB,YAAcA,GAEpCnE,EAdO,aAeN2D,GAfM,IAgBTtF,MAAO4F,EACP3F,OAAQ4F,EAAOD,EAAWA,EAC1B1F,KAAAA,GACIuF,EAAOrF,QAAQ4F,eAChB7G,GAAW,CACVgB,KAAMsF,MAAAA,GAAF,UAAEA,EAAQrF,eAAV,aAAE,EAAiB4F,eAEvBP,EAAOrF,QAAQ4F,cACjB7G,GAAW,CACTyC,aAAc6D,MAAAA,GAAF,UAAEA,EAAQrF,eAAV,aAAE,EAAiB4F,eAE/B5G,EAAasD,QAAU,CAAEuD,KAAM7G,IAC/BqE,MAAMC,QAAQ4B,EAAe1C,eAAiB,CAChDA,aAAY,UAAE0C,EAAe1C,oBAAjB,aAAE,EAA6BsD,KAAK,OAIpD7G,IACGsC,EAAU,EAAH,KAAQA,IAAYwE,EAAAA,EAAAA,IAAqB9G,EAAWC,KAE9DoC,GAAcC,IAESxC,EAtCZ,kCAuCAiH,EAAAA,EAAAA,IAAI,GAAD,OAAIC,EAAAA,IAAqB,GAAzB,OAAkC1E,GAAlC,IAA2CxC,QAAAA,KAvC9C,0JAuCP,EACI0B,KAxCG,4DA0CCuF,EAAAA,EAAAA,IAAI,GAAD,OACJE,EAAAA,IADI,OACcC,UACnBtH,EAAKuH,SAFA,oBAIP,GACA7E,GA/CG,2JAyCP,EAQGd,KAjDI,iCAsCL4F,EAtCK,eAmDWd,EACpBc,EAAe5F,KAAKY,KAAI,SAACiF,GAAD,OAAYA,EAAOC,eAC3C,CACEd,KAAAA,EACAD,SAAAA,EACAgB,UAAU,EACVC,OAAQ,CAAEC,eAAgB,CAAC,sBAE7BpB,GA3DS,eAmDLqB,EAnDK,yBA8DJC,QAAQC,QAAQ,CACrBF,SAASG,EAAAA,EAAAA,IACPT,EAAe5F,KACfkG,EAAQA,SAEVI,MAAOV,EAAeW,KAAKC,SAnElB,4CAAF,4DAsEXC,gBACE,kBAAC,IAAD,CACEhF,IAAI,qBACJiF,WACsB,IAApBzH,EAAS4C,QAAyC,KAAzBzD,MAAAA,OAAA,EAAAA,EAAMuI,kBAAwB,EAEzDC,aAjQsB,iBAAO,CACrCC,OAAQ,CACN,CACEjH,GAAI,WAAF,OAAaxB,EAAKuH,SACpBmB,YAAa1I,EAAK0I,cAGtBC,QAAS9H,IA2PD+H,qBAAsB,SAACC,GAAD,OAxPH,SAACA,GAC5BtH,GAAc,GAAG,GACjB,IACEsH,EAAOC,aAAenH,EAAgBkH,EAAOE,mBAC7C,MAAOC,GACPrH,EAAgB,CACduE,QAAS,SACT+C,aAAa,EACbC,MAAO1I,EAAKuD,cAAcC,EAAAA,EAAAA,OAC1B0E,YAAa,GAAF,OAAKM,MA+OsBJ,CAAqBC,KAEvD,kBAAC,KAAD,CAAiBM,KAAK,KAAKC,UAAU,8BARvC,IASS5I,EAAKuD,cAAcC,EAAAA,EAAAA,YAG9BqF,cAAe,CACbC,QAAS,CACP,GACA,CACErG,MAAOzC,EAAKuD,cAAcC,EAAAA,EAAAA,uBAC1B8B,MAAO,CAAEwC,WAAYpI,GAA+B,IAApBW,EAAS4C,QACzC8F,QAAS,kBAAMrH,IAAkB,OAIvCF,WAAY,CACVoG,MAAOvH,EAAS4C,OAChBG,MAAO,CACL,CACEsF,MAAO1I,EAAKuD,cAAcC,EAAAA,EAAAA,YAC1BuF,QAAS,WACPhI,GAAc,GAAG,KAJhB,MAQCF,MAAAA,GAAA,UAAAA,EAAUgB,YAAV,eAAgBoB,QAAStC,EAAQJ,MACjC,CACEmI,MAAO1I,EAAKuD,cAAcC,EAAAA,EAAAA,WAAqB,CAC7CJ,MAAOzC,EAAQJ,QAEjBwI,QAAS,WACPhI,EAAa,GAAG,KAGpB,IAjBD,MAoBCF,MAAAA,GAAA,UAAAA,EAAUgB,YAAV,eAAgBoB,QAAS,EACzB,CACEyF,MAAO1I,EAAKuD,cAAcC,EAAAA,EAAAA,UAAoB,CAC5CJ,OAAOvC,MAAAA,OAAA,EAAAA,EAAU6G,QAAS,IAE5BqB,SAAO,oBAAE,kGACYrJ,EADZ,kCAGKiH,EAAAA,EAAAA,IAAI,GAAD,OAAIC,EAAAA,IAAqB,GAAI,CAAElH,QAAAA,IAHvC,kKAEH,EAEG0B,YAJA,iBAEH,EAESA,YAJN,aAEH,EAEeY,KAAI,SAACiF,GAAD,OAAYA,EAAOC,eAJnC,4DAMKP,EAAAA,EAAAA,IAAI,GAAD,OACJE,EAAAA,IADI,OACcC,UACnBtH,EAAKuH,SAFA,aAIP,GACA,CAAErG,KAAMC,EAAQD,OAXjB,qKAKH,EAQGU,YAbA,aAKH,EAQS4H,SAbN,0BACDC,EADC,KAcP3I,EAAY2I,GACZtH,KAfO,4CAAF,6CAkBT,KAGRuH,SACG7I,EAAS4C,UAAWpC,MAAAA,GAApB,UAAoBA,EAAUgB,YAA9B,aAAoB,EAAgBoB,SACnC5C,EAAS4C,UAAWpC,MAAAA,OAApB,EAAoBA,EAAU6G,UAChC7G,MAAAA,OAAA,EAAAA,EAAU6G,OAAQ,EACd,EACArH,EAAS4C,SAAWtC,EAAQJ,MAC5B,KACA,EACN4I,SAAU,WACR9I,EAAS4C,OAAS,EAAIlC,GAAc,GAAG,GAASY,KAChDC,OAGJwH,SAAUC,EAAAA,EACVC,OAAQ,YAIF,IAHJC,EAGI,EAHJA,kBACAC,EAEI,EAFJA,uBACAC,EACI,EADJA,gBAEA3J,EAAM4J,gBACJC,EAAAA,EAAAA,GAAe,EAAD,KACTJ,GAAkBK,EAAAA,EAAAA,GAAc,GAAIJ,GAAyB,CAC9DpD,KAAMyD,OAAOlJ,EAAQH,OAASG,EAAQJ,MAAQ,GAAK,GACnDuJ,QAASD,OAAOlJ,EAAQJ,OAAS,OAEhCkJ,YASjBpK,EAAU0K,UAAY,CACpBxK,WAAYyK,IAAAA,IACZxK,KAAMwK,IAAAA,OACNvK,eAAgBuK,IAAAA,KAChBtK,QAASsK,IAAAA,OACTrK,aAAcqK,IAAAA,IACdpK,UAAWoK,IAAAA,IACXnK,IAAKmK,IAAAA,KAGP","sources":["webpack:///./src/PresentationalComponents/Inventory/Inventory.js"],"sourcesContent":["import './_Inventory.scss';\n\nimport { RULES_FETCH_URL, SYSTEMS_FETCH_URL } from '../../AppConstants';\nimport React, { useEffect, useState } from 'react';\nimport { TableVariant, sortable, wrappable } from '@patternfly/react-table';\nimport {\n  pruneFilters,\n  urlBuilder,\n  workloadQueryBuilder,\n} from '../Common/Tables';\nimport { useDispatch, useSelector, useStore } from 'react-redux';\n\nimport AnsibeTowerIcon from '@patternfly/react-icons/dist/js/icons/ansibeTower-icon';\nimport DisableRule from '../../PresentationalComponents/Modals/DisableRule';\nimport { Get } from '../../Utilities/Api';\nimport { InventoryTable } from '@redhat-cloud-services/frontend-components/Inventory';\nimport Loading from '../Loading/Loading';\nimport PropTypes from 'prop-types';\nimport RemediationButton from '@redhat-cloud-services/frontend-components-remediations/RemediationButton';\nimport { SYSTEM_FILTER_CATEGORIES as SFC } from '../../AppConstants';\nimport { mergeArraysByDiffKeys } from '../Common/Tables';\nimport messages from '../../Messages';\nimport { addNotification as notification } from '@redhat-cloud-services/frontend-components-notifications/';\nimport { systemReducer } from '../../Store/AppReducer';\nimport { updateReducers } from '../../Store';\nimport { useIntl } from 'react-intl';\n\nconst Inventory = ({\n  tableProps,\n  rule,\n  afterDisableFn,\n  pathway,\n  selectedTags,\n  workloads,\n  SID,\n}) => {\n  const store = useStore();\n  const intl = useIntl();\n  const dispatch = useDispatch();\n  const [selected, setSelected] = useState([]);\n  const [filters, setFilters] = useState({\n    limit: 20,\n    offset: 0,\n    sort: '-last_seen',\n    name: '',\n  });\n  const entities = useSelector(({ entities }) => entities || {});\n  const onSelectRows = (id, selected) =>\n    dispatch({ type: 'SELECT_ENTITY', payload: { id, selected } });\n  const addNotification = (data) => dispatch(notification(data));\n  const [disableRuleModalOpen, setDisableRuleModalOpen] = useState(false);\n  const [bulkSelect, setBulkSelect] = useState();\n\n  const remediationDataProvider = () => ({\n    issues: [\n      {\n        id: `advisor:${rule.rule_id}`,\n        description: rule.description,\n      },\n    ],\n    systems: selected,\n  });\n\n  const onRemediationCreated = (result) => {\n    onSelectRows(-1, false);\n    try {\n      result.remediation && addNotification(result.getNotification());\n    } catch (error) {\n      addNotification({\n        variant: 'danger',\n        dismissable: true,\n        title: intl.formatMessage(messages.error),\n        description: `${error}`,\n      });\n    }\n  };\n\n  const handleModalToggle = (disableRuleModalOpen) => {\n    setDisableRuleModalOpen(disableRuleModalOpen);\n  };\n\n  const bulkSelectfn = () => {\n    setBulkSelect(true);\n    onSelectRows(0, true);\n  };\n\n  const calculateSelectedItems = () =>\n    bulkSelect\n      ? setBulkSelect(false)\n      : setSelected(\n          entities?.rows\n            ?.filter((entity) => entity.selected === true)\n            .map((entity) => entity.id)\n        );\n\n  const createColumns = (defaultColumns) => {\n    let lastSeenColumn = defaultColumns.filter(({ key }) => key === 'updated');\n    let displayName = defaultColumns.filter(\n      ({ key }) => key === 'display_name'\n    );\n    let systemProfile = defaultColumns.filter(\n      ({ key }) => key === 'system_profile'\n    );\n\n    displayName = {\n      ...displayName[0],\n      transforms: [sortable, wrappable],\n      props: { isStatic: true },\n    };\n\n    lastSeenColumn = {\n      ...lastSeenColumn[0],\n      transforms: [sortable, wrappable],\n      props: { width: 20 },\n    };\n\n    systemProfile = {\n      ...systemProfile[0],\n      transforms: [wrappable],\n    };\n\n    return [displayName, systemProfile, lastSeenColumn];\n  };\n\n  const handleRefresh = (options) => {\n    const { name, display_name } = options;\n    const refreshedFilters = {\n      ...options,\n      ...(name && {\n        name,\n      }),\n      ...(display_name && {\n        display_name,\n      }),\n    };\n    urlBuilder(refreshedFilters, selectedTags);\n  };\n  const removeFilterParam = (param) => {\n    const filter = { ...filters, offset: 0 };\n    delete filter[param];\n    setFilters(filter);\n  };\n  const addFilterParam = (param, values) => {\n    values.length > 0\n      ? setFilters({ ...filters, offset: 0, ...{ [param]: values } })\n      : removeFilterParam(param);\n  };\n  const filterConfigItems = [\n    {\n      label: SFC.rhel_version.title.toLowerCase(),\n      type: SFC.rhel_version.type,\n      id: SFC.rhel_version.urlParam,\n      value: `checkbox-${SFC.rhel_version.urlParam}`,\n      filterValues: {\n        key: `${SFC.rhel_version.urlParam}-filter`,\n        onChange: (_e, values) => {\n          addFilterParam(SFC.rhel_version.urlParam, values);\n        },\n        value: filters.rhel_version,\n        items: SFC.rhel_version.values,\n      },\n    },\n  ];\n\n  const buildFilterChips = () => {\n    const localFilters = { ...filters };\n    delete localFilters.sort;\n    delete localFilters.offset;\n    delete localFilters.limit;\n\n    return pruneFilters(localFilters, SFC);\n  };\n\n  const activeFiltersConfig = {\n    deleteTitle: intl.formatMessage(messages.resetFilters),\n    filters: buildFilterChips(),\n    onDelete: (_e, itemsToRemove, isAll) => {\n      if (isAll) {\n        setFilters({\n          sort: filters.sort,\n          limit: filters.limit,\n          offset: filters.offset,\n        });\n      } else {\n        itemsToRemove.map((item) => {\n          const newFilter = {\n            [item.urlParam]: Array.isArray(filters[item.urlParam])\n              ? filters[item.urlParam].filter(\n                  (value) => String(value) !== String(item.chips[0].value)\n                )\n              : '',\n          };\n          newFilter[item.urlParam].length > 0\n            ? setFilters({ ...filters, ...newFilter })\n            : removeFilterParam(item.urlParam);\n        });\n      }\n    },\n  };\n\n  useEffect(() => {\n    entities?.rows?.length && calculateSelectedItems(entities.rows);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [entities?.rows]);\n\n  return (\n    <React.Fragment>\n      {disableRuleModalOpen && (\n        <DisableRule\n          handleModalToggle={handleModalToggle}\n          isModalOpen={disableRuleModalOpen}\n          rule={rule}\n          afterFn={afterDisableFn}\n          hosts={selected}\n        />\n      )}\n      <InventoryTable\n        hasCheckbox\n        initialLoading\n        autoRefresh\n        hideFilters={{ all: true, name: false }}\n        filterConfig={{ items: filterConfigItems }}\n        activeFiltersConfig={activeFiltersConfig}\n        columns={(defaultColumns) => createColumns(defaultColumns)}\n        tableProps={{\n          variant: TableVariant.compact,\n          ...tableProps,\n        }}\n        customFilters={{\n          advisorFilters: filters,\n          selectedTags,\n          workloads,\n          SID,\n        }}\n        getEntities={async (_items, config, showTags, defaultGetEntities) => {\n          const {\n            per_page,\n            page,\n            orderBy,\n            orderDirection,\n            advisorFilters,\n            selectedTags,\n            workloads,\n            SID,\n          } = config;\n          const sort = `${orderDirection === 'ASC' ? '' : '-'}${\n            orderBy === 'updated' ? 'last_seen' : orderBy\n          }`;\n          let options = {\n            ...advisorFilters,\n            limit: per_page,\n            offset: page * per_page - per_page,\n            sort,\n            ...(config.filters.hostnameOrId &&\n              !pathway && {\n                name: config?.filters?.hostnameOrId,\n              }),\n            ...(config.filters.hostnameOrId &&\n              pathway && {\n                display_name: config?.filters?.hostnameOrId,\n              }),\n            ...(selectedTags.length && { tags: selectedTags }),\n            ...(Array.isArray(advisorFilters.rhel_version) && {\n              rhel_version: advisorFilters.rhel_version?.join(','),\n            }),\n          };\n\n          workloads &&\n            (options = { ...options, ...workloadQueryBuilder(workloads, SID) });\n\n          handleRefresh(options);\n\n          const fetchedSystems = pathway\n            ? (await Get(`${SYSTEMS_FETCH_URL}`, {}, { ...options, pathway }))\n                ?.data\n            : (\n                await Get(\n                  `${RULES_FETCH_URL}${encodeURI(\n                    rule.rule_id\n                  )}/systems_detail/`,\n                  {},\n                  options\n                )\n              )?.data;\n\n          const results = await defaultGetEntities(\n            fetchedSystems.data.map((system) => system.system_uuid),\n            {\n              page,\n              per_page,\n              hasItems: true,\n              fields: { system_profile: ['operating_system'] },\n            },\n            showTags\n          );\n\n          return Promise.resolve({\n            results: mergeArraysByDiffKeys(\n              fetchedSystems.data,\n              results.results\n            ),\n            total: fetchedSystems.meta.count,\n          });\n        }}\n        dedicatedAction={\n          <RemediationButton\n            key=\"remediation-button\"\n            isDisabled={\n              selected.length === 0 || rule?.playbook_count === 0 || true\n            }\n            dataProvider={remediationDataProvider}\n            onRemediationCreated={(result) => onRemediationCreated(result)}\n          >\n            <AnsibeTowerIcon size=\"sm\" className=\"ins-c-background__default\" />\n            &nbsp;{intl.formatMessage(messages.remediate)}\n          </RemediationButton>\n        }\n        actionsConfig={{\n          actions: [\n            '',\n            {\n              label: intl.formatMessage(messages.disableRuleForSystems),\n              props: { isDisabled: pathway || selected.length === 0 },\n              onClick: () => handleModalToggle(true),\n            },\n          ],\n        }}\n        bulkSelect={{\n          count: selected.length,\n          items: [\n            {\n              title: intl.formatMessage(messages.selectNone),\n              onClick: () => {\n                onSelectRows(-1, false);\n              },\n            },\n            {\n              ...(entities?.rows?.length > filters.limit\n                ? {\n                    title: intl.formatMessage(messages.selectPage, {\n                      items: filters.limit,\n                    }),\n                    onClick: () => {\n                      onSelectRows(0, true);\n                    },\n                  }\n                : {}),\n            },\n            {\n              ...(entities?.rows?.length > 0\n                ? {\n                    title: intl.formatMessage(messages.selectAll, {\n                      items: entities?.total || 0,\n                    }),\n                    onClick: async () => {\n                      const allSystems = pathway\n                        ? (\n                            await Get(`${SYSTEMS_FETCH_URL}`, {}, { pathway })\n                          )?.data?.data?.map((system) => system.system_uuid)\n                        : (\n                            await Get(\n                              `${RULES_FETCH_URL}${encodeURI(\n                                rule.rule_id\n                              )}/systems/`,\n                              {},\n                              { name: filters.name }\n                            )\n                          )?.data?.host_ids;\n                      setSelected(allSystems);\n                      bulkSelectfn();\n                    },\n                  }\n                : {}),\n            },\n          ],\n          checked:\n            (selected.length === entities?.rows?.length ||\n              selected.length === entities?.total) &&\n            entities?.total > 0\n              ? 1\n              : selected.length === filters.limit\n              ? null\n              : 0,\n          onSelect: () => {\n            selected.length > 0 ? onSelectRows(-1, false) : bulkSelectfn();\n            calculateSelectedItems();\n          },\n        }}\n        fallback={Loading}\n        onLoad={({\n          mergeWithEntities,\n          INVENTORY_ACTION_TYPES,\n          mergeWithDetail,\n        }) => {\n          store.replaceReducer(\n            updateReducers({\n              ...mergeWithEntities(systemReducer([], INVENTORY_ACTION_TYPES), {\n                page: Number(filters.offset / filters.limit + 1 || 1),\n                perPage: Number(filters.limit || 20),\n              }),\n              ...mergeWithDetail(),\n            })\n          );\n        }}\n      />\n    </React.Fragment>\n  );\n};\n\nInventory.propTypes = {\n  tableProps: PropTypes.any,\n  rule: PropTypes.object,\n  afterDisableFn: PropTypes.func,\n  pathway: PropTypes.string,\n  selectedTags: PropTypes.any,\n  workloads: PropTypes.any,\n  SID: PropTypes.any,\n};\n\nexport default Inventory;\n"],"names":["Inventory","localFilters","tableProps","rule","afterDisableFn","pathway","selectedTags","workloads","SID","store","useStore","intl","useIntl","dispatch","useDispatch","useState","selected","setSelected","limit","offset","sort","name","filters","setFilters","entities","useSelector","onSelectRows","id","type","payload","addNotification","data","notification","disableRuleModalOpen","setDisableRuleModalOpen","bulkSelect","setBulkSelect","handleModalToggle","bulkSelectfn","calculateSelectedItems","rows","filter","entity","map","handleRefresh","options","display_name","refreshedFilters","urlBuilder","removeFilterParam","param","filterConfigItems","label","SFC","value","filterValues","key","onChange","_e","values","length","addFilterParam","rhel_version","items","activeFiltersConfig","deleteTitle","formatMessage","messages","pruneFilters","onDelete","itemsToRemove","isAll","item","newFilter","urlParam","Array","isArray","String","chips","useEffect","isModalOpen","afterFn","hosts","hasCheckbox","initialLoading","autoRefresh","hideFilters","all","filterConfig","columns","defaultColumns","lastSeenColumn","displayName","systemProfile","transforms","sortable","wrappable","props","isStatic","width","createColumns","variant","TableVariant","customFilters","advisorFilters","getEntities","_items","config","showTags","defaultGetEntities","per_page","page","orderBy","orderDirection","hostnameOrId","tags","join","workloadQueryBuilder","Get","SYSTEMS_FETCH_URL","RULES_FETCH_URL","encodeURI","rule_id","fetchedSystems","system","system_uuid","hasItems","fields","system_profile","results","Promise","resolve","mergeArraysByDiffKeys","total","meta","count","dedicatedAction","isDisabled","playbook_count","dataProvider","issues","description","systems","onRemediationCreated","result","remediation","getNotification","error","dismissable","title","size","className","actionsConfig","actions","onClick","host_ids","allSystems","checked","onSelect","fallback","Loading","onLoad","mergeWithEntities","INVENTORY_ACTION_TYPES","mergeWithDetail","replaceReducer","updateReducers","systemReducer","Number","perPage","propTypes","PropTypes"],"sourceRoot":""}