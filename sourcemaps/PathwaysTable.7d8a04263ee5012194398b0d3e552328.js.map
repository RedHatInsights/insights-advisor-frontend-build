{"version":3,"file":"js/PathwaysTable.5976989d637748e84f04.js","mappings":"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","sources":["webpack:///./src/PresentationalComponents/Labels/RecommendationLevel.js","webpack:///./src/PresentationalComponents/PathwaysTable/PathwaysTable.js"],"sourcesContent":["import { Label } from '@patternfly/react-core/dist/js/components/Label/index';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport messages from '../../Messages';\nimport { useIntl } from 'react-intl';\n\nconst RecommendationLevel = (props) => {\n  const intl = useIntl();\n  const { recommendation_level: lvl } = props;\n\n  const label = (text, lvl, color) => (\n    <Label color={color}>{`${text} - ${lvl}%`}</Label>\n  );\n\n  if (lvl >= 80) {\n    return label(intl.formatMessage(messages.high), lvl, 'red');\n  } else if (lvl < 80 && lvl >= 50) {\n    return label(intl.formatMessage(messages.medium), lvl, 'orange');\n  } else {\n    return label(intl.formatMessage(messages.low), lvl, 'blue');\n  }\n};\n\nRecommendationLevel.propTypes = {\n  props: PropTypes.array,\n};\n\nexport default RecommendationLevel;\n","import { DEBOUNCE_DELAY, FILTER_CATEGORIES as FC } from '../../AppConstants';\nimport { Link, useLocation } from 'react-router-dom';\nimport {\n  Pagination,\n  PaginationVariant,\n} from '@patternfly/react-core/dist/js/components/Pagination/Pagination';\nimport React, { useEffect, useState } from 'react';\nimport {\n  Table,\n  TableBody,\n  TableHeader,\n  TableVariant,\n  cellWidth,\n  fitContent,\n  info,\n  sortable,\n} from '@patternfly/react-table';\nimport {\n  filterFetchBuilder,\n  paramParser,\n  pruneFilters,\n  urlBuilder,\n  workloadQueryBuilder,\n} from '../Common/Tables';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport CategoryLabel from '../Labels/CategoryLabel';\nimport Failed from '../Loading/Failed';\nimport Loading from '../Loading/Loading';\nimport MessageState from '../MessageState/MessageState';\nimport { PrimaryToolbar } from '@redhat-cloud-services/frontend-components/PrimaryToolbar';\nimport RecommendationLevel from '../Labels/RecommendationLevel';\nimport RuleLabels from '../Labels/RuleLabels';\nimport SearchIcon from '@patternfly/react-icons/dist/js/icons/search-icon';\nimport debounce from '../../Utilities/Debounce';\nimport messages from '../../Messages';\nimport { updatePathFilters } from '../../Services/Filters';\nimport { useGetPathwaysQuery } from '../../Services/Pathways';\nimport { useIntl } from 'react-intl';\n\nconst PathwaysTable = () => {\n  const intl = useIntl();\n  const dispatch = useDispatch();\n  const { search } = useLocation();\n\n  const selectedTags = useSelector(({ filters }) => filters.selectedTags);\n  const workloads = useSelector(({ filters }) => filters.workloads);\n  const SID = useSelector(({ filters }) => filters.SID);\n  const filters = useSelector(({ filters }) => filters.pathState);\n  const setFilters = (filters) => dispatch(updatePathFilters(filters));\n  let options = {};\n  selectedTags?.length &&\n    (options = {\n      ...options,\n      ...{ tags: selectedTags.join(',') },\n    });\n  workloads &&\n    (options = { ...options, ...workloadQueryBuilder(workloads, SID) });\n  const {\n    data: pathways = [],\n    isFetching,\n    isLoading,\n    isError,\n  } = useGetPathwaysQuery({ ...filterFetchBuilder(filters), ...options });\n\n  const cols = [\n    {\n      title: intl.formatMessage(messages.pathway),\n      transforms: [sortable, cellWidth(45)],\n    },\n    {\n      title: intl.formatMessage(messages.category),\n      transforms: [sortable, cellWidth(15)],\n    },\n    {\n      title: intl.formatMessage(messages.systems),\n      transforms: [sortable, cellWidth(10)],\n    },\n    {\n      title: intl.formatMessage(messages.reboot),\n      transforms: [sortable, cellWidth(10)],\n    },\n    {\n      title: intl.formatMessage(messages.reclvl),\n      transforms: [\n        sortable,\n        cellWidth(20),\n        fitContent,\n        info({\n          tooltip: intl.formatMessage(messages.reclvldetails),\n          tooltipProps: {\n            isContentLeftAligned: true,\n          },\n        }),\n      ],\n    },\n  ];\n  const sortIndices = {\n    0: 'description',\n    1: 'category',\n    2: 'impacted_systems_count',\n    3: 'reboot_required',\n    4: 'recommendation_level',\n  };\n  const [sortBy, setSortBy] = useState({});\n  const [filterBuilding, setFilterBuilding] = useState(true);\n  const [searchText, setSearchText] = useState(filters?.text || '');\n  const debouncedSearchText = debounce(searchText, DEBOUNCE_DELAY);\n\n  const onSort = (_event, index, direction) => {\n    const orderParam = `${direction === 'asc' ? '' : '-'}${sortIndices[index]}`;\n    setSortBy({ index, direction });\n    setFilters({ ...filters, sort: orderParam, offset: 0 });\n  };\n\n  const onSetPage = (pageNumber) => {\n    const newOffset = pageNumber * filters.limit - filters.limit;\n    setFilters({ ...filters, offset: newOffset });\n  };\n\n  const buildFilterChips = () => {\n    const localFilters = { ...filters };\n    delete localFilters.sort;\n    delete localFilters.offset;\n    delete localFilters.limit;\n\n    return pruneFilters(localFilters, FC);\n  };\n\n  const rowBuilder = (pathways) =>\n    pathways.length === 0\n      ? [\n          {\n            cells: [\n              {\n                title: (\n                  <MessageState\n                    icon={SearchIcon}\n                    title={intl.formatMessage(messages.noResults)}\n                    text={intl.formatMessage(messages.adjustFilters)}\n                  />\n                ),\n                props: { colSpan: 6 },\n              },\n            ],\n          },\n        ]\n      : pathways.flatMap((pathway, key) => [\n          {\n            cells: [\n              {\n                title: (\n                  <span key={key}>\n                    <Link key={key} to={`/pathways/${pathway.name}`}>\n                      {' '}\n                      {pathway.description}{' '}\n                    </Link>\n                    {pathway.has_incident && (\n                      <RuleLabels rule={{ tags: 'incident' }} />\n                    )}\n                  </span>\n                ),\n              },\n              {\n                title: (\n                  <CategoryLabel key={key} labelList={pathway.categories} />\n                ),\n              },\n              {\n                title: (\n                  <div\n                    key={key}\n                  >{`${pathway.impacted_systems_count.toLocaleString()}`}</div>\n                ),\n              },\n              {\n                title: (\n                  <span key={key}>\n                    {intl.formatMessage(\n                      pathway.reboot_required\n                        ? messages.required\n                        : messages.notRequired\n                    )}\n                  </span>\n                ),\n              },\n              {\n                title: <RecommendationLevel key={key} {...pathway} />,\n              },\n            ],\n          },\n        ]);\n\n  const removeFilterParam = (param) => {\n    const filter = { ...filters, offset: 0 };\n    param === 'text' && setSearchText('');\n    delete filter[param];\n    setFilters(filter);\n  };\n\n  const addFilterParam = (param, values) => {\n    values.length > 0\n      ? setFilters({ ...filters, offset: 0, ...{ [param]: values } })\n      : removeFilterParam(param);\n  };\n\n  const filterConfigItems = [\n    {\n      label: intl.formatMessage(messages.name).toLowerCase(),\n      filterValues: {\n        key: 'text-filter',\n        onChange: (_event, value) => setSearchText(value),\n        value: searchText,\n        placeholder: intl.formatMessage(messages.filterBy),\n      },\n    },\n    {\n      label: FC.category.title,\n      type: FC.category.type,\n      id: FC.category.urlParam,\n      value: `checkbox-${FC.category.urlParam}`,\n      filterValues: {\n        key: `${FC.category.urlParam}-filter`,\n        onChange: (_event, values) =>\n          addFilterParam(FC.category.urlParam, values),\n        value: filters.category,\n        items: FC.category.values,\n      },\n    },\n    {\n      label: FC.incident.title,\n      type: FC.incident.type,\n      id: FC.incident.urlParam,\n      value: `checkbox-${FC.incident.urlParam}`,\n      filterValues: {\n        key: `${FC.incident.urlParam}-filter`,\n        onChange: (_event, values) =>\n          addFilterParam(FC.incident.urlParam, values),\n        value: filters.incident,\n        items: FC.incident.values,\n      },\n    },\n    {\n      label: FC.reboot.title,\n      type: FC.reboot.type,\n      id: FC.reboot.urlParam,\n      value: `checkbox-${FC.reboot.urlParam}`,\n      filterValues: {\n        key: `${FC.reboot.urlParam}-filter`,\n        onChange: (_event, values) =>\n          addFilterParam(FC.reboot.urlParam, values),\n        value: filters.reboot,\n        items: FC.reboot.values,\n      },\n    },\n  ];\n\n  const activeFiltersConfig = {\n    deleteTitle: intl.formatMessage(messages.resetFilters),\n    filters: buildFilterChips(),\n    onDelete: (_event, itemsToRemove, isAll) => {\n      if (isAll) {\n        setSearchText('');\n        setFilters({\n          limit: filters.limit,\n          offset: filters.offset,\n        });\n      } else {\n        itemsToRemove.map((item) => {\n          const newFilter = {\n            [item.urlParam]: Array.isArray(filters[item.urlParam])\n              ? filters[item.urlParam].filter(\n                  (value) => String(value) !== String(item.chips[0].value)\n                )\n              : '',\n          };\n          newFilter[item.urlParam].length > 0\n            ? setFilters({ ...filters, ...newFilter })\n            : removeFilterParam(item.urlParam);\n        });\n      }\n    },\n  };\n\n  useEffect(() => {\n    if (!filterBuilding && selectedTags !== null) {\n      urlBuilder(filters, selectedTags);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [filters, selectedTags, workloads, SID]);\n\n  useEffect(() => {\n    if (search && filterBuilding) {\n      const paramsObject = paramParser();\n      delete paramsObject.tags;\n\n      paramsObject.text === undefined\n        ? setSearchText('')\n        : setSearchText(paramsObject.text);\n      paramsObject.sort =\n        paramsObject.sort === undefined\n          ? '-impacted_systems_count'\n          : paramsObject.sort[0];\n      paramsObject.offset === undefined\n        ? (paramsObject.offset = 0)\n        : (paramsObject.offset = Number(paramsObject.offset[0]));\n      paramsObject.limit === undefined\n        ? (paramsObject.limit = 20)\n        : (paramsObject.limit = Number(paramsObject.limit[0]));\n      paramsObject.reboot !== undefined &&\n        !Array.isArray(paramsObject.reboot) &&\n        (paramsObject.reboot = [`${paramsObject.reboot}`]);\n\n      setFilters({ ...filters, ...paramsObject });\n    }\n\n    setFilterBuilding(false);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (filters.sort !== undefined && sortIndices) {\n      let sortInput = filters.sort;\n      const sortIndex = Number(\n        Object.entries(sortIndices).find(\n          (item) => item[1] === sortInput || `-${item[1]}` === sortInput\n        )[0]\n      );\n      const sortDirection = filters.sort[0] === '-' ? 'desc' : 'asc';\n      setSortBy({ index: sortIndex, direction: sortDirection });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [filters.sort]);\n\n  useEffect(() => {\n    if (!filterBuilding && !isLoading) {\n      const filter = { ...filters };\n      const text = searchText.length ? { text: searchText } : {};\n      delete filter.text;\n      setFilters({ ...filter, ...text, offset: 0 });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [debouncedSearchText]);\n\n  return (\n    <React.Fragment>\n      <PrimaryToolbar\n        pagination={{\n          itemCount: pathways?.meta?.count || 0,\n          page: filters.offset / filters.limit + 1,\n          perPage: Number(filters.limit),\n          onSetPage(_event, page) {\n            onSetPage(page);\n          },\n          onPerPageSelect(_event, perPage) {\n            setFilters({ ...filters, limit: perPage, offset: 0 });\n          },\n          isCompact: true,\n        }}\n        filterConfig={{ items: filterConfigItems }}\n        activeFiltersConfig={activeFiltersConfig}\n      />\n      {isFetching ? (\n        <Loading />\n      ) : isError ? (\n        <Failed\n          message={intl.formatMessage(messages.rulesTableFetchRulesError)}\n        />\n      ) : (\n        <Table\n          aria-label={'pathways-table'}\n          variant={TableVariant.compact}\n          sortBy={sortBy}\n          onSort={onSort}\n          cells={cols}\n          rows={rowBuilder(pathways?.data)}\n          isStickyHeader\n        >\n          <TableHeader />\n          <TableBody />\n        </Table>\n      )}\n      <Pagination\n        ouiaId=\"page\"\n        itemCount={pathways?.meta?.count || 0}\n        page={filters.offset / filters.limit + 1}\n        perPage={Number(filters.limit)}\n        onSetPage={(_e, page) => {\n          onSetPage(page);\n        }}\n        onPerPageSelect={(_e, perPage) => {\n          setFilters({ ...filters, limit: perPage, offset: 0 });\n        }}\n        widgetId={`pagination-options-menu-bottom`}\n        variant={PaginationVariant.bottom}\n      />\n    </React.Fragment>\n  );\n};\n\nexport default PathwaysTable;\n"],"names":["RecommendationLevel","props","intl","useIntl","lvl","recommendation_level","label","text","color","Label","formatMessage","messages","propTypes","PropTypes","dispatch","useDispatch","search","useLocation","selectedTags","useSelector","filters","workloads","SID","pathState","setFilters","updatePathFilters","options","length","tags","join","workloadQueryBuilder","localFilters","useGetPathwaysQuery","filterFetchBuilder","data","pathways","isFetching","isLoading","isError","cols","title","transforms","sortable","cellWidth","fitContent","info","tooltip","tooltipProps","isContentLeftAligned","sortIndices","0","1","2","3","4","useState","sortBy","setSortBy","filterBuilding","setFilterBuilding","searchText","setSearchText","debouncedSearchText","debounce","DEBOUNCE_DELAY","onSetPage","pageNumber","newOffset","limit","offset","removeFilterParam","param","filter","addFilterParam","values","filterConfigItems","toLowerCase","filterValues","key","onChange","_event","value","placeholder","FC","type","id","category","items","incident","reboot","activeFiltersConfig","deleteTitle","sort","pruneFilters","onDelete","itemsToRemove","isAll","map","item","newFilter","urlParam","Array","isArray","String","chips","useEffect","urlBuilder","paramsObject","paramParser","undefined","Number","sortInput","sortIndex","Object","entries","find","sortDirection","index","direction","PrimaryToolbar","pagination","itemCount","meta","count","page","perPage","onPerPageSelect","isCompact","filterConfig","Loading","Failed","message","Table","aria-label","variant","TableVariant","onSort","orderParam","cells","rows","MessageState","icon","SearchIcon","colSpan","flatMap","pathway","Link","to","name","description","has_incident","RuleLabels","rule","CategoryLabel","labelList","categories","impacted_systems_count","toLocaleString","reboot_required","rowBuilder","isStickyHeader","TableHeader","TableBody","Pagination","ouiaId","_e","widgetId","PaginationVariant"],"sourceRoot":""}