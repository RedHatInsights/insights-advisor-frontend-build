{"version":3,"file":"js/4130.1665160680875.45442662fdcf840f7d0c.js","mappings":"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","sources":["webpack:///./src/PresentationalComponents/Common/DownloadHelper.js","webpack:///./src/PresentationalComponents/Labels/LabelIcon.js","webpack:///./src/PresentationalComponents/Labels/CategoryLabel.js","webpack:///./src/PresentationalComponents/Modals/DisableRule.js"],"sourcesContent":["import { addNotification } from '@redhat-cloud-services/frontend-components-notifications/redux/actions/notifications';\nimport { downloadFile } from '@redhat-cloud-services/frontend-components-utilities/helpers';\n\nimport { BASE_URL, exportNotifications } from '../../AppConstants';\nimport { Get } from '../../Utilities/Api';\nimport { workloadQueryBuilder } from '../Common/Tables';\n\nconst fileName = (exportTable) => {\n  const defaultParams = {\n    date: new Date().toISOString().replace(/[T:]/g, '-').split('.')[0] + '-utc',\n  };\n\n  return `Insights-Advisor_${exportTable}--${defaultParams.date}`;\n};\n\nconst downloadHelper = async (\n  exportTable,\n  format,\n  filters,\n  selectedTags,\n  workloads,\n  SID,\n  dispatch\n) => {\n  try {\n    let options = selectedTags?.length && { tags: selectedTags };\n    workloads &&\n      (options = { ...options, ...workloadQueryBuilder(workloads, SID) });\n    dispatch(addNotification(exportNotifications.pending));\n    const data = (\n      await Get(\n        `${BASE_URL}/export/${exportTable}.${\n          format === 'json' ? 'json' : 'csv'\n        }`,\n        {},\n        { ...filters, ...options }\n      )\n        .then((result) => {\n          dispatch(addNotification(exportNotifications.success));\n          return result;\n        })\n        .catch(() => dispatch(addNotification(exportNotifications.error)))\n    ).data;\n\n    let formattedData = format === 'json' ? JSON.stringify(data) : data;\n    downloadFile(formattedData, fileName(exportTable), format);\n  } catch (error) {\n    throw `${error}`;\n  }\n};\n\nexport default downloadHelper;\n","import { Label } from '@patternfly/react-core/dist/js/components/Label/index';\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nconst LabelIcon = ({ icon, text }) => (\n  <Label icon={icon} variant=\"outline\" color=\"blue\" isCompact>\n    {text}\n  </Label>\n);\n\nLabelIcon.propTypes = {\n  icon: PropTypes.object,\n  text: PropTypes.bool,\n};\n\nexport default LabelIcon;\n","/* eslint-disable react/jsx-key */\nimport AutomationIcon from '@patternfly/react-icons/dist/esm/icons/automation-icon';\nimport CubeIcon from '@patternfly/react-icons/dist/esm/icons/cube-icon';\nimport { LabelGroup } from '@patternfly/react-core/dist/js/components/LabelGroup/LabelGroup';\nimport LockIcon from '@patternfly/react-icons/dist/esm/icons/lock-icon';\nimport PortIcon from '@patternfly/react-icons/dist/esm/icons/port-icon';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport messages from '../../Messages';\nimport { useIntl } from 'react-intl';\nimport LabelIcon from './LabelIcon';\n\nconst CategoryLabel = ({ labelList }) => {\n  const intl = useIntl();\n  const sortedFrequency = (arr) =>\n    Object.entries(\n      arr.reduce((acc, curr) => ((acc[curr] = (acc[curr] || 0) + 1), acc), {})\n    ).sort((a, b) => b[1] - a[1]);\n  const sortedFrequencyList = sortedFrequency(\n    labelList.map((label) => label.id)\n  );\n\n  const labels = (id) =>\n    [\n      <LabelIcon\n        icon={<AutomationIcon />}\n        text={intl.formatMessage(messages.availability)}\n      />,\n      <LabelIcon\n        icon={<LockIcon />}\n        text={intl.formatMessage(messages.security)}\n      />,\n      <LabelIcon\n        icon={<CubeIcon />}\n        text={intl.formatMessage(messages.stability)}\n      />,\n      <LabelIcon\n        icon={<PortIcon />}\n        text={intl.formatMessage(messages.performance)}\n      />,\n    ][id];\n\n  return (\n    <LabelGroup numLabels={1} isCompact>\n      {sortedFrequencyList.map((id) => labels(Number(id[0] - 1)))}\n    </LabelGroup>\n  );\n};\n\nCategoryLabel.propTypes = {\n  labelList: PropTypes.array,\n  isCompact: PropTypes.bool,\n};\n\nCategoryLabel.defaultProps = {\n  isCompact: true,\n};\n\nexport default CategoryLabel;\n","import React, { useState } from 'react';\n\nimport { BASE_URL } from '../../AppConstants';\nimport { Button } from '@patternfly/react-core/dist/js/components/Button/Button';\nimport { Checkbox } from '@patternfly/react-core/dist/js/components/Checkbox/Checkbox';\nimport { Form } from '@patternfly/react-core/dist/js/components/Form/Form';\nimport { FormGroup } from '@patternfly/react-core/dist/js/components/Form/FormGroup';\nimport { Modal } from '@patternfly/react-core/dist/js/components/Modal/Modal';\nimport { Post } from '../../Utilities/Api';\nimport PropTypes from 'prop-types';\nimport { TextInput } from '@patternfly/react-core/dist/js/components/TextInput/TextInput';\nimport { addNotification } from '@redhat-cloud-services/frontend-components-notifications/';\nimport messages from '../../Messages';\nimport { useDispatch } from 'react-redux';\nimport { useIntl } from 'react-intl';\nimport { useSetAckMutation } from '../../Services/Acks';\n\nconst DisableRule = ({\n  handleModalToggle,\n  isModalOpen,\n  host,\n  hosts,\n  rule,\n  afterFn,\n}) => {\n  const intl = useIntl();\n  const dispatch = useDispatch();\n  const notification = (data) => dispatch(addNotification(data));\n  const [justification, setJustificaton] = useState('');\n  const [singleSystem, setSingleSystem] = useState(\n    host !== undefined || hosts.length > 0\n  );\n\n  const [setAck] = useSetAckMutation();\n\n  const bulkHostActions = async () => {\n    const data = { systems: hosts, justification };\n    try {\n      await Post(`${BASE_URL}/rule/${rule.rule_id}/ack_hosts/`, {}, data);\n      !singleSystem &&\n        notification({\n          variant: 'success',\n          dismissable: true,\n          timeout: true,\n          title: intl.formatMessage(messages.recSuccessfullyDisabled),\n        });\n      afterFn && afterFn();\n    } catch (error) {\n      notification({\n        variant: 'danger',\n        dismissable: true,\n        title: intl.formatMessage(messages.error),\n        description: `${error}`,\n      });\n    }\n  };\n\n  const disableRule = async () => {\n    if (rule.rule_status === 'enabled' && !hosts.length) {\n      const options = singleSystem\n        ? {\n            type: 'HOST',\n            options: {\n              rule: rule.rule_id,\n              system_uuid: host.id,\n              justification,\n            },\n          }\n        : {\n            type: 'RULE',\n            options: {\n              rule_id: rule.rule_id,\n              ...(justification && { justification }),\n            },\n          };\n      try {\n        await setAck(options).unwrap();\n\n        notification({\n          variant: 'success',\n          timeout: true,\n          dismissable: true,\n          title: intl.formatMessage(messages.recSuccessfullyDisabled),\n        });\n\n        setJustificaton('');\n        afterFn && afterFn();\n      } catch (error) {\n        notification({\n          variant: 'danger',\n          dismissable: true,\n          title: intl.formatMessage(messages.error),\n          description: `${error}`,\n        });\n      }\n    } else {\n      bulkHostActions();\n    }\n\n    handleModalToggle(false);\n  };\n\n  return (\n    <Modal\n      variant=\"small\"\n      title={intl.formatMessage(messages.disableRule)}\n      isOpen={isModalOpen}\n      onClose={() => {\n        handleModalToggle(false);\n        setJustificaton('');\n      }}\n      actions={[\n        <Button\n          key=\"confirm\"\n          variant=\"primary\"\n          onClick={() => disableRule()}\n          ouiaId=\"confirm\"\n        >\n          {intl.formatMessage(messages.save)}\n        </Button>,\n        <Button\n          key=\"cancel\"\n          variant=\"link\"\n          onClick={() => {\n            handleModalToggle(false);\n            setJustificaton('');\n          }}\n          ouiaId=\"cancel\"\n        >\n          {intl.formatMessage(messages.cancel)}\n        </Button>,\n      ]}\n    >\n      {intl.formatMessage(messages.disableRuleBody)}\n      <Form>\n        <FormGroup fieldId=\"blank-form\" />\n        {(host !== undefined || hosts.length > 0) && (\n          <FormGroup fieldId=\"disable-rule-one-system\">\n            <Checkbox\n              isChecked={singleSystem}\n              onChange={() => {\n                setSingleSystem(!singleSystem);\n              }}\n              label={\n                hosts.length\n                  ? intl.formatMessage(messages.disableRuleForSystems)\n                  : intl.formatMessage(messages.disableRuleSingleSystem)\n              }\n              id=\"disable-rule-one-system\"\n              name=\"disable-rule-one-system\"\n            />\n          </FormGroup>\n        )}\n        <FormGroup\n          label={intl.formatMessage(messages.justificationNote)}\n          fieldId=\"disable-rule-justification\"\n        >\n          <TextInput\n            type=\"text\"\n            id=\"disable-rule-justification\"\n            aria-describedby=\"disable-rule-justification\"\n            value={justification}\n            onChange={(text) => setJustificaton(text)}\n            onKeyDown={(e) =>\n              e.key === 'Enter' && (e.preventDefault(), disableRule())\n            }\n          />\n        </FormGroup>\n      </Form>\n    </Modal>\n  );\n};\n\nDisableRule.propTypes = {\n  isModalOpen: PropTypes.bool,\n  host: PropTypes.object,\n  handleModalToggle: PropTypes.func,\n  rule: PropTypes.object,\n  afterFn: PropTypes.func,\n  hosts: PropTypes.array,\n};\n\nDisableRule.defaultProps = {\n  isModalOpen: false,\n  handleModalToggle: () => undefined,\n  system: undefined,\n  rule: {},\n  afterFn: () => undefined,\n  host: undefined,\n  hosts: [],\n};\n\nexport default DisableRule;\n"],"names":["i","fileName","exportTable","defaultParams","date","Date","toISOString","replace","split","format","filters","selectedTags","workloads","SID","dispatch","options","length","tags","workloadQueryBuilder","addNotification","exportNotifications","Get","BASE_URL","then","result","data","formattedData","JSON","stringify","downloadFile","LabelIcon","icon","text","Label","variant","color","isCompact","propTypes","PropTypes","CategoryLabel","arr","labelList","intl","useIntl","sortedFrequencyList","map","label","id","Object","entries","reduce","acc","curr","sort","a","b","LabelGroup","numLabels","formatMessage","messages","labels","Number","defaultProps","DisableRule","handleModalToggle","isModalOpen","host","hosts","rule","afterFn","useDispatch","notification","useState","justification","setJustificaton","undefined","singleSystem","setSingleSystem","useSetAckMutation","setAck","bulkHostActions","systems","Post","rule_id","dismissable","timeout","title","description","disableRule","rule_status","type","system_uuid","unwrap","isOpen","onClose","actions","Button","key","onClick","ouiaId","fieldId","isChecked","onChange","name","value","onKeyDown","e","preventDefault","system"],"sourceRoot":""}