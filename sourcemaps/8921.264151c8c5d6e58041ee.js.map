{"version":3,"sources":["webpack:///./src/PresentationalComponents/Common/DownloadHelper.js"],"names":["fileName","exportTable","defaultParams","date","Date","toISOString","replace","split","format","filters","selectedTags","workloads","SID","options","length","tags","workloadQueryBuilder","API","BASE_URL","data","formattedData","JSON","stringify","downloadFile"],"mappings":"qyBAKA,IAAMA,EAAW,SAACC,GAChB,IAAMC,EAAgB,CACpBC,MAAM,IAAIC,MAAOC,cAAcC,QAAQ,QAAS,KAAKC,MAAM,KAAK,GAAK,QAGvE,iCAA2BN,EAA3B,aAA2CC,EAAcC,OA+B3D,QA5BoB,mCAAG,WACrBF,EACAO,EACAC,EACAC,EACAC,EACAC,GANqB,2FASfC,EAAUH,EAAaI,QAAU,CAAEC,KAAML,GAC7CC,IACGE,EAAU,EAAH,KAAQA,IAAYG,QAAqBL,EAAWC,KAX3C,SAaXK,QAAA,UACDC,WADC,mBACkBjB,EADlB,YAES,SAAXO,EAAoB,OAAS,OAE/B,GAJI,OAKCC,GAAYI,IAlBF,OAYbM,EAZa,OAoBjBA,KACEC,EAA2B,SAAXZ,EAAoBa,KAAKC,UAAUH,GAAQA,GAC/DI,QAAaH,EAAepB,EAASC,GAAcO,GAtBhC,kIAAH","file":"js/8921.48a02da8f96c31f23f56.js","sourcesContent":["import API from '../../Utilities/Api';\nimport { BASE_URL } from '../../AppConstants';\nimport { downloadFile } from '@redhat-cloud-services/frontend-components-utilities/helpers';\nimport { workloadQueryBuilder } from '../Common/Tables';\n\nconst fileName = (exportTable) => {\n  const defaultParams = {\n    date: new Date().toISOString().replace(/[T:]/g, '-').split('.')[0] + '-utc',\n  };\n\n  return `Insights-Advisor_${exportTable}--${defaultParams.date}`;\n};\n\nconst downloadHelper = async (\n  exportTable,\n  format,\n  filters,\n  selectedTags,\n  workloads,\n  SID\n) => {\n  try {\n    let options = selectedTags.length && { tags: selectedTags };\n    workloads &&\n      (options = { ...options, ...workloadQueryBuilder(workloads, SID) });\n    const data = (\n      await API.get(\n        `${BASE_URL}/export/${exportTable}.${\n          format === 'json' ? 'json' : 'csv'\n        }`,\n        {},\n        { ...filters, ...options }\n      )\n    ).data;\n    let formattedData = format === 'json' ? JSON.stringify(data) : data;\n    downloadFile(formattedData, fileName(exportTable), format);\n  } catch (error) {\n    throw `${error}`;\n  }\n};\n\nexport default downloadHelper;\n"],"sourceRoot":""}