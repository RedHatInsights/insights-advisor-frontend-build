{"version":3,"file":"js/544.5c95168a4bac03b4832a.js","mappings":"g8BA4BA,IAAMA,EAAgB,SAAC,GAAsC,IAApCC,EAAoC,EAApCA,OAAQC,EAA4B,EAA5BA,UAAWC,EAAiB,EAAjBA,WACpCC,EAAOH,EAAOG,MAAQH,EACtBI,EAAmBC,GAAAA,CACvB,gCACA,oBAEIC,EAAoB,SAACC,EAAUC,GACnC,IAAMC,EAAe,EAAH,KACbC,IAAAA,kBADa,IAEhBC,QAAS,CAAC,UACVC,OAAO,IAIT,IACE,IAAMC,EAAcL,EAChBE,IAAAA,SAAaH,EAAUE,EAAvBC,CAAqCF,GACrCD,EACEO,EAAaC,GAAAA,CAAOF,GAE1B,OACE,yBACEG,wBAAyB,CACvBC,OAAQH,EACLI,QACC,UAFI,qDAKLA,QACC,SANI,iDASLA,QAAQ,WATH,WAXS,GAWT,YAad,MAAOC,GAEP,OADAC,QAAQC,KAAKF,EAAOX,EAAaD,GAE/B,kBAAC,aAAD,KACG,IADH,yFAIE,6BACE,8BAAOA,OAOjB,OACE,kBAAC,IAAD,CACEe,UAAU,qDACVC,MAAO,CAAEC,UAAW,SAEpB,kBAAC,IAAD,KACE,kBAAC,IAAD,CACEF,UAAWlB,EACXqB,cAAY,oBACZC,WAAS,GAET,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAMJ,UAAU,mBAAmBK,WAAS,GAC1C,kBAAC,IAAD,KACE,kBAAC,KAAD,CAAcL,UAAU,8BACxB,qDAEF,kBAAC,IAAD,KACGnB,EAAKyB,QAAUtB,EAAkBH,EAAKyB,OAAQ5B,EAAO6B,YAI5D,kBAAC,IAAD,MACA,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAMP,UAAU,mBAAmBK,WAAS,GAC1C,kBAAC,IAAD,KACE,kBAAC,KAAD,CAAcL,UAAU,8BACxB,sDAEF,kBAAC,IAAD,KACGtB,EAAO8B,YACNxB,EACEN,EAAO8B,WAAWA,WAClB9B,EAAO6B,YAKhB1B,EAAK4B,SACJ,kBAAC,aAAD,KACE,kBAAC,IAAD,MACA,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAMT,UAAU,mBAAmBK,WAAS,GAC1C,kBAAC,IAAD,KACE,kBAAC,KAAD,CAAeL,UAAU,8BACzB,oEAEF,kBAAC,IAAD,KACGpB,EACC,kBAAC,IAAD,CAAU8B,KAAMC,EAAAA,EAAAA,KAEhB,uBACEC,IAAI,sBACJC,OAAO,SACPC,KAAI,UAAKnC,EAAUoC,WAElBpC,EAAUqC,eACPrC,EAAUqC,eADb,wBAE4B,IAC7B,kBAAC,KAAD,WAQbnC,EAAKoC,WACJ,kBAAC,aAAD,KACE,kBAAC,IAAD,MACA,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAMjB,UAAU,mBAAmBK,WAAS,GAC1C,kBAAC,IAAD,KACE,kBAAC,KAAD,CAAgBL,UAAU,8BAC1B,sDAEF,kBAAC,IAAD,KACGhB,EAAkBH,EAAKoC,UAAWvC,EAAO6B,iBAY9D,UAEA9B,EAAcyC,aAAe,CAC3BxC,OAAQ,GACRC,UAAW,IAGbF,EAAc0C,UAAY,CACxBzC,OAAQyC,IAAAA,OACRxC,UAAWwC,IAAAA,OACXvC,WAAYuC,IAAAA","sources":["webpack:///./src/PresentationalComponents/ReportDetails/ReportDetails.js"],"sourcesContent":["import './report-details.scss';\n\nimport {\n  Card,\n  CardBody,\n  CardHeader,\n} from '@patternfly/react-core/dist/esm/components/Card';\nimport {\n  Skeleton,\n  SkeletonSize,\n} from '@redhat-cloud-services/frontend-components/Skeleton';\nimport {\n  Stack,\n  StackItem,\n} from '@patternfly/react-core/dist/esm/layouts/Stack';\n\nimport { BullseyeIcon } from '@patternfly/react-icons/dist/esm/icons/bullseye-icon';\nimport { Divider } from '@patternfly/react-core/dist/esm/components/Divider';\nimport { ExternalLinkAltIcon } from '@patternfly/react-icons/dist/esm/icons/external-link-alt-icon';\nimport { InfoCircleIcon } from '@patternfly/react-icons/dist/esm/icons/info-circle-icon';\nimport { LightbulbIcon } from '@patternfly/react-icons/dist/esm/icons/lightbulb-icon';\nimport React from 'react';\nimport { ThumbsUpIcon } from '@patternfly/react-icons/dist/esm/icons/thumbs-up-icon';\nimport classNames from 'classnames';\nimport doT from 'dot';\nimport marked from 'marked';\nimport propTypes from 'prop-types';\n\nconst ReportDetails = ({ report, kbaDetail, kbaLoading }) => {\n  const rule = report.rule || report;\n  const rulesCardClasses = classNames(\n    'ins-c-inventory-advisor__card',\n    'ins-c-rules-card'\n  );\n  const templateProcessor = (template, definitions) => {\n    const DOT_SETTINGS = {\n      ...doT.templateSettings,\n      varname: ['pydata'],\n      strip: false,\n    };\n    const externalLinkIcon = '';\n\n    try {\n      const compiledDot = definitions\n        ? doT.template(template, DOT_SETTINGS)(definitions)\n        : template;\n      const compiledMd = marked(compiledDot);\n\n      return (\n        <div\n          dangerouslySetInnerHTML={{\n            __html: compiledMd\n              .replace(\n                /<ul>/gim,\n                `<ul class=\"pf-c-list\" style=\"font-size: inherit\">`\n              )\n              .replace(\n                /<a>/gim,\n                `<a> rel=\"noopener noreferrer\" target=\"_blank\"`\n              )\n              .replace(/<\\/a>/gim, ` ${externalLinkIcon}</a>`),\n          }}\n        />\n      );\n    } catch (error) {\n      console.warn(error, definitions, template); // eslint-disable-line no-console\n      return (\n        <React.Fragment>\n          {' '}\n          Ouch. We were unable to correctly render this text, instead please\n          enjoy the raw data.\n          <pre>\n            <code>{template}</code>\n          </pre>\n        </React.Fragment>\n      );\n    }\n  };\n\n  return (\n    <Card\n      className=\"ins-c-inventory-insights__report-details__override\"\n      style={{ boxShadow: 'none' }}\n    >\n      <CardBody>\n        <Stack\n          className={rulesCardClasses}\n          widget-type=\"InsightsRulesCard\"\n          hasGutter\n        >\n          <StackItem>\n            <Card className=\"ins-m-card__flat\" isCompact>\n              <CardHeader>\n                <BullseyeIcon className=\"ins-c-report-details-icon\" />\n                <strong> Detected issues</strong>\n              </CardHeader>\n              <CardBody>\n                {rule.reason && templateProcessor(rule.reason, report.details)}\n              </CardBody>\n            </Card>\n          </StackItem>\n          <Divider />\n          <StackItem>\n            <Card className=\"ins-m-card__flat\" isCompact>\n              <CardHeader>\n                <ThumbsUpIcon className=\"ins-c-report-details-icon\" />\n                <strong> Steps to resolve</strong>\n              </CardHeader>\n              <CardBody>\n                {report.resolution &&\n                  templateProcessor(\n                    report.resolution.resolution,\n                    report.details\n                  )}\n              </CardBody>\n            </Card>\n          </StackItem>\n          {rule.node_id && (\n            <React.Fragment>\n              <Divider />\n              <StackItem>\n                <Card className=\"ins-m-card__flat\" isCompact>\n                  <CardHeader>\n                    <LightbulbIcon className=\"ins-c-report-details-icon\" />\n                    <strong> Related Knowledgebase article </strong>\n                  </CardHeader>\n                  <CardBody>\n                    {kbaLoading ? (\n                      <Skeleton size={SkeletonSize.sm} />\n                    ) : (\n                      <a\n                        rel=\"noopener noreferrer\"\n                        target=\"_blank\"\n                        href={`${kbaDetail.view_uri}`}\n                      >\n                        {kbaDetail.publishedTitle\n                          ? kbaDetail.publishedTitle\n                          : `Knowledgebase article`}{' '}\n                        <ExternalLinkAltIcon />\n                      </a>\n                    )}\n                  </CardBody>\n                </Card>\n              </StackItem>\n            </React.Fragment>\n          )}\n          {rule.more_info && (\n            <React.Fragment>\n              <Divider />\n              <StackItem>\n                <Card className=\"ins-m-card__flat\" isCompact>\n                  <CardHeader>\n                    <InfoCircleIcon className=\"ins-c-report-details-icon\" />\n                    <strong> Additional info </strong>\n                  </CardHeader>\n                  <CardBody>\n                    {templateProcessor(rule.more_info, report.details)}\n                  </CardBody>\n                </Card>\n              </StackItem>\n            </React.Fragment>\n          )}\n        </Stack>\n      </CardBody>\n    </Card>\n  );\n};\n\nexport default ReportDetails;\n\nReportDetails.defaultProps = {\n  report: {},\n  kbaDetail: {},\n};\n\nReportDetails.propTypes = {\n  report: propTypes.object,\n  kbaDetail: propTypes.object,\n  kbaLoading: propTypes.bool,\n};\n"],"names":["ReportDetails","report","kbaDetail","kbaLoading","rule","rulesCardClasses","classNames","templateProcessor","template","definitions","DOT_SETTINGS","doT","varname","strip","compiledDot","compiledMd","marked","dangerouslySetInnerHTML","__html","replace","error","console","warn","className","style","boxShadow","widget-type","hasGutter","isCompact","reason","details","resolution","node_id","size","SkeletonSize","rel","target","href","view_uri","publishedTitle","more_info","defaultProps","propTypes"],"sourceRoot":""}