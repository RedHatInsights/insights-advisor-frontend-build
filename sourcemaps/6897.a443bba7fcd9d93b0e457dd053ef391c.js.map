{"version":3,"file":"js/6897.1652865916996.736029aa8ca7282b838a.js","mappings":"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","sources":["webpack:///./src/PresentationalComponents/Common/DownloadHelper.js","webpack:///./src/PresentationalComponents/Labels/CategoryLabel.js","webpack:///./src/PresentationalComponents/Loading/Failed.js","webpack:///./src/PresentationalComponents/Modals/DisableRule.js","webpack:///./src/PresentationalComponents/Modals/ViewHostAcks.js"],"sourcesContent":["import { addNotification } from '@redhat-cloud-services/frontend-components-notifications/redux/actions/notifications';\nimport { downloadFile } from '@redhat-cloud-services/frontend-components-utilities/helpers';\n\nimport { BASE_URL, exportNotifications } from '../../AppConstants';\nimport { Get } from '../../Utilities/Api';\nimport { workloadQueryBuilder } from '../Common/Tables';\n\nconst fileName = (exportTable) => {\n  const defaultParams = {\n    date: new Date().toISOString().replace(/[T:]/g, '-').split('.')[0] + '-utc',\n  };\n\n  return `Insights-Advisor_${exportTable}--${defaultParams.date}`;\n};\n\nconst downloadHelper = async (\n  exportTable,\n  format,\n  filters,\n  selectedTags,\n  workloads,\n  SID,\n  dispatch\n) => {\n  try {\n    let options = selectedTags?.length && { tags: selectedTags };\n    workloads &&\n      (options = { ...options, ...workloadQueryBuilder(workloads, SID) });\n    dispatch(addNotification(exportNotifications.pending));\n    const data = (\n      await Get(\n        `${BASE_URL}/export/${exportTable}.${\n          format === 'json' ? 'json' : 'csv'\n        }`,\n        {},\n        { ...filters, ...options }\n      )\n        .then((result) => {\n          dispatch(addNotification(exportNotifications.success));\n          return result;\n        })\n        .catch(() => dispatch(addNotification(exportNotifications.error)))\n    ).data;\n\n    let formattedData = format === 'json' ? JSON.stringify(data) : data;\n    downloadFile(formattedData, fileName(exportTable), format);\n  } catch (error) {\n    throw `${error}`;\n  }\n};\n\nexport default downloadHelper;\n","import AutomationIcon from '@patternfly/react-icons/dist/esm/icons/automation-icon';\nimport CubeIcon from '@patternfly/react-icons/dist/esm/icons/cube-icon';\nimport { Label } from '@patternfly/react-core/dist/js/components/Label/index';\nimport { LabelGroup } from '@patternfly/react-core/dist/js/components/LabelGroup/LabelGroup';\nimport LockIcon from '@patternfly/react-icons/dist/esm/icons/lock-icon';\nimport PortIcon from '@patternfly/react-icons/dist/esm/icons/port-icon';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport messages from '../../Messages';\nimport { useIntl } from 'react-intl';\n\nconst CategoryLabel = ({ labelList, isCompact }) => {\n  const intl = useIntl();\n  const sortedFrequency = (arr) =>\n    Object.entries(\n      arr.reduce((acc, curr) => ((acc[curr] = (acc[curr] || 0) + 1), acc), {})\n    ).sort((a, b) => b[1] - a[1]);\n  const sortedFrequencyList = sortedFrequency(\n    labelList.map((label) => label.id)\n  );\n\n  const label = (icon, text) => (\n    <Label icon={icon} variant=\"outline\" color=\"blue\" isCompact={isCompact}>\n      {text}\n    </Label>\n  );\n  const labels = (id, isCompact) => {\n    if (id === 1) {\n      return label(\n        <AutomationIcon />,\n        intl.formatMessage(messages.availability)\n      );\n    }\n    if (id === 2) {\n      return label(\n        <LockIcon />,\n        intl.formatMessage(messages.security),\n        isCompact\n      );\n    }\n    if (id === 3) {\n      return label(\n        <CubeIcon />,\n        intl.formatMessage(messages.stability),\n        isCompact\n      );\n    }\n    if (id === 4) {\n      return label(\n        <PortIcon />,\n        intl.formatMessage(messages.performance),\n        isCompact\n      );\n    }\n  };\n  return (\n    <LabelGroup numLabels={1} isCompact={isCompact}>\n      {sortedFrequencyList.map((id) => labels(Number(id[0]), isCompact))}\n    </LabelGroup>\n  );\n};\n\nCategoryLabel.propTypes = {\n  labelList: PropTypes.array,\n  isCompact: PropTypes.bool,\n};\n\nCategoryLabel.defaultProps = {\n  isCompact: false,\n};\n\nexport default CategoryLabel;\n","import { Card } from '@patternfly/react-core/dist/js/components/Card/Card';\nimport { CardBody } from '@patternfly/react-core/dist/js/components/Card/CardBody';\nimport { CardHeader } from '@patternfly/react-core/dist/js/components/Card/CardHeader';\nimport FrownOpenIcon from '@patternfly/react-icons/dist/js/icons/frown-open-icon';\nimport React from 'react';\nimport propTypes from 'prop-types';\n\nconst Failed = ({ message }) => (\n  <>\n    <Card className=\"adv-c-card-empty-rule\">\n      <CardHeader>\n        <FrownOpenIcon size=\"lg\" />\n      </CardHeader>\n      <CardBody>{message}</CardBody>\n    </Card>\n  </>\n);\n\nexport default Failed;\n\nFailed.propTypes = {\n  message: propTypes.string,\n};\n","import React, { useState } from 'react';\n\nimport { BASE_URL } from '../../AppConstants';\nimport { Button } from '@patternfly/react-core/dist/js/components/Button/Button';\nimport { Checkbox } from '@patternfly/react-core/dist/js/components/Checkbox/Checkbox';\nimport { Form } from '@patternfly/react-core/dist/js/components/Form/Form';\nimport { FormGroup } from '@patternfly/react-core/dist/js/components/Form/FormGroup';\nimport { Modal } from '@patternfly/react-core/dist/js/components/Modal/Modal';\nimport { Post } from '../../Utilities/Api';\nimport PropTypes from 'prop-types';\nimport { TextInput } from '@patternfly/react-core/dist/js/components/TextInput/TextInput';\nimport { addNotification } from '@redhat-cloud-services/frontend-components-notifications/';\nimport messages from '../../Messages';\nimport { useDispatch } from 'react-redux';\nimport { useIntl } from 'react-intl';\nimport { useSetAckMutation } from '../../Services/Acks';\n\nconst DisableRule = ({\n  handleModalToggle,\n  isModalOpen,\n  host,\n  hosts,\n  rule,\n  afterFn,\n}) => {\n  const intl = useIntl();\n  const dispatch = useDispatch();\n  const notification = (data) => dispatch(addNotification(data));\n  const [justification, setJustificaton] = useState('');\n  const [singleSystem, setSingleSystem] = useState(\n    host !== undefined || hosts.length > 0\n  );\n\n  // eslint-disable-next-line no-unused-vars\n  const [setAck, { isLoading }] = useSetAckMutation();\n\n  const bulkHostActions = async () => {\n    const data = { systems: hosts, justification };\n    try {\n      await Post(`${BASE_URL}/rule/${rule.rule_id}/ack_hosts/`, {}, data);\n      !singleSystem &&\n        notification({\n          variant: 'success',\n          dismissable: true,\n          timeout: true,\n          title: intl.formatMessage(messages.recSuccessfullyDisabled),\n        });\n      afterFn && afterFn();\n    } catch (error) {\n      notification({\n        variant: 'danger',\n        dismissable: true,\n        title: intl.formatMessage(messages.error),\n        description: `${error}`,\n      });\n    }\n  };\n\n  const disableRule = async () => {\n    if (rule.rule_status === 'enabled' && !hosts.length) {\n      const options = singleSystem\n        ? {\n            type: 'HOST',\n            options: {\n              rule: rule.rule_id,\n              system_uuid: host.id,\n              justification,\n            },\n          }\n        : {\n            type: 'RULE',\n            options: {\n              rule_id: rule.rule_id,\n              ...(justification && { justification }),\n            },\n          };\n      try {\n        await setAck(options).unwrap();\n\n        notification({\n          variant: 'success',\n          timeout: true,\n          dismissable: true,\n          title: intl.formatMessage(messages.recSuccessfullyDisabled),\n        });\n\n        setJustificaton('');\n        afterFn && afterFn();\n      } catch (error) {\n        notification({\n          variant: 'danger',\n          dismissable: true,\n          title: intl.formatMessage(messages.error),\n          description: `${error}`,\n        });\n      }\n    } else {\n      bulkHostActions();\n    }\n\n    handleModalToggle(false);\n  };\n\n  return (\n    <Modal\n      variant=\"small\"\n      title={intl.formatMessage(messages.disableRule)}\n      isOpen={isModalOpen}\n      onClose={() => {\n        handleModalToggle(false);\n        setJustificaton('');\n      }}\n      actions={[\n        <Button\n          key=\"confirm\"\n          variant=\"primary\"\n          onClick={() => disableRule()}\n          ouiaId=\"confirm\"\n        >\n          {intl.formatMessage(messages.save)}\n        </Button>,\n        <Button\n          key=\"cancel\"\n          variant=\"link\"\n          onClick={() => {\n            handleModalToggle(false);\n            setJustificaton('');\n          }}\n          ouiaId=\"cancel\"\n        >\n          {intl.formatMessage(messages.cancel)}\n        </Button>,\n      ]}\n    >\n      {intl.formatMessage(messages.disableRuleBody)}\n      <Form>\n        <FormGroup fieldId=\"blank-form\" />\n        {(host !== undefined || hosts.length > 0) && (\n          <FormGroup fieldId=\"disable-rule-one-system\">\n            <Checkbox\n              isChecked={singleSystem}\n              onChange={() => {\n                setSingleSystem(!singleSystem);\n              }}\n              label={\n                hosts.length\n                  ? intl.formatMessage(messages.disableRuleForSystems)\n                  : intl.formatMessage(messages.disableRuleSingleSystem)\n              }\n              id=\"disable-rule-one-system\"\n              name=\"disable-rule-one-system\"\n            />\n          </FormGroup>\n        )}\n        <FormGroup\n          label={intl.formatMessage(messages.justificationNote)}\n          fieldId=\"disable-rule-justification\"\n        >\n          <TextInput\n            type=\"text\"\n            id=\"disable-rule-justification\"\n            aria-describedby=\"disable-rule-justification\"\n            value={justification}\n            onChange={(text) => setJustificaton(text)}\n            onKeyDown={(e) =>\n              e.key === 'Enter' && (e.preventDefault(), disableRule())\n            }\n          />\n        </FormGroup>\n      </Form>\n    </Modal>\n  );\n};\n\nDisableRule.propTypes = {\n  isModalOpen: PropTypes.bool,\n  host: PropTypes.object,\n  handleModalToggle: PropTypes.func,\n  rule: PropTypes.object,\n  afterFn: PropTypes.func,\n  hosts: PropTypes.array,\n};\n\nDisableRule.defaultProps = {\n  isModalOpen: false,\n  handleModalToggle: () => undefined,\n  system: undefined,\n  rule: {},\n  afterFn: () => undefined,\n  host: undefined,\n  hosts: [],\n};\n\nexport default DisableRule;\n","import React, { useEffect, useState } from 'react';\nimport { Table, TableBody, TableHeader } from '@patternfly/react-table';\n\nimport { BASE_URL } from '../../AppConstants';\nimport { Button } from '@patternfly/react-core/dist/js/components/Button/Button';\nimport { DateFormat } from '@redhat-cloud-services/frontend-components/DateFormat';\nimport { DeleteApi } from '../../Utilities/Api';\nimport { List } from 'react-content-loader';\nimport { Modal } from '@patternfly/react-core/dist/js/components/Modal/Modal';\nimport OutlinedBellIcon from '@patternfly/react-icons/dist/js/icons/outlined-bell-icon';\nimport PropTypes from 'prop-types';\nimport messages from '../../Messages';\nimport { addNotification as notification } from '@redhat-cloud-services/frontend-components-notifications/';\nimport { useDispatch } from 'react-redux';\nimport { useGetHostAcksQuery } from '../../Services/Acks';\nimport { useIntl } from 'react-intl';\n\nconst ViewHostAcks = ({ handleModalToggle, isModalOpen, rule, afterFn }) => {\n  const intl = useIntl();\n  const dispatch = useDispatch();\n  const addNotification = (data) => dispatch(notification(data));\n  const columns = [\n    intl.formatMessage(messages.systemName),\n    intl.formatMessage(messages.justificationNote),\n    intl.formatMessage(messages.dateDisabled),\n    '',\n  ];\n  const [rows, setRows] = useState([]);\n  const [unclean, setUnclean] = useState(false);\n  const {\n    data: hostAcks = [],\n    isFetching,\n    isLoading,\n    refetch,\n  } = useGetHostAcksQuery({\n    rule_id: rule.rule_id,\n    limit: rule.hosts_acked_count,\n  });\n  const deleteAck = async (host) => {\n    try {\n      await DeleteApi(`${BASE_URL}/hostack/${host.id}/`);\n      refetch();\n      setUnclean(true);\n    } catch (error) {\n      handleModalToggle(false);\n      addNotification({\n        variant: 'danger',\n        dismissable: true,\n        title: intl.formatMessage(messages.error),\n        description: `${error}`,\n      });\n    }\n  };\n\n  useEffect(() => {\n    const rows = hostAcks?.map((item) => ({\n      cells: [\n        item.display_name || item.system_uuid,\n        item.justification || intl.formatMessage(messages.none),\n        {\n          title: (\n            <DateFormat date={new Date(item.updated_at)} type=\"onlyDate\" />\n          ),\n        },\n        {\n          title: (\n            <Button\n              key={item.system_uuid}\n              isInline\n              variant=\"link\"\n              onClick={() => deleteAck(item)}\n            >\n              <OutlinedBellIcon size=\"sm\" />\n              {` ${intl.formatMessage(messages.enable)}`}\n            </Button>\n          ),\n        },\n      ],\n    }));\n\n    if (!isLoading && hostAcks.length === 0) {\n      afterFn();\n      handleModalToggle(false);\n    }\n\n    setRows(rows);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [hostAcks]);\n\n  return (\n    <Modal\n      width={'75%'}\n      title={intl.formatMessage(messages.hostAckModalTitle)}\n      isOpen={isModalOpen}\n      onClose={() => {\n        unclean && afterFn();\n        handleModalToggle(false);\n      }}\n    >\n      {!isFetching ? (\n        <Table aria-label=\"host-ack-table\" rows={rows} cells={columns}>\n          <TableHeader />\n          <TableBody />\n        </Table>\n      ) : (\n        <Table\n          aria-label=\"host-ack-table\"\n          rows={[\n            {\n              cells: [{ props: { colSpan: 3 }, title: <List /> }],\n            },\n          ]}\n          cells={columns}\n        >\n          <TableHeader />\n          <TableBody />\n        </Table>\n      )}\n    </Modal>\n  );\n};\n\nViewHostAcks.propTypes = {\n  isModalOpen: PropTypes.bool,\n  handleModalToggle: PropTypes.func,\n  rule: PropTypes.object,\n  afterFn: PropTypes.func,\n};\n\nViewHostAcks.defaultProps = {\n  isModalOpen: false,\n  handleModalToggle: () => undefined,\n  rule: {},\n  afterFn: () => undefined,\n};\n\nexport default ViewHostAcks;\n"],"names":["fileName","exportTable","defaultParams","date","Date","toISOString","replace","split","format","filters","selectedTags","workloads","SID","dispatch","options","length","tags","workloadQueryBuilder","addNotification","exportNotifications","Get","BASE_URL","then","result","data","formattedData","JSON","stringify","downloadFile","CategoryLabel","arr","labelList","isCompact","intl","useIntl","sortedFrequencyList","map","label","id","Object","entries","reduce","acc","curr","sort","a","b","icon","text","Label","variant","color","numLabels","formatMessage","messages","labels","Number","propTypes","PropTypes","defaultProps","Failed","message","Card","className","CardHeader","size","CardBody","DisableRule","handleModalToggle","isModalOpen","host","hosts","rule","afterFn","useDispatch","notification","useState","justification","setJustificaton","undefined","singleSystem","setSingleSystem","useSetAckMutation","setAck","bulkHostActions","isLoading","systems","Post","rule_id","dismissable","timeout","title","description","disableRule","rule_status","type","system_uuid","unwrap","isOpen","onClose","actions","Button","key","onClick","ouiaId","fieldId","isChecked","onChange","name","aria-describedby","value","onKeyDown","e","preventDefault","system","ViewHostAcks","columns","rows","setRows","unclean","setUnclean","useGetHostAcksQuery","limit","hosts_acked_count","hostAcks","isFetching","refetch","deleteAck","DeleteApi","useEffect","item","cells","display_name","updated_at","isInline","width","Table","aria-label","props","colSpan","TableHeader","TableBody"],"sourceRoot":""}