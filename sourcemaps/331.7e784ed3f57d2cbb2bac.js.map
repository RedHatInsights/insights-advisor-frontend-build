{"version":3,"sources":["webpack:///./src/PresentationalComponents/Breadcrumbs/Breadcrumbs.js"],"names":["Breadcrumbs","current","intl","useIntl","dispatch","useDispatch","rule","useSelector","AdvisorStore","ruleFetchStatus","location","useLocation","pathname","split","useState","items","setItems","buildBreadcrumbs","useCallback","crumbs","push","title","formatMessage","messages","navigate","length","description","useEffect","id","rule_id","fetchRule","ouiaId","map","oneLink","key","Link","to","isActive","propTypes","PropTypes"],"mappings":"yQAYMA,EAAc,SAAC,GAAgB,MAAdC,EAAc,EAAdA,QACfC,GAAOC,SACPC,GAAWC,mBACXC,GAAOC,kBAAY,qBAAGC,aAAgCF,QACtDG,GAAkBF,kBACtB,qBAAGC,aAAgCC,mBAE/BC,EAAQ,WAAGC,mBAAcC,gBAAjB,aAAG,EAAwBC,MAAM,KAC/C,GAA0BC,cAAS,IAAnC,eAAOC,EAAP,KAAcC,EAAd,KAEMC,GAAmBC,kBAAY,WACnC,IAAMC,EAAS,GAEfA,EAAOC,KAAK,CACVC,MAAO,GAAF,OAAKnB,EAAKoB,cAAcC,oBAAxB,YAAoDb,EAAS,IAClEc,SAAU,IAAF,OAAMd,EAAS,MAIL,oBAAhBA,EAAS,IAAgD,IAApBA,EAASe,QAChDN,EAAOC,KAAK,CACVC,MAAOf,EAAKoB,YACZF,SAAU,IAAF,OAAMd,EAAS,GAAf,YAAqBA,EAAS,MAI1CM,EAASG,KACR,CAACjB,EAAMQ,EAAUJ,EAAKoB,cAiBzB,OAfAC,gBAAU,WACR,IAAqBC,EAEL,oBAAhBlB,EAAS,IAAgD,IAApBA,EAASe,QAFzBG,EAGL,CAAEC,QAASnB,EAAS,IAHRN,GAAS0B,QAAUF,KAI3CX,MAEH,KAEHU,gBAAU,WACgB,cAApBlB,GACFQ,MAED,CAACA,EAAkBR,IAGpB,kBAAC,aAAD,MACwB,cAApBA,GAAmCM,EAAMU,OAAS,IAClD,kBAAC,IAAD,CAAYM,OAAO,UAChBhB,EAAMiB,KAAI,SAACC,EAASC,GAAV,OACT,kBAAC,IAAD,CAAgBA,IAAKA,GACnB,kBAAC,EAAAC,KAAD,CAAMC,GAAIH,EAAQT,UAAWS,EAAQZ,WAGzC,kBAAC,IAAD,CAAgBgB,UAAQ,GAAEpC,IAGT,YAApBQ,GAAiCP,EAAKoB,cAAcC,eAK3DvB,EAAYsC,UAAY,CACtBrC,QAASsC,YAGX","file":"js/331.41ae0a41aebb2efc8e54.js","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { Breadcrumb } from '@patternfly/react-core/dist/js/components/Breadcrumb/Breadcrumb';\nimport { BreadcrumbItem } from '@patternfly/react-core/dist/js/components/Breadcrumb/BreadcrumbItem';\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { fetchRule } from '../../AppActions';\nimport messages from '../../Messages';\nimport { useIntl } from 'react-intl';\nimport { useLocation } from 'react-router-dom';\n\nconst Breadcrumbs = ({ current }) => {\n  const intl = useIntl();\n  const dispatch = useDispatch();\n  const rule = useSelector(({ AdvisorStore }) => AdvisorStore.rule);\n  const ruleFetchStatus = useSelector(\n    ({ AdvisorStore }) => AdvisorStore.ruleFetchStatus\n  );\n  const location = useLocation().pathname?.split('/');\n  const [items, setItems] = useState([]);\n\n  const buildBreadcrumbs = useCallback(() => {\n    const crumbs = [];\n    // add base\n    crumbs.push({\n      title: `${intl.formatMessage(messages.insightsHeader)} ${location[1]}`,\n      navigate: `/${location[1]}`,\n    });\n\n    // if applicable, add :id breadcrumb\n    if (location[1] === 'recommendations' && location.length === 4) {\n      crumbs.push({\n        title: rule.description,\n        navigate: `/${location[1]}/${location[2]}`,\n      });\n    }\n\n    setItems(crumbs);\n  }, [intl, location, rule.description]);\n\n  useEffect(() => {\n    const getRuleName = (id) => dispatch(fetchRule(id));\n\n    location[1] === 'recommendations' && location.length === 4\n      ? getRuleName({ rule_id: location[2] })\n      : buildBreadcrumbs();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (ruleFetchStatus === 'fulfilled') {\n      buildBreadcrumbs();\n    }\n  }, [buildBreadcrumbs, ruleFetchStatus]);\n\n  return (\n    <React.Fragment>\n      {(ruleFetchStatus === 'fulfilled' || items.length > 0) && (\n        <Breadcrumb ouiaId=\"detail\">\n          {items.map((oneLink, key) => (\n            <BreadcrumbItem key={key}>\n              <Link to={oneLink.navigate}>{oneLink.title}</Link>\n            </BreadcrumbItem>\n          ))}\n          <BreadcrumbItem isActive>{current}</BreadcrumbItem>\n        </Breadcrumb>\n      )}\n      {ruleFetchStatus === 'pending' && intl.formatMessage(messages.loading)}\n    </React.Fragment>\n  );\n};\n\nBreadcrumbs.propTypes = {\n  current: PropTypes.string,\n};\n\nexport default Breadcrumbs;\n"],"sourceRoot":""}