{"version":3,"file":"js/921.8e55b364224cca52d597.js","mappings":"myBAKA,IAAMA,EAAW,SAACC,GAChB,IAAMC,EAAgB,CACpBC,MAAM,IAAIC,MAAOC,cAAcC,QAAQ,QAAS,KAAKC,MAAM,KAAK,GAAK,QAGvE,iCAA2BN,EAA3B,aAA2CC,EAAcC,OA+B3D,QA5BoB,mCAAG,WACrBF,EACAO,EACAC,EACAC,EACAC,EACAC,GANqB,2FASfC,EAAUH,EAAaI,QAAU,CAAEC,KAAML,GAC7CC,IACGE,EAAU,EAAH,KAAQA,IAAYG,EAAAA,EAAAA,IAAqBL,EAAWC,KAX3C,UAaXK,EAAAA,EAAAA,IAAI,GAAD,OACJC,EAAAA,GADI,mBACejB,EADf,YAEM,SAAXO,EAAoB,OAAS,OAE/B,GAJO,OAKFC,GAAYI,IAlBF,OAYbM,EAZa,OAoBjBA,KACEC,EAA2B,SAAXZ,EAAoBa,KAAKC,UAAUH,GAAQA,GAC/DI,EAAAA,EAAAA,IAAaH,EAAepB,EAASC,GAAcO,GAtBhC,kIAAH","sources":["webpack:///./src/PresentationalComponents/Common/DownloadHelper.js"],"sourcesContent":["import { BASE_URL } from '../../AppConstants';\nimport { Get } from '../../Utilities/Api';\nimport { downloadFile } from '@redhat-cloud-services/frontend-components-utilities/helpers';\nimport { workloadQueryBuilder } from '../Common/Tables';\n\nconst fileName = (exportTable) => {\n  const defaultParams = {\n    date: new Date().toISOString().replace(/[T:]/g, '-').split('.')[0] + '-utc',\n  };\n\n  return `Insights-Advisor_${exportTable}--${defaultParams.date}`;\n};\n\nconst downloadHelper = async (\n  exportTable,\n  format,\n  filters,\n  selectedTags,\n  workloads,\n  SID\n) => {\n  try {\n    let options = selectedTags.length && { tags: selectedTags };\n    workloads &&\n      (options = { ...options, ...workloadQueryBuilder(workloads, SID) });\n    const data = (\n      await Get(\n        `${BASE_URL}/export/${exportTable}.${\n          format === 'json' ? 'json' : 'csv'\n        }`,\n        {},\n        { ...filters, ...options }\n      )\n    ).data;\n    let formattedData = format === 'json' ? JSON.stringify(data) : data;\n    downloadFile(formattedData, fileName(exportTable), format);\n  } catch (error) {\n    throw `${error}`;\n  }\n};\n\nexport default downloadHelper;\n"],"names":["fileName","exportTable","defaultParams","date","Date","toISOString","replace","split","format","filters","selectedTags","workloads","SID","options","length","tags","workloadQueryBuilder","Get","BASE_URL","data","formattedData","JSON","stringify","downloadFile"],"sourceRoot":""}