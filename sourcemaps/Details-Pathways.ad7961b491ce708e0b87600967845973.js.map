{"version":3,"file":"js/Details-Pathways.dddf9d7f84e878b35608.js","mappings":"q/BAoCA,IAAMA,GAAaC,EAAAA,EAAAA,OAAK,kBACtB,2IAgJF,QA3IuB,WACrB,IAAMC,GAAOC,EAAAA,EAAAA,KACPC,GAAcC,EAAAA,EAAAA,aAAYC,GAC1BC,GAAWC,EAAAA,EAAAA,eAEXC,GAAeC,EAAAA,EAAAA,cAAY,qBAAGC,QAAsBF,gBACpDG,GAAYF,EAAAA,EAAAA,cAAY,qBAAGC,QAAsBC,aACjDC,GAAMH,EAAAA,EAAAA,cAAY,qBAAGC,QAAsBE,OAC3CC,GAAaJ,EAAAA,EAAAA,cAAY,qBAAGC,QAAsBI,YACpDC,EAAU,IACdP,MAAAA,OAAA,EAAAA,EAAcQ,UACXD,EAAU,EAAH,KACHA,GACA,CAAEE,KAAMT,EAAaU,KAAK,QAEjCP,IACGI,EAAU,EAAH,KAAQA,IAAYI,EAAAA,EAAAA,IAAqBR,EAAWC,KAC9D,OAA2CQ,EAAAA,EAAAA,IAAmB,EAAD,KACxDL,GADwD,IAE3DM,KAAMlB,KAFR,IAAQmB,KAAMC,OAAd,MAAwB,GAAxB,EAA4BC,EAA5B,EAA4BA,WAI5B,GAAkCC,EAAAA,EAAAA,UAAS,GAA3C,eAAOC,EAAP,KAAkBC,EAAlB,KAiBA,OAfAC,EAAAA,EAAAA,YAAU,WACR,IAAMC,EAAmB,EAAH,GAAQhB,GAU9B,OATAP,GACEwB,EAAAA,EAAAA,IAAiB,CACfC,WAAW,EACXR,QAASpB,EACT6B,MAAO,GACPC,OAAQ,KAIL,kBAAM3B,GAASwB,EAAAA,EAAAA,IAAiBD,OAEtC,IAGD,kBAAC,aAAD,KACGL,EACC,kBAAC,IAAD,MAEA,kBAAC,aAAD,KACE,kBAAC,IAAD,CAAYU,UAAU,sBACpB,kBAAC,IAAD,CACEC,OAAO,WACPC,QAASb,EAAQc,aAAe,KAElC,kBAAC,IAAD,CAAeC,UAAWf,EAAQgB,aAClC,kBAAC,IAAD,CACEC,MACE,kBAAC,aAAD,KACGjB,EAAQc,YACRd,EAAQkB,cACP,kBAAC,IAAD,CAAYC,KAAM,CAAEzB,KAAM,iBAKlC,2BACGhB,EAAK0C,cAAcC,EAAAA,EAAAA,uBAAiC,CACnDC,KACE,kBAAC,IAAD,CACEA,KAAM,IAAIC,KAAKvB,EAAQwB,cACvBC,KAAK,iBAMf,kBAAC,IAAD,CAAMd,UAAU,wCACd,kBAAC,IAAD,CAAMe,WAAS,GACb,kBAAC,IAAD,CAAUC,GAAI,GAAIC,GAAI,GACpB,kBAAC,KAAc5B,IAEjB,kBAAC,IAAD,CAAU2B,GAAI,GAAIC,GAAI,GACpB,kBAAC,KAAe5B,OAMzBC,GAAc,kBAAC,IAAD,MACf,kBAAC,IAAD,KACE,kBAAC,IAAD,CACEU,UAAU,kCACVkB,cAAY,EACZC,eAAa,EACbC,UAAW5B,EACX6B,SAAU,SAACC,EAAIC,GAAL,OAAa9B,EAAa8B,KAEpC,kBAAC,IAAD,CACEC,SAAU,EACVlB,MACE,kBAAC,EAAAmB,EAAD,KACG1D,EAAK0C,cAAcC,EAAAA,EAAAA,mBAIvBpB,EACC,kBAAC,IAAD,MAEA,kBAAC,EAAAoC,SAAD,CAAUC,SAAU,kBAAC,IAAD,OAClB,kBAAC9D,EAAD,QAIN,kBAAC,IAAD,CACE2D,SAAU,EACVlB,MACE,kBAAC,EAAAmB,EAAD,KACG1D,EAAK0C,cAAcC,EAAAA,EAAAA,WAIvBpB,EACC,kBAAC,IAAD,MAEA,kBAAC,EAAAoC,SAAD,CAAUC,SAAU,kBAAC,IAAD,OAClB,kBAAC,IAAD,CACEC,WAAY,CACVC,cAAc,EACdC,gBAAgB,GAElBzC,QAASpB,EACTK,aAAcA,EACdG,UAAWA,EACXC,IAAKA","sources":["webpack:///./src/SmartComponents/Recs/DetailsPathways.js"],"sourcesContent":["import './Details.scss';\n\nimport {\n  Grid,\n  GridItem,\n} from '@patternfly/react-core/dist/esm/layouts/Grid/index';\nimport {\n  PageHeader,\n  PageHeaderTitle,\n} from '@redhat-cloud-services/frontend-components/PageHeader';\nimport React, { Suspense, lazy, useEffect, useState } from 'react';\nimport {\n  Resolution,\n  TotalRisk,\n} from '../../PresentationalComponents/Cards/Pathways';\nimport {\n  Tab,\n  TabTitleText,\n  Tabs,\n} from '@patternfly/react-core/dist/esm/components/Tabs/index';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport Breadcrumbs from '../../PresentationalComponents/Breadcrumbs/Breadcrumbs';\nimport CategoryLabel from '../../PresentationalComponents/Labels/CategoryLabel';\nimport { DateFormat } from '@redhat-cloud-services/frontend-components/DateFormat';\nimport Inventory from '../../PresentationalComponents/Inventory/Inventory';\nimport Loading from '../../PresentationalComponents/Loading/Loading';\nimport { Main } from '@redhat-cloud-services/frontend-components/Main';\nimport RuleLabels from '../../PresentationalComponents/Labels/RuleLabels';\nimport messages from '../../Messages';\nimport { updateRecFilters } from '../../Services/Filters';\nimport { useGetPathwayQuery } from '../../Services/Pathways';\nimport { useIntl } from 'react-intl';\nimport { useParams } from 'react-router-dom';\nimport { workloadQueryBuilder } from '../../PresentationalComponents/Common/Tables';\n\nconst RulesTable = lazy(() =>\n  import(\n    /* webpackChunkName: 'RulesTable' */ '../../PresentationalComponents/RulesTable/RulesTable'\n  )\n);\n\nconst PathwayDetails = () => {\n  const intl = useIntl();\n  const pathwayName = useParams().id;\n  const dispatch = useDispatch();\n\n  const selectedTags = useSelector(({ filters }) => filters.selectedTags);\n  const workloads = useSelector(({ filters }) => filters.workloads);\n  const SID = useSelector(({ filters }) => filters.SID);\n  const recFilters = useSelector(({ filters }) => filters.recState);\n  let options = {};\n  selectedTags?.length &&\n    (options = {\n      ...options,\n      ...{ tags: selectedTags.join(',') },\n    });\n  workloads &&\n    (options = { ...options, ...workloadQueryBuilder(workloads, SID) });\n  const { data: pathway = {}, isFetching } = useGetPathwayQuery({\n    ...options,\n    slug: pathwayName,\n  });\n  const [activeTab, setActiveTab] = useState(0);\n\n  useEffect(() => {\n    const initiaRecFilters = { ...recFilters };\n    dispatch(\n      updateRecFilters({\n        impacting: true,\n        pathway: pathwayName,\n        limit: 20,\n        offset: 0,\n      })\n    );\n\n    return () => dispatch(updateRecFilters(initiaRecFilters));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <React.Fragment>\n      {isFetching ? (\n        <Loading />\n      ) : (\n        <React.Fragment>\n          <PageHeader className=\"pageHeaderOverride\">\n            <Breadcrumbs\n              ouiaId=\"override\"\n              current={pathway.description || ''}\n            />\n            <CategoryLabel labelList={pathway.categories} />\n            <PageHeaderTitle\n              title={\n                <React.Fragment>\n                  {pathway.description}\n                  {pathway.has_incident && (\n                    <RuleLabels rule={{ tags: 'incident' }} />\n                  )}\n                </React.Fragment>\n              }\n            />\n            <p>\n              {intl.formatMessage(messages.rulesDetailsPubishdate, {\n                date: (\n                  <DateFormat\n                    date={new Date(pathway.publish_date)}\n                    type=\"onlyDate\"\n                  />\n                ),\n              })}\n            </p>\n          </PageHeader>\n          <Main className=\"ins-c-advisor__pathway-detail__cards\">\n            <Grid hasGutter>\n              <GridItem sm={12} md={6}>\n                <TotalRisk {...pathway} />\n              </GridItem>\n              <GridItem sm={12} md={6}>\n                <Resolution {...pathway} />\n              </GridItem>\n            </Grid>\n          </Main>\n        </React.Fragment>\n      )}\n      {isFetching && <Loading />}\n      <Main>\n        <Tabs\n          className=\"advisor__background--global-100\"\n          mountOnEnter\n          unmountOnExit\n          activeKey={activeTab}\n          onSelect={(_e, tab) => setActiveTab(tab)}\n        >\n          <Tab\n            eventKey={0}\n            title={\n              <TabTitleText>\n                {intl.formatMessage(messages.recommendations)}\n              </TabTitleText>\n            }\n          >\n            {isFetching ? (\n              <Loading />\n            ) : (\n              <Suspense fallback={<Loading />}>\n                <RulesTable />\n              </Suspense>\n            )}\n          </Tab>\n          <Tab\n            eventKey={1}\n            title={\n              <TabTitleText>\n                {intl.formatMessage(messages.systems)}\n              </TabTitleText>\n            }\n          >\n            {isFetching ? (\n              <Loading />\n            ) : (\n              <Suspense fallback={<Loading />}>\n                <Inventory\n                  tableProps={{\n                    canSelectAll: false,\n                    isStickyHeader: true,\n                  }}\n                  pathway={pathwayName}\n                  selectedTags={selectedTags}\n                  workloads={workloads}\n                  SID={SID}\n                />\n              </Suspense>\n            )}\n          </Tab>\n        </Tabs>\n      </Main>\n    </React.Fragment>\n  );\n};\n\nexport default PathwayDetails;\n"],"names":["RulesTable","lazy","intl","useIntl","pathwayName","useParams","id","dispatch","useDispatch","selectedTags","useSelector","filters","workloads","SID","recFilters","recState","options","length","tags","join","workloadQueryBuilder","useGetPathwayQuery","slug","data","pathway","isFetching","useState","activeTab","setActiveTab","useEffect","initiaRecFilters","updateRecFilters","impacting","limit","offset","className","ouiaId","current","description","labelList","categories","title","has_incident","rule","formatMessage","messages","date","Date","publish_date","type","hasGutter","sm","md","mountOnEnter","unmountOnExit","activeKey","onSelect","_e","tab","eventKey","T","Suspense","fallback","tableProps","canSelectAll","isStickyHeader"],"sourceRoot":""}